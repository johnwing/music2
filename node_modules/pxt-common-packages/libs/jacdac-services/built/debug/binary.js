// total=428092 new=90.45% cached=0.00% other=9.55%
(function (ectx) {
'use strict';
const runtime = ectx.runtime;
const oops = ectx.oops;
const doNothing = ectx.doNothing;
const pxsim = ectx.pxsim;
const globals = ectx.globals;
const maybeYield = ectx.maybeYield;
const setupDebugger = ectx.setupDebugger;
const isBreakFrame = ectx.isBreakFrame;
const breakpoint = ectx.breakpoint;
const trace = ectx.trace;
const checkStack = ectx.checkStack;
const leave = ectx.leave;
const checkResumeConsumed = ectx.checkResumeConsumed;
const setupResume = ectx.setupResume;
const setupLambda = ectx.setupLambda;
const checkSubtype = ectx.checkSubtype;
const failedCast = ectx.failedCast;
const buildResume = ectx.buildResume;
const mkVTable = ectx.mkVTable;
const __this = runtime;
const pxtrt = pxsim.pxtrt;
let yieldSteps = 1;
ectx.setupYield(function() { yieldSteps = 100; })
pxsim.setTitle("jacdac-services");
pxsim.setConfigData({}, {});
pxtrt.mapKeyNames = [
 "",
 "_bridge",
 "_buffer",
 "_bus",
 "_consoleMode",
 "_consoleService",
 "_controlData",
 "_controlService",
 "_device_name",
 "_eventId",
 "_hostConnected",
 "_hostDisconnected",
 "_intervalId",
 "_lastListenerTime",
 "_lastState",
 "_localTime",
 "_mode",
 "_sensorState",
 "_service_class",
 "_services",
 "_stateChangedHandler",
 "add",
 "addAdvertisementData",
 "addDevice",
 "advertisement_size",
 "append",
 "broadcastEvent",
 "broadcast_servicemap",
 "bus",
 "communication_rate",
 "configurationService",
 "consoleMode",
 "consoleService",
 "crc",
 "data",
 "delay",
 "deltaTimeMillis",
 "device",
 "deviceDisconnected",
 "deviceEnumerated",
 "deviceManager",
 "device_address",
 "device_flags",
 "device_name",
 "devices",
 "enumerate",
 "eventId",
 "flags",
 "formControlPacket",
 "frameCallbacks",
 "frameWorker",
 "framesInSample",
 "func",
 "getBuffer",
 "getDeviceList",
 "getDeviceName",
 "getRemoteDevice",
 "getRemoteDeviceUnique",
 "handleCustomCommand",
 "handlePacket",
 "handlePacketData",
 "handleServiceInformation",
 "handleVirtualState",
 "handler",
 "handlers",
 "id",
 "idleCallbacks",
 "initialise",
 "instance",
 "isConnected",
 "log",
 "message",
 "minPriority",
 "mode",
 "name",
 "new_name",
 "nextAddress",
 "onChange",
 "onConnected",
 "onDisconnected",
 "onIdentificationRequest",
 "onMessageReceived",
 "onNameRemotelyChanged",
 "packetType",
 "prevTimeMillis",
 "priority",
 "raiseEvent",
 "register",
 "registerHandler",
 "removeDevice",
 "request_type",
 "requiredDevice",
 "rngService",
 "rolling_counter",
 "routePacket",
 "runningCallbacks",
 "send",
 "sendPacket",
 "serviceNumber",
 "service_class",
 "service_flags",
 "service_number",
 "servicemap_bitmsk",
 "services",
 "setDeviceName",
 "size",
 "src",
 "start",
 "startDeviceTimer",
 "state",
 "status",
 "suppressForwarding",
 "supressLog",
 "sync",
 "timeInSample",
 "toString",
 "udid",
 "udidh",
 "udidl",
 "unique_device_identifier",
 "update",
 "updateDevice",
 "value",
 "work",
 "write",
 "writeBuffer",
 "writePacket"
];
__this.setupPerfCounters([]);
const pxsim_Array__getAt = pxsim.Array_.getAt;
const pxsim_Array__length = pxsim.Array_.length;
const pxsim_Array__mk = pxsim.Array_.mk;
const pxsim_Array__push = pxsim.Array_.push;
const pxsim_Boolean__bang = pxsim.Boolean_.bang;
const pxsim_String__concat = pxsim.String_.concat;
const pxsim_String__stringConv = pxsim.String_.stringConv;
const pxsim_numops_toBool = pxsim.numops.toBool;
const pxsim_numops_toBoolDecr = pxsim.numops.toBoolDecr;
const pxsim_pxtcore_mkAction = pxsim.pxtcore.mkAction;
const pxsim_pxtcore_mkClassInstance = pxsim.pxtcore.mkClassInstance;
const pxsim_pxtrt_ldlocRef = pxsim.pxtrt.ldlocRef;
const pxsim_pxtrt_mapGetByString = pxsim.pxtrt.mapGetByString;
const pxsim_pxtrt_stclo = pxsim.pxtrt.stclo;
const pxsim_pxtrt_stlocRef = pxsim.pxtrt.stlocRef;
const pxsim_Boolean_ = pxsim.Boolean_;
const pxsim_pxtcore = pxsim.pxtcore;
const pxsim_String_ = pxsim.String_;
const pxsim_ImageMethods = pxsim.ImageMethods;
const pxsim_Array_ = pxsim.Array_;
const pxsim_pxtrt = pxsim.pxtrt;
const pxsim_numops = pxsim.numops;


function _main___P71097(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = (0.5 * 256);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 | 0);
    globals.oneHalfFx8___71193 = (r0);
    globals._pollEventQueue___71301 = (undefined);
    globals._intervals___71308 = (undefined);
    globals.minPriority___71322 = (1);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, inline__P71323);
    globals.listeners___71324 = (s.tmp_0);
    globals.jacdacStarted___71827 = (false);
    globals.consolePriority___71843 = (0);
    globals.jacdac_MessageBusService_NAME___71973 = ("bus");
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_MessageBusService__C71968_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_MessageBusService_constructor__P71974_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    globals.messageBusService___71976 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_RotaryEncoderClient__C72198_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_RotaryEncoderClient_constructor__P72202_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = "crank";
    s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    globals.rotaryEncoderClient___72204 = (s.tmp_0);
    s.tmp_0 = jacdac_broadcastEvent__P71977_mk(s);
    s.tmp_0.arg0 = 9008;
    s.tmp_0.arg1 = 3;
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.tmp_0 = control_onEvent__P71351_mk(s);
    s.tmp_0.arg0 = 9008;
    s.tmp_0.arg1 = 3;
    s.tmp_0.arg2 = inline__P72210;
    s.tmp_0.arg3 = 16;
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
_main___P71097.info = {"start":0,"length":0,"line":0,"column":0,"endLine":0,"endColumn":0,"fileName":"test.ts","functionName":"<main>","argumentNames":[]}
_main___P71097.continuations = [  ]

function _main___P71097_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: _main___P71097, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function inline__P72210(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.tmp_0 = console_log__P71329_mk(s);
    s.tmp_0.arg0 = "click";
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
inline__P72210.info = {"start":109,"length":40,"line":1,"column":51,"endLine":3,"endColumn":1,"fileName":"test.ts","functionName":"inline","argumentNames":[]}

function inline__P72210_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P72210, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function console_log__P71329(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P71325_mk(s);
    s.tmp_0.arg0 = 1;
    s.tmp_1 = console_inspect__P71331_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = 20;
    s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_log__P71329.info = {"start":1422,"length":95,"line":57,"column":4,"endLine":59,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"log","argumentNames":["value"]}

function console_log__P71329_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_log__P71329, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function console_inspect__P71331(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.asArr___72234 = undefined;
    s.asString___72255 = undefined;
    s.keys___72267 = undefined;
    s.snipped___72271 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore.typeOf(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "string");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0;
    { step = 17; continue; }
    { step = 16; continue; }
  case 1:
    r0 = pxsim_pxtcore.typeOf(s.arg0);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == "number");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    { step = 17; continue; }
    { step = 15; continue; }
  case 2:
    r0 = pxsim_Array_.isArray(s.arg0);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 5; continue; }
    s.asArr___72234 = (s.arg0);
    r0 = pxsim_Array__length(s.asArr___72234);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = helpers_arrayJoin__P71147_mk(s);
    s.tmp_2.arg0 = s.asArr___72234;
    s.tmp_2.arg1 = ",";
    s.pc = 19; return s.tmp_2;
  case 19:
    r0 = s.retval;
    { step = 17; continue; }
    { step = 4; continue; }
  case 3:
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    s.tmp_7 = helpers_arrayJoin__P71147_mk(s);
    s.tmp_8 = helpers_arraySlice__P71160_mk(s);
    s.tmp_8.arg0 = s.asArr___72234;
    s.tmp_8.arg1 = 0;
    s.tmp_8.arg2 = s.arg1;
    s.pc = 21; return s.tmp_8;
  case 21:
    r0 = s.retval;
    s.tmp_7.arg0 = r0;
    s.tmp_7.arg1 = ",";
    s.pc = 20; return s.tmp_7;
  case 20:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "...");
    { step = 17; continue; }
  case 4:
    { step = 14; continue; }
  case 5:
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_9, s.tmp_10);
    s.asString___72255 = (r0);
    r0 = (s.asString___72255 != "[object Object]");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_0;
    { step = 7; continue; }
  case 6:
    r0 = (s.asString___72255 != "[Object]");
  case 7:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = s.asString___72255;
    { step = 17; continue; }
  case 8:
  case 9:
    r0 = pxsim_pxtrt.keysOf(s.arg0);
    s.keys___72267 = (r0);
    r0 = pxsim_Array__length(s.keys___72267);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 > s.arg1);
    s.snipped___72271 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.snipped___72271);
    if (!r0) { step = 10; continue; }
    s.tmp_0 = helpers_arraySlice__P71160_mk(s);
    s.tmp_0.arg0 = s.keys___72267;
    s.tmp_0.arg1 = 0;
    s.tmp_0.arg2 = s.arg1;
    s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.keys___72267 = (r0);
  case 10:
  case 11:
    r0 = pxsim_pxtcore_mkAction(1, inline__P72289);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim_numops_toBoolDecr(s.snipped___72271);
    if (!r0) { step = 12; continue; }
    r0 = "\n    ...";
    { step = 13; continue; }
  case 12:
    r0 = pxsim_String_.mkEmpty();
  case 13:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.tmp_7 = helpers_arrayReduce__P71158_mk(s);
    s.tmp_7.arg0 = s.keys___72267;
    s.tmp_7.arg1 = s.tmp_0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_7.arg2 = r0;
    s.pc = 25; return s.tmp_7;
  case 25:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 26);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 26:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_8);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 28);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 28:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("{", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "\n}");
    { step = 17; continue; }
  case 14:
  case 15:
  case 16:
    r0 = undefined;
  case 17:
    return leave(s, r0)
  default: oops()
} } }
console_inspect__P71331.info = {"start":2173,"length":1190,"line":78,"column":4,"endLine":111,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"inspect","argumentNames":["obj","maxElements"]}

function console_inspect__P71331_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_inspect__P71331, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  asArr___72234: undefined,
  asString___72255: undefined,
  keys___72267: undefined,
  snipped___72271: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function inline__P72289(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 1);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("\n    ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, ": ");
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[0], s.arg1);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_6);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
inline__P72289.info = {"start":3195,"length":61,"line":105,"column":20,"endLine":105,"endColumn":81,"fileName":"pxt_modules/base/console.ts","functionName":"inline","argumentNames":["prev","currKey"]}

function inline__P72289_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P72289, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arrayReduce__P71158(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.len___72316 = undefined;
    s.i___72319 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.len___72316 = (r0);
    s.i___72319 = (0);
  case 1:
    r0 = (s.i___72319 < s.len___72316);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = lambda_4_mk(s);
    s.tmp_1.argL = s.arg1;
    s.tmp_1.arg0 = s.arg2;
    r0 = pxsim_Array__getAt(s.arg0, s.i___72319);
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = s.i___72319;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.arg2 = (r0);
    r0 = (s.i___72319 + 1);
    s.i___72319 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = s.arg2;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayReduce__P71158.info = {"start":6458,"length":317,"line":220,"column":4,"endLine":226,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayReduce","argumentNames":["arr","callbackfn","initialValue"]}

function helpers_arrayReduce__P71158_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayReduce__P71158, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  len___72316: undefined,
  i___72319: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_arraySlice__P71160(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.res___72337 = undefined;
    s.len___72339 = undefined;
    s.i___72373 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.res___72337 = (r0);
    r0 = pxsim_Array__length(s.arg0);
    s.len___72339 = (r0);
    r0 = (s.arg1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.arg1 = (0);
    { step = 4; continue; }
  case 1:
    r0 = (s.arg1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = Math_max__P71169_mk(s);
    r0 = (s.len___72339 + s.arg1);
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    s.pc = 16; return s.tmp_1;
  case 16:
    r0 = s.retval;
    s.arg1 = (r0);
  case 2:
  case 3:
  case 4:
    r0 = (s.arg1 > s.len___72339);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.res___72337;
    { step = 15; continue; }
  case 5:
  case 6:
    r0 = (s.arg2 === undefined);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
    s.arg2 = (s.len___72339);
    { step = 10; continue; }
  case 7:
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = (s.len___72339 + s.arg2);
    s.arg2 = (r0);
  case 8:
  case 9:
  case 10:
    r0 = (s.arg2 > s.len___72339);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.arg2 = (s.len___72339);
  case 11:
  case 12:
    s.i___72373 = (s.arg1);
  case 13:
    r0 = (s.i___72373 < s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    s.tmp_1 = r0 = s.res___72337;
    r0 = pxsim_Array__getAt(s.arg0, s.i___72373);
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
    r0 = (s.i___72373 + 1);
    s.i___72373 = (r0);
    { step = 13; continue; }
  case 14:
    r0 = s.res___72337;
  case 15:
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySlice__P71160.info = {"start":7051,"length":690,"line":239,"column":4,"endLine":264,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arraySlice","argumentNames":["arr","start","end"]}

function helpers_arraySlice__P71160_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySlice__P71160, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  res___72337: undefined,
  len___72339: undefined,
  i___72373: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function Math_max__P71169(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 >= s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = s.arg1;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
Math_max__P71169.info = {"start":11226,"length":105,"line":389,"column":4,"endLine":392,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"max","argumentNames":["a","b"]}

function Math_max__P71169_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Math_max__P71169, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arrayJoin__P71147(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.r___72406 = undefined;
    s.len___72407 = undefined;
    s.i___72410 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg1 === null);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    s.arg1 = (",");
  case 3:
  case 4:
    r0 = pxsim_String_.mkEmpty();
    s.r___72406 = (r0);
    r0 = pxsim_Array__length(s.arg0);
    s.len___72407 = (r0);
    s.i___72410 = (0);
  case 5:
    r0 = (s.i___72410 < s.len___72407);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    r0 = (s.i___72410 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_1;
    { step = 7; continue; }
  case 6:
    r0 = s.arg1;
  case 7:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 8; continue; }
    if ((s.r___72406) && (s.r___72406).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.r___72406);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___72406) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_3 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.r___72406 = (r0);
  case 8:
  case 9:
    r0 = pxsim_Array__getAt(s.arg0, s.i___72410);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = s.tmp_0;
    { step = 11; continue; }
  case 10:
    r0 = pxsim_Array__getAt(s.arg0, s.i___72410);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 === null);
  case 11:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 12; continue; }
    r0 = pxsim_String_.mkEmpty();
    { step = 13; continue; }
  case 12:
    r0 = pxsim_Array__getAt(s.arg0, s.i___72410);
  case 13:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    if ((s.r___72406) && (s.r___72406).vtable) {
    setupResume(s, 17);
    pxsim_String__stringConv(s.r___72406);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___72406) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    s.r___72406 = (r0);
    r0 = (s.i___72410 + 1);
    s.i___72410 = (r0);
    { step = 5; continue; }
  case 14:
    r0 = s.r___72406;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayJoin__P71147.info = {"start":2275,"length":432,"line":97,"column":4,"endLine":110,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayJoin","argumentNames":["arr","sep"]}

function helpers_arrayJoin__P71147_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayJoin__P71147, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  r___72406: undefined,
  len___72407: undefined,
  i___72410: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function console_add__P71325(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.i___72459 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 < globals.minPriority___71322);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "\n");
    s.arg1 = (r0);
    s.i___72459 = (0);
  case 3:
    s.tmp_1 = r0 = s.i___72459;
    r0 = pxsim_Array__length(globals.listeners___71324);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_3 = lambda_3_mk(s);
    r0 = pxsim_Array__getAt(globals.listeners___71324, s.i___72459);
    s.tmp_3.argL = r0;
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.arg1;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.pc = 7; return s.tmp_3;
  case 7:
    r0 = s.retval;
    r0 = (s.i___72459 + 1);
    s.i___72459 = (r0);
    { step = 3; continue; }
  case 4:
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_add__P71325.info = {"start":632,"length":280,"line":28,"column":4,"endLine":35,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"add","argumentNames":["priority","text"]}

function console_add__P71325_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_add__P71325, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  i___72459: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function inline__P71323(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.__log(s.arg0, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
inline__P71323.info = {"start":534,"length":85,"line":25,"column":8,"endLine":25,"endColumn":93,"fileName":"pxt_modules/base/console.ts","functionName":"inline","argumentNames":["priority","text"]}

function inline__P71323_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P71323, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function control_onEvent__P71351(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.ctx___72484 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = control_eventContext__P71373_mk(s);
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.ctx___72484 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.ctx___72484);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.control.internalOnEvent(s.arg0, s.arg1, s.arg2, s.arg3);
    { step = 2; continue; }
  case 1:
    s.tmp_0 = control_EventContext_registerHandler__P71365_mk(s);
    s.tmp_0.arg0 = s.ctx___72484;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.tmp_0.arg3 = s.arg2;
    s.tmp_0.arg4 = s.arg3;
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_onEvent__P71351.info = {"start":336,"length":325,"line":9,"column":4,"endLine":15,"endColumn":5,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"onEvent","argumentNames":["src","value","handler","flags"]}

function control_onEvent__P71351_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_onEvent__P71351, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  ctx___72484: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function control_EventContext_registerHandler__P71365(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.h___72507 = undefined;
    s.unnamed100___U1 = undefined;
    s.unnamed101___U2 = undefined;
    s.hn___72530 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_EventContext__C71358_VT)) failedCast(r0);
    s.h___72507 = (undefined);
    r0 = s.arg0.fields["handlers"];
    s.unnamed100___U1 = (r0);
    s.unnamed101___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed101___U2;
    r0 = pxsim_Array__length(s.unnamed100___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed100___U1, s.unnamed101___U2);
    s.h___72507 = (r0);
    r0 = s.h___72507.fields["src"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 3; continue; }
  case 2:
    r0 = s.h___72507.fields["value"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.arg2);
  case 3:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 4; continue; }
    r0 = (s.h___72507).fields["flags"] = (s.arg4);
    r0 = (s.h___72507).fields["handler"] = (s.arg3);
    { step = 7; continue; }
  case 4:
  case 5:
    r0 = (s.unnamed101___U2 + 1);
    s.unnamed101___U2 = (r0);
    { step = 1; continue; }
  case 6:
    s.unnamed100___U1 = (undefined);
    r0 = pxsim_pxtcore_mkClassInstance(control_EventHandler__C71353_VT);
    s.tmp_0 = r0;
    s.tmp_1 = control_EventHandler_constructor__P71356_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg2;
    s.tmp_1.arg3 = s.arg3;
    s.tmp_1.arg4 = s.arg4;
    s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.hn___72530 = (s.tmp_0);
    r0 = s.arg0.fields["handlers"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.hn___72530);
    s.tmp_0 = control_EventHandler_register__P71354_mk(s);
    s.tmp_0.arg0 = s.hn___72530;
    s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventContext_registerHandler__P71365.info = {"start":5145,"length":525,"line":158,"column":8,"endLine":171,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"registerHandler","argumentNames":["this","src","value","handler","flags"]}

function control_EventContext_registerHandler__P71365_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventContext_registerHandler__P71365, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  h___72507: undefined,
  unnamed100___U1: undefined,
  unnamed101___U2: undefined,
  hn___72530: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function control_EventHandler_register__P71354(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_EventHandler__C71353_VT)) failedCast(r0);
    r0 = pxsim_pxtcore_mkAction(1, inline__P72551);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = s.arg0.fields["src"];
    s.tmp_1 = r0;
    r0 = s.arg0.fields["value"];
    s.tmp_2 = r0;
    r0 = s.arg0.fields["flags"];
    s.tmp_3 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_1, s.tmp_2, s.tmp_0, s.tmp_3);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventHandler_register__P71354.info = {"start":954,"length":165,"line":30,"column":8,"endLine":34,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"register","argumentNames":["this"]}

function control_EventHandler_register__P71354_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventHandler_register__P71354, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function inline__P72551(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = s.caps[0].fields["handler"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = lambda_1_mk(s);
    r0 = s.caps[0].fields["handler"];
    s.tmp_1.argL = r0;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
inline__P72551.info = {"start":1025,"length":71,"line":31,"column":58,"endLine":33,"endColumn":13,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"inline","argumentNames":[]}

function inline__P72551_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P72551, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function control_EventHandler_constructor__P71356(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_EventHandler__C71353_VT)) failedCast(r0);
    r0 = (s.arg0).fields["src"] = (s.arg1);
    r0 = (s.arg0).fields["value"] = (s.arg2);
    r0 = (s.arg0).fields["handler"] = (s.arg3);
    r0 = (s.arg0).fields["flags"] = (s.arg4);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventHandler_constructor__P71356.info = {"start":779,"length":165,"line":23,"column":8,"endLine":28,"endColumn":13,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"inline","argumentNames":["this","src","value","handler","flags"]}

function control_EventHandler_constructor__P71356_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventHandler_constructor__P71356, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function control_eventContext__P71373(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals.eventContexts___71372);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = r0 = globals.eventContexts___71372;
    r0 = pxsim_Array__length(globals.eventContexts___71372);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 1);
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, s.tmp_1);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
control_eventContext__P71373.info = {"start":6479,"length":136,"line":198,"column":4,"endLine":200,"endColumn":5,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"eventContext","argumentNames":[]}

function control_eventContext__P71373_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_eventContext__P71373, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
} }





function jacdac_broadcastEvent__P71977(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_MessageBusService_broadcastEvent__P71971_mk(s);
    s.tmp_0.arg0 = globals.messageBusService___71976;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_broadcastEvent__P71977.info = {"start":1708,"length":120,"line":50,"column":4,"endLine":52,"endColumn":5,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"broadcastEvent","argumentNames":["src","value"]}

function jacdac_broadcastEvent__P71977_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_broadcastEvent__P71977, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_MessageBusService_constructor__P71974(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_MessageBusService__C71968_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Broadcast_constructor__P71928_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.jacdac_MessageBusService_NAME___71973;
    s.tmp_0.arg2 = 2020;
    s.tmp_0.arg3 = undefined;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = (s.arg0).fields["suppressForwarding"] = (false);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_MessageBusService_constructor__P71974.info = {"start":218,"length":146,"line":9,"column":8,"endLine":12,"endColumn":9,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_MessageBusService_constructor__P71974_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_MessageBusService_constructor__P71974, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Broadcast_constructor__P71928(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Broadcast__C71926_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Service_constructor__P71925_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 3;
    s.tmp_0.arg3 = s.arg2;
    s.tmp_0.arg4 = s.arg3;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Broadcast_constructor__P71928.info = {"start":2608,"length":181,"line":90,"column":8,"endLine":92,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"inline","argumentNames":["this","name","serviceClass","controlDataLength"]}

function jacdac_Broadcast_constructor__P71928_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Broadcast_constructor__P71928, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_Service_constructor__P71925(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Service__C71912_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDService_constructor__P71494_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg3;
    s.tmp_0.arg2 = s.arg2;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = (s.arg0).fields["name"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_3 = Math_max__P71169_mk(s);
    s.tmp_3.arg0 = 0;
    s.tmp_3.arg1 = s.arg4;
    s.pc = 2; return s.tmp_3;
  case 2:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_controlData"] = (s.tmp_1);
    r0 = (s.arg0).fields["supressLog"] = (false);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.allocateNotifyEvent();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_eventId"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Service_constructor__P71925.info = {"start":243,"length":354,"line":8,"column":8,"endLine":15,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"inline","argumentNames":["this","name","mode","serviceClass","controlDataLength"]}

function jacdac_Service_constructor__P71925_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Service_constructor__P71925, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function jacdac_JDService_constructor__P71494(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDService__C71484_VT)) failedCast(r0);
    r0 = (s.arg0).fields["_service_class"] = (s.arg1);
    r0 = (s.arg0).fields["service_number"] = (65535);
    r0 = (s.arg0).fields["status"] = (0);
    r0 = (s.arg0).fields["_mode"] = (s.arg2);
    r0 = (s.arg0).fields["service_flags"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDService_constructor__P71494.info = {"start":815,"length":280,"line":35,"column":8,"endLine":41,"endColumn":9,"fileName":"pxt_modules/jacdac/service.ts","functionName":"inline","argumentNames":["this","service_class","mode"]}

function jacdac_JDService_constructor__P71494_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDService_constructor__P71494, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_MessageBusService_broadcastEvent__P71971(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_MessageBusService__C71968_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Service__C71912_v4_1_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Service__C71912_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.start;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(3, inline__P72645);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.arg1);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 2, s.arg2);
    s.tmp_1 = control_onEvent__P71351_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = s.arg2;
    s.tmp_1.arg2 = s.tmp_0;
    s.tmp_1.arg3 = 192;
    s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_MessageBusService_broadcastEvent__P71971.info = {"start":667,"length":353,"line":22,"column":8,"endLine":29,"endColumn":9,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"broadcastEvent","argumentNames":["this","id","value"]}

function jacdac_MessageBusService_broadcastEvent__P71971_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_MessageBusService_broadcastEvent__P71971, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function inline__P72645(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = s.caps[0].fields["suppressForwarding"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    s.tmp_1 = jacdac_MessageBusService_raiseEvent__P71970_mk(s);
    s.tmp_1.arg0 = s.caps[0];
    s.tmp_1.arg1 = s.caps[1];
    s.tmp_1.arg2 = s.caps[2];
    s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
inline__P72645.info = {"start":855,"length":118,"line":25,"column":39,"endLine":28,"endColumn":13,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"inline","argumentNames":[]}

function inline__P72645_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P72645, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_MessageBusService_raiseEvent__P71970(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.event___72657 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_MessageBusService__C71968_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Service__C71912_v4_1_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Service__C71912_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.start;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = pxsim.control.createBuffer(4);
    s.event___72657 = (r0);
    r0 = pxsim.BufferMethods.setNumber(s.event___72657, 4, 0, s.arg1);
    r0 = pxsim.BufferMethods.setNumber(s.event___72657, 4, 2, s.arg2);
    s.tmp_0 = jacdac_Service_sendPacket__P71922_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.event___72657;
    s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_MessageBusService_raiseEvent__P71970.info = {"start":374,"length":283,"line":14,"column":8,"endLine":20,"endColumn":9,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"raiseEvent","argumentNames":["this","id","value"]}

function jacdac_MessageBusService_raiseEvent__P71970_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_MessageBusService_raiseEvent__P71970, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  event___72657: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Service_sendPacket__P71922(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Service__C71912_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Service__C71912_v4_1_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Service__C71912_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.start;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDService__C71484_v3_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_JDService__C71484_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.send;
    s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Service_sendPacket__P71922.info = {"start":1807,"length":99,"line":59,"column":8,"endLine":62,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"sendPacket","argumentNames":["this","pkt"]}

function jacdac_Service_sendPacket__P71922_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Service_sendPacket__P71922, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDService_send__P71491(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDService__C71484_VT)) failedCast(r0);
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_1 = if_isConnected_1_mk(s);
    s.tmp_3 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = s.tmp_2.fields["_bus"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["isConnected"];
    if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["isConnected"]; }
    else { s.pc = 5; return s.tmp_1; }
  case 5:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 3; continue; }
    s.tmp_5 = jacdac_JACDAC_write__P71741_mk(s);
    s.tmp_6 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 8; return s.tmp_6;
  case 8:
    r0 = s.retval;
    s.tmp_5.arg0 = r0;
    s.tmp_5.arg1 = s.arg1;
    r0 = s.arg0.fields["service_number"];
    s.tmp_5.arg2 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_5.arg3 = r0;
    r0 = s.arg0.fields["device"];
    s.tmp_5.arg4 = r0;
    s.pc = 7; return s.tmp_5;
  case 7:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDService_send__P71491.info = {"start":1708,"length":213,"line":68,"column":8,"endLine":71,"endColumn":9,"fileName":"pxt_modules/jacdac/service.ts","functionName":"send","argumentNames":["this","buffer"]}

function jacdac_JDService_send__P71491_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDService_send__P71491, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JACDAC_write__P71741(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.packet___72706 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDPacket__C71762_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDPacket_constructor__P71779_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = undefined;
    s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.packet___72706 = (s.tmp_0);
    r0 = (s.arg3 == 255);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = jacdac_JDPacket_data__P71774_mk(s);
    s.tmp_1.arg0 = s.packet___72706;
    s.tmp_2 = helpers_bufferConcat__P71232_mk(s);
    r0 = s.arg4.fields["unique_device_identifier"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.arg1;
    s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    s.tmp_0 = jacdac_JDPacket_data__P71774_mk(s);
    s.tmp_0.arg0 = s.packet___72706;
    s.tmp_0.arg1 = s.arg1;
    s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
  case 2:
    s.tmp_0 = jacdac_JDPacket_device_address__P71766_mk(s);
    s.tmp_0.arg0 = s.packet___72706;
    s.tmp_0.arg1 = s.arg3;
    s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_service_number__P71772_mk(s);
    s.tmp_0.arg0 = s.packet___72706;
    s.tmp_0.arg1 = s.arg2;
    s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_communication_rate__P71776_mk(s);
    s.tmp_0.arg0 = s.packet___72706;
    s.tmp_0.arg1 = 1;
    s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(s.arg4);
    if (!r0) { step = 3; continue; }
    s.tmp_0 = jacdac_JDPacket_communication_rate__P71776_mk(s);
    s.tmp_0.arg0 = s.packet___72706;
    r0 = s.arg4.fields["communication_rate"];
    s.tmp_0.arg1 = r0;
    s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
  case 3:
  case 4:
    s.tmp_0 = jacdac_JDPacket_crc__P71764_mk(s);
    s.tmp_0.arg0 = s.packet___72706;
    s.tmp_1 = jacdac_jd_crc__P71632_mk(s);
    s.tmp_1.arg0 = s.packet___72706;
    s.tmp_1.arg1 = s.arg4;
    s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.tmp_0 = jacdac_JACDAC_writePacket__P71742_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.packet___72706;
    s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_write__P71741.info = {"start":4996,"length":689,"line":169,"column":8,"endLine":188,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"write","argumentNames":["this","buf","service_number","device_address","device"]}

function jacdac_JACDAC_write__P71741_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_write__P71741, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  packet___72706: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function jacdac_JACDAC_writePacket__P71742(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    s.tmp_0 = if_writeBuffer_2_mk(s);
    r0 = s.arg0.fields["_bus"];
    s.tmp_0.arg0 = r0;
    r0 = s.arg1.fields["_buffer"];
    s.tmp_0.arg1 = r0;
    s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["writeBuffer"];
    if (s.tmp_0.fn == null) { s.retval = s.tmp_0.arg0.fields["writeBuffer"]; }
    else { s.pc = 1; return s.tmp_0; }
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_writePacket__P71742.info = {"start":5695,"length":90,"line":190,"column":8,"endLine":192,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"writePacket","argumentNames":["this","pkt"]}

function jacdac_JACDAC_writePacket__P71742_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_writePacket__P71742, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_getBuffer__P71777(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_getBuffer__P71777.info = {"start":2882,"length":64,"line":73,"column":8,"endLine":75,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"getBuffer","argumentNames":["this"]}

function jacdac_JDPacket_getBuffer__P71777_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_getBuffer__P71777, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_jd_crc__P71632(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.crc___72760 = undefined;
    s.udidPtr___72762 = undefined;
    s.i___72766 = undefined;
    s.j___72779 = undefined;
    s.len___72799 = undefined;
    s.idx___72806 = undefined;
    s.buf___72808 = undefined;
    s.i___72824 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.crc___72760 = (4095);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 7; continue; }
    r0 = s.arg1.fields["unique_device_identifier"];
    s.udidPtr___72762 = (r0);
    s.i___72766 = (0);
  case 1:
    r0 = (s.i___72766 < 8);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_1 = r0 = s.crc___72760;
    r0 = pxsim.BufferMethods.getUint8(s.udidPtr___72762, s.i___72766);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 << 8);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 ^ s.tmp_2);
    s.crc___72760 = (r0);
    s.j___72779 = (0);
  case 2:
    r0 = (s.j___72779 < 8);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = (s.crc___72760 & 2048);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = (s.crc___72760 << 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 ^ 3859);
    s.crc___72760 = (r0);
    { step = 4; continue; }
  case 3:
    r0 = (s.crc___72760 << 1);
    s.crc___72760 = (r0);
  case 4:
    r0 = (s.j___72779 + 1);
    s.j___72779 = (r0);
    { step = 2; continue; }
  case 5:
    r0 = (s.i___72766 + 1);
    s.i___72766 = (r0);
    { step = 1; continue; }
  case 6:
  case 7:
  case 8:
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_2, 3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 + 2);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + 2);
    s.len___72799 = (r0);
    s.idx___72806 = (2);
    r0 = s.arg0.fields["_buffer"];
    s.buf___72808 = (r0);
  case 9:
    r0 = (s.idx___72806 < s.len___72799);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    s.tmp_1 = r0 = s.crc___72760;
    r0 = pxsim.BufferMethods.getUint8(s.buf___72808, s.idx___72806);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 << 8);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 ^ s.tmp_2);
    s.crc___72760 = (r0);
    s.i___72824 = (0);
  case 10:
    r0 = (s.i___72824 < 8);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    r0 = (s.crc___72760 & 2048);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 11; continue; }
    r0 = (s.crc___72760 << 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 ^ 3859);
    s.crc___72760 = (r0);
    { step = 12; continue; }
  case 11:
    r0 = (s.crc___72760 << 1);
    s.crc___72760 = (r0);
  case 12:
    r0 = (s.i___72824 + 1);
    s.i___72824 = (r0);
    { step = 10; continue; }
  case 13:
    r0 = (s.idx___72806 + 1);
    s.idx___72806 = (r0);
    { step = 9; continue; }
  case 14:
    r0 = (s.crc___72760 & 4095);
    return leave(s, r0)
  default: oops()
} } }
jacdac_jd_crc__P71632.info = {"start":60,"length":1052,"line":3,"column":4,"endLine":38,"endColumn":5,"fileName":"pxt_modules/jacdac/crc.ts","functionName":"jd_crc","argumentNames":["pkt","device"]}

function jacdac_jd_crc__P71632_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jd_crc__P71632, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  crc___72760: undefined,
  udidPtr___72762: undefined,
  i___72766: undefined,
  j___72779: undefined,
  len___72799: undefined,
  idx___72806: undefined,
  buf___72808: undefined,
  i___72824: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_size__P71769(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_0, 3);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_size__P71769.info = {"start":1540,"length":75,"line":37,"column":8,"endLine":39,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"size","argumentNames":["this"]}

function jacdac_JDPacket_size__P71769_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_size__P71769, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_crc__P71764(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = (s.arg1 & 255);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_0, 0, s.tmp_1);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_4, 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 240);
    s.tmp_2 = r0;
    r0 = (s.arg1 & 3840);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 >> 8);
    s.tmp_5 = r0;
    r0 = (s.tmp_2 | s.tmp_5);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_0, 1, s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_crc__P71764.info = {"start":756,"length":176,"line":18,"column":8,"endLine":21,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"crc","argumentNames":["this","crc"]}

function jacdac_JDPacket_crc__P71764_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_crc__P71764, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_crc__P71763(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_1, 0);
    s.tmp_0 = r0;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_5, 1);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 15);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 << 8);
    s.tmp_2 = r0;
    r0 = (s.tmp_0 | s.tmp_2);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_crc__P71763.info = {"start":631,"length":116,"line":15,"column":8,"endLine":17,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"crc","argumentNames":["this"]}

function jacdac_JDPacket_crc__P71763_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_crc__P71763, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_communication_rate__P71776(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_0, 259, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_communication_rate__P71776.info = {"start":2703,"length":169,"line":69,"column":8,"endLine":71,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"communication_rate","argumentNames":["this","communicate_rate"]}

function jacdac_JDPacket_communication_rate__P71776_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_communication_rate__P71776, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_communication_rate__P71775(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_0, 259);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_communication_rate__P71775.info = {"start":2551,"length":142,"line":65,"column":8,"endLine":67,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"communication_rate","argumentNames":["this"]}

function jacdac_JDPacket_communication_rate__P71775_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_communication_rate__P71775, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_service_number__P71772(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_4, 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 15);
    s.tmp_2 = r0;
    r0 = (s.arg1 & 15);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 << 4);
    s.tmp_5 = r0;
    r0 = (s.tmp_2 | s.tmp_5);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_0, 1, s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_service_number__P71772.info = {"start":1827,"length":160,"line":47,"column":8,"endLine":49,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"service_number","argumentNames":["this","service_number"]}

function jacdac_JDPacket_service_number__P71772_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_service_number__P71772, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_service_number__P71771(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_2, 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 240);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 4);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_service_number__P71771.info = {"start":1719,"length":99,"line":44,"column":8,"endLine":46,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"service_number","argumentNames":["this"]}

function jacdac_JDPacket_service_number__P71771_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_service_number__P71771, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_device_address__P71766(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = (s.arg1 & 255);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_0, 2, s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_device_address__P71766.info = {"start":1036,"length":101,"line":26,"column":8,"endLine":28,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"device_address","argumentNames":["this","address"]}

function jacdac_JDPacket_device_address__P71766_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_device_address__P71766, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_device_address__P71765(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_0, 2);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_device_address__P71765.info = {"start":942,"length":85,"line":23,"column":8,"endLine":25,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"device_address","argumentNames":["this"]}

function jacdac_JDPacket_device_address__P71765_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_device_address__P71765, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDDevice_udid__P71797(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDevice__C71792_VT)) failedCast(r0);
    r0 = s.arg0.fields["unique_device_identifier"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDevice_udid__P71797.info = {"start":9160,"length":72,"line":256,"column":8,"endLine":258,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"udid","argumentNames":["this"]}

function jacdac_JDDevice_udid__P71797_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDevice_udid__P71797, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function helpers_bufferConcat__P71232(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.r___72954 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 + s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.r___72954 = (r0);
    r0 = pxsim.BufferMethods.write(s.r___72954, 0, s.arg0);
    s.tmp_0 = r0 = s.r___72954;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, s.tmp_1, s.arg1);
    r0 = s.r___72954;
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferConcat__P71232.info = {"start":7249,"length":186,"line":234,"column":4,"endLine":239,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"bufferConcat","argumentNames":["a","b"]}

function helpers_bufferConcat__P71232_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferConcat__P71232, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  r___72954: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_data__P71774(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.i___72980 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDPacket_size__P71770_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_0.arg1 = r0;
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.i___72980 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___72980;
    s.tmp_3 = Math_min__P71170_mk(s);
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_3.arg0 = r0;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_5);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - 1);
    s.tmp_3.arg1 = r0;
    s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.arg0.fields["_buffer"];
    s.tmp_6 = r0;
    r0 = (4 + s.i___72980);
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.arg1, s.i___72980);
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_6, s.tmp_7, s.tmp_8);
    r0 = (s.i___72980 + 1);
    s.i___72980 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_data__P71774.info = {"start":2304,"length":237,"line":58,"column":8,"endLine":63,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"data","argumentNames":["this","buf"]}

function jacdac_JDPacket_data__P71774_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_data__P71774, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  i___72980: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function Math_min__P71170(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 <= s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = s.arg1;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
Math_min__P71170.info = {"start":11419,"length":105,"line":397,"column":4,"endLine":400,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"min","argumentNames":["a","b"]}

function Math_min__P71170_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Math_min__P71170, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_size__P71770(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = (s.arg1 & 255);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_0, 3, s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_size__P71770.info = {"start":1624,"length":85,"line":40,"column":8,"endLine":42,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"size","argumentNames":["this","size"]}

function jacdac_JDPacket_size__P71770_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_size__P71770, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_data__P71773(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_2, 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != 255);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_buffer"];
    s.tmp_3 = r0;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_5, 3);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_3, 4, s.tmp_4);
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = s.arg0.fields["_buffer"];
    s.tmp_6 = r0;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_9 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_9, 3);
    s.tmp_8 = r0;
    r0 = (s.tmp_8 - 8);
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_6, 12, s.tmp_7);
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_data__P71773.info = {"start":1997,"length":297,"line":51,"column":8,"endLine":56,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"data","argumentNames":["this"]}

function jacdac_JDPacket_data__P71773_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_data__P71773, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_constructor__P71779(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 3; continue; }
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != 260);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = jacdac_options_error__P71813_mk(s);
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat("Buffer packet size mismatch. Buffer size: ", s.tmp_7);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, " expected size: ");
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_3 = r0;
    if ((260) && (260).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(260);
    checkResumeConsumed();
    return;
    } else { s.retval = (260) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_9);
    s.tmp_2.arg0 = r0;
    s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = (s.arg0).fields["_buffer"] = (s.arg1);
    { step = 4; continue; }
  case 3:
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.createBuffer(260);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_buffer"] = (s.tmp_1);
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_constructor__P71779.info = {"start":107,"length":514,"line":4,"column":8,"endLine":13,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"inline","argumentNames":["this","buf"]}

function jacdac_JDPacket_constructor__P71779_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_constructor__P71779, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_options_createBuffer__P71812(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.createBuffer(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_options_createBuffer__P71812.info = {"start":239,"length":94,"line":11,"column":4,"endLine":13,"endColumn":5,"fileName":"pxt_modules/jacdac/makecodeoptions.ts","functionName":"createBuffer","argumentNames":["size"]}

function jacdac_options_createBuffer__P71812_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_options_createBuffer__P71812, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_options_error__P71813(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P71325_mk(s);
    s.tmp_0.arg0 = 3;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(":jd> ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_options_error__P71813.info = {"start":339,"length":110,"line":15,"column":4,"endLine":17,"endColumn":5,"fileName":"pxt_modules/jacdac/makecodeoptions.ts","functionName":"error","argumentNames":["message"]}

function jacdac_options_error__P71813_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_options_error__P71813, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JACDAC_instance__P71740(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.tmp_0 = r0 = globals.jacdac_JACDAC__instance___71743;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JACDAC__C71718_VT);
    s.tmp_1 = r0;
    s.tmp_2 = jacdac_JACDAC_constructor__P71744_mk(s);
    s.tmp_2.arg0 = s.tmp_1;
    s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    globals.jacdac_JACDAC__instance___71743 = (s.tmp_1);
    r0 = s.tmp_1;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_instance__P71740.info = {"start":4876,"length":110,"line":165,"column":8,"endLine":167,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"instance","argumentNames":[]}

function jacdac_JACDAC_instance__P71740_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_instance__P71740, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
} }





function jacdac_JACDAC_constructor__P71744(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDDummyBus__C71715_VT);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_bus"] = (s.tmp_1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_services"] = (s.tmp_1);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDControlService__C71601_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDControlService_constructor__P71618_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    r0 = (s.arg0).fields["_controlService"] = (s.tmp_0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_constructor__P71744.info = {"start":1513,"length":167,"line":64,"column":8,"endLine":68,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_JACDAC_constructor__P71744_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_constructor__P71744, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDControlService_constructor__P71618(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDService_constructor__P71494_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 0;
    s.tmp_0.arg2 = 4;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDDeviceManager__C71702_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDDeviceManager_constructor__P71709_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    r0 = (s.arg0).fields["deviceManager"] = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDRNGService__C71758_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDRNGService_constructor__P71761_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    r0 = (s.arg0).fields["rngService"] = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDConfigurationService__C71503_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDConfigurationService_constructor__P71509_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    r0 = (s.arg0).fields["configurationService"] = (s.tmp_0);
    r0 = (s.arg0).fields["nextAddress"] = (254);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_constructor__P71618.info = {"start":8890,"length":340,"line":228,"column":8,"endLine":234,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_JDControlService_constructor__P71618_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_constructor__P71618, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDConfigurationService_constructor__P71509(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConfigurationService__C71503_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDService_constructor__P71494_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 2;
    s.tmp_0.arg2 = 4;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = (s.arg0).fields["service_number"] = (1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConfigurationService_constructor__P71509.info = {"start":589,"length":192,"line":20,"column":8,"endLine":23,"endColumn":9,"fileName":"pxt_modules/jacdac/configurationservice.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_JDConfigurationService_constructor__P71509_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConfigurationService_constructor__P71509, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDRNGService_constructor__P71761(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDRNGService__C71758_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDService_constructor__P71494_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 1;
    s.tmp_0.arg2 = 4;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = (s.arg0).fields["service_number"] = (2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDRNGService_constructor__P71761.info = {"start":411,"length":172,"line":14,"column":8,"endLine":17,"endColumn":9,"fileName":"pxt_modules/jacdac/rngservice.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_JDRNGService_constructor__P71761_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDRNGService_constructor__P71761, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDDeviceManager_constructor__P71709(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDeviceManager__C71702_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["devices"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDeviceManager_constructor__P71709.info = {"start":92,"length":56,"line":4,"column":8,"endLine":6,"endColumn":9,"fileName":"pxt_modules/jacdac/devicemanager.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_JDDeviceManager_constructor__P71709_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDeviceManager_constructor__P71709, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JACDAC_bus__P71719(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    r0 = s.arg0.fields["_bus"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_bus__P71719.info = {"start":676,"length":51,"line":28,"column":8,"endLine":30,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"bus","argumentNames":["this"]}

function jacdac_JACDAC_bus__P71719_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_bus__P71719, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Service_start__P71923(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Service__C71912_VT)) failedCast(r0);
    s.tmp_0 = jacdac_start__P71829_mk(s);
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.tmp_1 = jacdac_JACDAC_add__P71737_mk(s);
    s.tmp_2 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.arg0;
    s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = jacdac_Service_log__P71921_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = "start";
    s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Service_start__P71923.info = {"start":2082,"length":148,"line":69,"column":8,"endLine":74,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"start","argumentNames":["this"]}

function jacdac_Service_start__P71923_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Service_start__P71923, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_Service_log__P71921(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.dev___73177 = undefined;
    s.d___73182 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Service__C71912_VT)) failedCast(r0);
    r0 = s.arg0.fields["supressLog"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (globals.consolePriority___71843 < globals.minPriority___71322);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 7; continue; }
    s.tmp_4 = jacdac_JACDAC_getDeviceName__P71732_mk(s);
    s.tmp_5 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 10; return s.tmp_5;
  case 10:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.pc = 9; return s.tmp_4;
  case 9:
    r0 = s.retval;
    s.dev___73177 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.dev___73177);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.arg0.fields["device"];
    s.d___73182 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.d___73182);
    if (!r0) { step = 3; continue; }
    s.tmp_0 = jacdac_toHex8__P71846_mk(s);
    r0 = s.d___73182.fields["device_address"];
    s.tmp_0.arg0 = r0;
    s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
    r0 = "--";
  case 4:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.dev___73177 = (s.tmp_1);
  case 5:
  case 6:
    s.tmp_0 = console_add__P71325_mk(s);
    s.tmp_0.arg0 = globals.consolePriority___71843;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_7 = r0;
    if ((s.dev___73177) && (s.dev___73177).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.dev___73177);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.dev___73177) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_8);
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_6, ":");
    s.tmp_5 = r0;
    s.tmp_11 = jacdac_toHex8__P71846_mk(s);
    s.tmp_12 = jacdac_Service_serviceNumber__P71915_mk(s);
    s.tmp_12.arg0 = s.arg0;
    s.pc = 15; return s.tmp_12;
  case 15:
    r0 = s.retval;
    s.tmp_11.arg0 = r0;
    s.pc = 14; return s.tmp_11;
  case 14:
    r0 = s.retval;
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_9);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, ">");
    s.tmp_3 = r0;
    r0 = s.arg0.fields["name"];
    s.tmp_14 = r0;
    if ((s.tmp_14) && (s.tmp_14).vtable) {
    setupResume(s, 17);
    pxsim_String__stringConv(s.tmp_14);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_14) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_13);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ">");
    s.tmp_1 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_15 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_15);
    s.tmp_0.arg1 = r0;
    s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
  case 7:
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Service_log__P71921.info = {"start":1328,"length":469,"line":48,"column":8,"endLine":57,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"log","argumentNames":["this","text"]}

function jacdac_Service_log__P71921_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Service_log__P71921, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  dev___73177: undefined,
  d___73182: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Service_serviceNumber__P71915(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Service__C71912_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Service__C71912_v4_1_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Service__C71912_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.start;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = s.arg0.fields["service_number"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_Service_serviceNumber__P71915.info = {"start":676,"length":105,"line":21,"column":8,"endLine":24,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"serviceNumber","argumentNames":["this"]}

function jacdac_Service_serviceNumber__P71915_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Service_serviceNumber__P71915, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_toHex8__P71846(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.hexBuf___73218 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.createBuffer(1);
    s.hexBuf___73218 = (r0);
    r0 = pxsim.BufferMethods.setNumber(s.hexBuf___73218, 2, 0, s.arg0);
    r0 = pxsim.BufferMethods.toHex(s.hexBuf___73218);
    return leave(s, r0)
  default: oops()
} } }
jacdac_toHex8__P71846.info = {"start":504,"length":182,"line":14,"column":4,"endLine":18,"endColumn":5,"fileName":"pxt_modules/jacdac/config.ts","functionName":"toHex8","argumentNames":["n"]}

function jacdac_toHex8__P71846_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_toHex8__P71846, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  hexBuf___73218: undefined,
  arg0: undefined,
} }





function jacdac_JACDAC_getDeviceName__P71732(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    r0 = s.arg0.fields["_controlService"];
    s.tmp_0 = r0;
    r0 = s.tmp_0.fields["name"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_getDeviceName__P71732.info = {"start":2623,"length":92,"line":104,"column":8,"endLine":106,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"getDeviceName","argumentNames":["this"]}

function jacdac_JACDAC_getDeviceName__P71732_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_getDeviceName__P71732, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDControlService_getDeviceName__P71617(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    r0 = s.arg0.fields["name"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_getDeviceName__P71617.info = {"start":22809,"length":74,"line":489,"column":8,"endLine":492,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"getDeviceName","argumentNames":["this"]}

function jacdac_JDControlService_getDeviceName__P71617_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_getDeviceName__P71617, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JACDAC_add__P71737(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.s___73243 = undefined;
    s.unnamed120___U1 = undefined;
    s.unnamed121___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    s.s___73243 = (undefined);
    r0 = s.arg0.fields["_services"];
    s.unnamed120___U1 = (r0);
    s.unnamed121___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed121___U2;
    r0 = pxsim_Array__length(s.unnamed120___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed120___U1, s.unnamed121___U2);
    s.s___73243 = (r0);
    r0 = (s.s___73243 == s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    r0 = false;
    { step = 9; continue; }
  case 2:
  case 3:
    r0 = (s.unnamed121___U2 + 1);
    s.unnamed121___U2 = (r0);
    { step = 1; continue; }
  case 4:
    s.unnamed120___U1 = (undefined);
    r0 = s.arg0.fields["_services"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_3, s.arg1);
    s.tmp_0 = jacdac_options_log__P71814_mk(s);
    r0 = s.arg1.fields["_service_class"];
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat("added service cls:", s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, ", md:");
    s.tmp_4 = r0;
    r0 = s.arg1.fields["_mode"];
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_8);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, " (");
    s.tmp_2 = r0;
    r0 = s.arg0.fields["_services"];
    s.tmp_12 = r0;
    r0 = pxsim_Array__length(s.tmp_12);
    s.tmp_11 = r0;
    if ((s.tmp_11) && (s.tmp_11).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.tmp_11);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_11) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_10);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, " services)");
    s.tmp_0.arg0 = r0;
    s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    r0 = s.arg1.fields["_mode"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 5:
    r0 = s.arg1.fields["_mode"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == 3);
  case 6:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 7; continue; }
    s.tmp_4 = jacdac_JDControlService_enumerate__P71609_mk(s);
    r0 = s.arg0.fields["_controlService"];
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = undefined;
    s.pc = 14; return s.tmp_4;
  case 14:
    r0 = s.retval;
  case 7:
  case 8:
    r0 = true;
  case 9:
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_add__P71737.info = {"start":3301,"length":609,"line":124,"column":8,"endLine":138,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"add","argumentNames":["this","service"]}

function jacdac_JACDAC_add__P71737_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_add__P71737, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  s___73243: undefined,
  unnamed120___U1: undefined,
  unnamed121___U2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDControlService_enumerate__P71609(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.hostServiceCount___73298 = undefined;
    s.s___73300 = undefined;
    s.unnamed110___U2 = undefined;
    s.unnamed111___U3 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    r0 = s.arg0.fields["status"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = jacdac_options_log__P71814_mk(s);
    s.tmp_2.arg0 = "already enumerating";
    s.pc = 13; return s.tmp_2;
  case 13:
    r0 = s.retval;
    { step = 12; continue; }
  case 1:
  case 2:
    s.tmp_0 = jacdac_JDControlService_initialise__P71608_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    s.hostServiceCount___73298 = (0);
    s.s___73300 = (undefined);
    s.tmp_0 = jacdac_JACDAC_services__P71721_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 16; return s.tmp_1;
  case 16:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    s.unnamed110___U2 = (r0);
    s.unnamed111___U3 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed111___U3;
    r0 = pxsim_Array__length(s.unnamed110___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_Array__getAt(s.unnamed110___U2, s.unnamed111___U3);
    s.s___73300 = (r0);
    r0 = s.s___73300.fields["_mode"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 1);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 4:
    r0 = s.s___73300.fields["_mode"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == 4);
  case 5:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 6; continue; }
    { step = 8; continue; }
  case 6:
  case 7:
    r0 = (s.hostServiceCount___73298 + 1);
    s.hostServiceCount___73298 = (r0);
  case 8:
    r0 = (s.unnamed111___U3 + 1);
    s.unnamed111___U3 = (r0);
    { step = 3; continue; }
  case 9:
    s.unnamed110___U2 = (undefined);
    r0 = pxsim_numops_toBoolDecr(s.hostServiceCount___73298);
    if (!r0) { step = 10; continue; }
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["status"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["status"] = (s.tmp_1);
    s.tmp_0 = jacdac_JDControlService_startDeviceTimer__P71607_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
  case 10:
  case 11:
  case 12:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_enumerate__P71609.info = {"start":7392,"length":791,"line":176,"column":8,"endLine":201,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"enumerate","argumentNames":["this","device_address"]}

function jacdac_JDControlService_enumerate__P71609_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_enumerate__P71609, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  hostServiceCount___73298: undefined,
  s___73300: undefined,
  unnamed110___U2: undefined,
  unnamed111___U3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDControlService_startDeviceTimer__P71607(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    r0 = s.arg0.fields["_intervalId"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = jacdac_options_error__P71813_mk(s);
    s.tmp_2.arg0 = "Device Timer called twice.";
    s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    s.tmp_0 = jacdac_options_log__P71814_mk(s);
    s.tmp_0.arg0 = "start device timer";
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, inline__P73335);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = setInterval__P71388_mk(s);
    s.tmp_3.arg0 = s.tmp_0;
    s.tmp_3.arg1 = 500;
    s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["_intervalId"] = (s.tmp_2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_startDeviceTimer__P71607.info = {"start":3626,"length":2526,"line":94,"column":8,"endLine":149,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"startDeviceTimer","argumentNames":["this"]}

function jacdac_JDControlService_startDeviceTimer__P71607_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_startDeviceTimer__P71607, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function inline__P73335(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.dev___73415 = undefined;
    s.unnamed108___U1 = undefined;
    s.unnamed109___U2 = undefined;
    s.tmp_0 = jacdac_options_log__P71814_mk(s);
    s.tmp_0.arg0 = "control tick";
    s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    r0 = s.caps[0].fields["status"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    r0 = s.caps[0].fields["status"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 4);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = s.caps[0].fields["device"];
    s.tmp_4 = r0;
    r0 = s.tmp_4.fields["rolling_counter"];
    s.tmp_6 = r0;
    r0 = (s.tmp_6 + 1);
    s.tmp_5 = r0;
    r0 = (s.tmp_4).fields["rolling_counter"] = (s.tmp_5);
    r0 = s.caps[0].fields["device"];
    r0 = r0.fields["rolling_counter"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = r0 = s.caps[0];
    r0 = s.tmp_2.fields["status"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & -5);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["status"] = (s.tmp_3);
    s.tmp_0 = r0 = s.caps[0];
    r0 = s.tmp_0.fields["status"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 8);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["status"] = (s.tmp_1);
    r0 = s.caps[0].fields["device"];
    s.tmp_0 = r0;
    r0 = s.tmp_0.fields["device_flags"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & -3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["device_flags"] = (s.tmp_1);
    s.tmp_0 = jacdac_JDControlService_deviceEnumerated__P71605_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
  case 1:
  case 2:
    { step = 10; continue; }
  case 3:
    s.tmp_3 = if_isConnected_1_mk(s);
    s.tmp_5 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 21; return s.tmp_5;
  case 21:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = s.tmp_4.fields["_bus"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["isConnected"];
    if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["isConnected"]; }
    else { s.pc = 20; return s.tmp_3; }
  case 20:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = s.caps[0].fields["device"];
    s.tmp_6 = r0;
    r0 = s.tmp_6.fields["rolling_counter"];
    s.tmp_8 = r0;
    r0 = (s.tmp_8 + 1);
    s.tmp_7 = r0;
    r0 = (s.tmp_6).fields["rolling_counter"] = (s.tmp_7);
    r0 = s.caps[0].fields["device"];
    r0 = r0.fields["rolling_counter"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_2 = r0 = s.caps[0];
    r0 = s.tmp_2.fields["status"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 | 16);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["status"] = (s.tmp_3);
    s.tmp_0 = jacdac_options_log__P71814_mk(s);
    s.tmp_0.arg0 = "This disconnected";
    s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDControlService_deviceDisconnected__P71604_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    r0 = s.caps[0].fields["device"];
    s.tmp_0.arg1 = r0;
    s.pc = 23; return s.tmp_0;
  case 23:
    r0 = s.retval;
    { step = 17; continue; }
  case 4:
  case 5:
    { step = 9; continue; }
  case 6:
    r0 = s.caps[0].fields["status"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 16);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_2 = jacdac_JDControlService_deviceEnumerated__P71605_mk(s);
    s.tmp_2.arg0 = s.caps[0];
    s.pc = 24; return s.tmp_2;
  case 24:
    r0 = s.retval;
    s.tmp_0 = r0 = s.caps[0];
    r0 = s.tmp_0.fields["status"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & -17);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["status"] = (s.tmp_1);
  case 7:
  case 8:
    r0 = s.caps[0].fields["device"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["rolling_counter"] = (0);
  case 9:
  case 10:
    s.tmp_0 = jacdac_JDControlService__C71601_v3_2_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_1 = jacdac_JDControlPacket_getBuffer__P71781_mk(s);
    s.tmp_2 = jacdac_JDControlService_formControlPacket__P71606_mk(s);
    s.tmp_2.arg0 = s.caps[0];
    s.pc = 27; return s.tmp_2;
  case 27:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.pc = 26; return s.tmp_1;
  case 26:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_JDControlService__C71601_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.send;
    s.pc = 25; return s.tmp_0;
  case 25:
    r0 = s.retval;
  case 11:
  case 12:
    s.dev___73415 = (undefined);
    s.tmp_0 = jacdac_JDDeviceManager_getDeviceList__P71703_mk(s);
    r0 = s.caps[0].fields["deviceManager"];
    s.tmp_0.arg0 = r0;
    s.pc = 28; return s.tmp_0;
  case 28:
    r0 = s.retval;
    s.unnamed108___U1 = (r0);
    s.unnamed109___U2 = (0);
  case 13:
    s.tmp_0 = r0 = s.unnamed109___U2;
    r0 = pxsim_Array__length(s.unnamed108___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 16; continue; }
    r0 = pxsim_Array__getAt(s.unnamed108___U1, s.unnamed109___U2);
    s.dev___73415 = (r0);
    s.tmp_2 = r0 = s.dev___73415;
    r0 = s.tmp_2.fields["rolling_counter"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["rolling_counter"] = (s.tmp_3);
    r0 = s.dev___73415.fields["rolling_counter"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    s.tmp_2 = jacdac_JDDeviceManager_removeDevice__P71708_mk(s);
    r0 = s.caps[0].fields["deviceManager"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.dev___73415;
    s.pc = 29; return s.tmp_2;
  case 29:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDControlService_deviceDisconnected__P71604_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = s.dev___73415;
    s.pc = 30; return s.tmp_0;
  case 30:
    r0 = s.retval;
  case 14:
  case 15:
    r0 = (s.unnamed109___U2 + 1);
    s.unnamed109___U2 = (r0);
    { step = 13; continue; }
  case 16:
    s.unnamed108___U1 = (undefined);
  case 17:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
inline__P73335.info = {"start":3861,"length":2274,"line":100,"column":43,"endLine":148,"endColumn":13,"fileName":"pxt_modules/jacdac/control.ts","functionName":"inline","argumentNames":[]}

function inline__P73335_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P73335, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  dev___73415: undefined,
  unnamed108___U1: undefined,
  unnamed109___U2: undefined,
} }





function jacdac_JDDeviceManager_removeDevice__P71708(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDeviceManager__C71702_VT)) failedCast(r0);
    r0 = pxsim_pxtcore_mkAction(1, inline__P73441);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg1);
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = helpers_arrayFilter__P71156_mk(s);
    r0 = s.arg0.fields["devices"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.tmp_0;
    s.pc = 1; return s.tmp_3;
  case 1:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["devices"] = (s.tmp_2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDeviceManager_removeDevice__P71708.info = {"start":1341,"length":210,"line":40,"column":8,"endLine":42,"endColumn":9,"fileName":"pxt_modules/jacdac/devicemanager.ts","functionName":"removeDevice","argumentNames":["this","device"]}

function jacdac_JDDeviceManager_removeDevice__P71708_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDeviceManager_removeDevice__P71708, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function inline__P73441(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["device_address"];
    s.tmp_1 = r0;
    r0 = s.caps[0].fields["device_address"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.caps[0].fields["unique_device_identifier"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_4, 11, 0);
    s.tmp_3 = r0;
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_6, 11, 0);
    s.tmp_5 = r0;
    r0 = (s.tmp_3 == s.tmp_5);
  case 2:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBool(s.tmp_7);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_7;
    { step = 4; continue; }
  case 3:
    r0 = s.caps[0].fields["unique_device_identifier"];
    s.tmp_9 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_9, 11, 4);
    s.tmp_8 = r0;
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_11 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_11, 11, 4);
    s.tmp_10 = r0;
    r0 = (s.tmp_8 == s.tmp_10);
  case 4:
    // jmp value (already in r0)
    s.tmp_12 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_12);
    s.tmp_13 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_13);
    return leave(s, r0)
  default: oops()
} } }
inline__P73441.info = {"start":1427,"length":113,"line":41,"column":47,"endLine":41,"endColumn":160,"fileName":"pxt_modules/jacdac/devicemanager.ts","functionName":"inline","argumentNames":["dev"]}

function inline__P73441_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P73441, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  arg0: undefined,
} }





function jacdac_JDDevice_udidh__P71795(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDevice__C71792_VT)) failedCast(r0);
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 11, 4);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDevice_udidh__P71795.info = {"start":8922,"length":109,"line":248,"column":8,"endLine":250,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"udidh","argumentNames":["this"]}

function jacdac_JDDevice_udidh__P71795_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDevice_udidh__P71795, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDDevice_udidl__P71796(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDevice__C71792_VT)) failedCast(r0);
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 11, 0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDevice_udidl__P71796.info = {"start":9041,"length":109,"line":252,"column":8,"endLine":254,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"udidl","argumentNames":["this"]}

function jacdac_JDDevice_udidl__P71796_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDevice_udidl__P71796, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function helpers_arrayFilter__P71156(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.res___73478 = undefined;
    s.len___73480 = undefined;
    s.i___73483 = undefined;
    s.v___73488 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.res___73478 = (r0);
    r0 = pxsim_Array__length(s.arg0);
    s.len___73480 = (r0);
    s.i___73483 = (0);
  case 1:
    r0 = (s.i___73483 < s.len___73480);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.arg0, s.i___73483);
    s.v___73488 = (r0);
    s.tmp_1 = lambda_3_mk(s);
    s.tmp_1.argL = s.arg1;
    s.tmp_1.arg0 = s.v___73488;
    s.tmp_1.arg1 = s.i___73483;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__push(s.res___73478, s.v___73488);
  case 2:
  case 3:
    r0 = (s.i___73483 + 1);
    s.i___73483 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = s.res___73478;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayFilter__P71156.info = {"start":5837,"length":317,"line":201,"column":4,"endLine":209,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayFilter","argumentNames":["arr","callbackfn"]}

function helpers_arrayFilter__P71156_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayFilter__P71156, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  res___73478: undefined,
  len___73480: undefined,
  i___73483: undefined,
  v___73488: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDDeviceManager_getDeviceList__P71703(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDeviceManager__C71702_VT)) failedCast(r0);
    s.tmp_0 = helpers_arraySlice__P71160_mk(s);
    r0 = s.arg0.fields["devices"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = 0;
    s.tmp_0.arg2 = undefined;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDeviceManager_getDeviceList__P71703.info = {"start":158,"length":81,"line":8,"column":8,"endLine":10,"endColumn":9,"fileName":"pxt_modules/jacdac/devicemanager.ts","functionName":"getDeviceList","argumentNames":["this"]}

function jacdac_JDDeviceManager_getDeviceList__P71703_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDeviceManager_getDeviceList__P71703, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDControlService_formControlPacket__P71606(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.controlPacket___73508 = undefined;
    s.service_number___73534 = undefined;
    s.current___73536 = undefined;
    s.unnamed106___U3 = undefined;
    s.unnamed107___U4 = undefined;
    s.info___73561 = undefined;
    s.data___73575 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDControlPacket__C71780_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDControlPacket_constructor__P71788_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = undefined;
    s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
    s.controlPacket___73508 = (s.tmp_0);
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["unique_device_identifier"];
    s.tmp_0 = r0;
    r0 = (s.controlPacket___73508).fields["unique_device_identifier"] = (s.tmp_0);
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_0 = r0;
    r0 = (s.controlPacket___73508).fields["device_address"] = (s.tmp_0);
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_flags"];
    s.tmp_0 = r0;
    r0 = (s.controlPacket___73508).fields["device_flags"] = (s.tmp_0);
    s.tmp_0 = jacdac_JDControlPacket_device_name__P71786_mk(s);
    s.tmp_0.arg0 = s.controlPacket___73508;
    r0 = s.arg0.fields["name"];
    s.tmp_0.arg1 = r0;
    s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    s.service_number___73534 = (0);
    s.current___73536 = (undefined);
    s.tmp_0 = jacdac_JACDAC_services__P71721_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 17; return s.tmp_1;
  case 17:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    s.unnamed106___U3 = (r0);
    s.unnamed107___U4 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed107___U4;
    r0 = pxsim_Array__length(s.unnamed106___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 11; continue; }
    r0 = pxsim_Array__getAt(s.unnamed106___U3, s.unnamed107___U4);
    s.current___73536 = (r0);
    r0 = s.current___73536.fields["_mode"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 4);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 3; continue; }
  case 2:
    r0 = s.current___73536.fields["_mode"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == 1);
  case 3:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 4; continue; }
    { step = 10; continue; }
  case 4:
  case 5:
    r0 = s.current___73536.fields["service_number"];
    s.tmp_7 = r0;
    r0 = (s.tmp_7 != 65535);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_6;
    { step = 7; continue; }
  case 6:
    r0 = s.current___73536.fields["service_number"];
    s.tmp_8 = r0;
    r0 = (s.tmp_8 != s.service_number___73534);
  case 7:
    // jmp value (already in r0)
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    if (!r0) { step = 8; continue; }
    s.tmp_10 = jacdac_options_error__P71813_mk(s);
    s.tmp_10.arg0 = "Device service order changed whilst enumerated";
    s.pc = 18; return s.tmp_10;
  case 18:
    r0 = s.retval;
  case 8:
  case 9:
    r0 = (s.current___73536).fields["service_number"] = (s.service_number___73534);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDServiceInformation__C71800_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDServiceInformation_constructor__P71802_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = undefined;
    s.pc = 19; return s.tmp_1;
  case 19:
    r0 = s.retval;
    s.info___73561 = (s.tmp_0);
    r0 = s.current___73536.fields["service_flags"];
    s.tmp_0 = r0;
    r0 = (s.info___73561).fields["service_flags"] = (s.tmp_0);
    s.tmp_0 = r0 = s.info___73561;
    r0 = s.current___73536.fields["_service_class"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["service_class"] = (s.tmp_1);
    s.tmp_0 = jacdac_JDService__C71484_v0_1_mk(s);
    s.tmp_0.arg0 = s.current___73536;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_JDService__C71484_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.addAdvertisementData;
    s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    s.data___73575 = (r0);
    s.tmp_0 = r0 = s.info___73561;
    r0 = pxsim.BufferMethods.length(s.data___73575);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["advertisement_size"] = (s.tmp_1);
    r0 = (s.info___73561).fields["data"] = (s.data___73575);
    s.tmp_0 = jacdac_JDControlPacket_append__P71787_mk(s);
    s.tmp_0.arg0 = s.controlPacket___73508;
    s.tmp_1 = jacdac_JDServiceInformation_getBuffer__P71801_mk(s);
    s.tmp_1.arg0 = s.info___73561;
    s.pc = 22; return s.tmp_1;
  case 22:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    r0 = (s.service_number___73534 + 1);
    s.service_number___73534 = (r0);
  case 10:
    r0 = (s.unnamed107___U4 + 1);
    s.unnamed107___U4 = (r0);
    { step = 1; continue; }
  case 11:
    s.unnamed106___U3 = (undefined);
    s.tmp_3 = jacdac_JDControlPacket_getBuffer__P71781_mk(s);
    s.tmp_3.arg0 = s.controlPacket___73508;
    s.pc = 23; return s.tmp_3;
  case 23:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 255);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
    s.tmp_4 = jacdac_options_error__P71813_mk(s);
    s.tmp_4.arg0 = "Packet too big";
    s.pc = 24; return s.tmp_4;
  case 24:
    r0 = s.retval;
  case 12:
  case 13:
    r0 = s.controlPacket___73508;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_formControlPacket__P71606.info = {"start":2040,"length":1512,"line":53,"column":8,"endLine":89,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"formControlPacket","argumentNames":["this"]}

function jacdac_JDControlService_formControlPacket__P71606_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_formControlPacket__P71606, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  controlPacket___73508: undefined,
  service_number___73534: undefined,
  current___73536: undefined,
  unnamed106___U3: undefined,
  unnamed107___U4: undefined,
  info___73561: undefined,
  data___73575: undefined,
  arg0: undefined,
} }





function jacdac_JDServiceInformation_getBuffer__P71801(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.header___73602 = undefined;
    s.idx___73609 = undefined;
    s.i___73647 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDServiceInformation__C71800_VT)) failedCast(r0);
    r0 = s.arg0.fields["data"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (6 + s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.header___73602 = (r0);
    s.idx___73609 = (0);
  case 1:
    r0 = (s.idx___73609 < 4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = r0 = s.header___73602;
    s.tmp_2 = r0 = s.idx___73609;
    r0 = s.arg0.fields["service_class"];
    s.tmp_5 = r0;
    r0 = (s.idx___73609 * 8);
    s.tmp_7 = r0;
    r0 = (255 << s.tmp_7);
    s.tmp_6 = r0;
    r0 = (s.tmp_5 & s.tmp_6);
    s.tmp_4 = r0;
    r0 = (s.idx___73609 * 8);
    s.tmp_8 = r0;
    r0 = (s.tmp_4 >> s.tmp_8);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_1, s.tmp_2, s.tmp_3);
    r0 = (s.idx___73609 + 1);
    s.idx___73609 = (r0);
    { step = 1; continue; }
  case 2:
    s.tmp_0 = r0 = s.idx___73609;
    r0 = (s.tmp_0 + 1);
    s.idx___73609 = (r0);
    s.tmp_1 = r0 = s.header___73602;
    r0 = s.arg0.fields["service_flags"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 255);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_1, s.tmp_0, s.tmp_2);
    s.tmp_0 = r0 = s.idx___73609;
    r0 = (s.tmp_0 + 1);
    s.idx___73609 = (r0);
    s.tmp_1 = r0 = s.header___73602;
    r0 = s.arg0.fields["advertisement_size"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 255);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_1, s.tmp_0, s.tmp_2);
    s.i___73647 = (0);
  case 3:
    s.tmp_1 = r0 = s.i___73647;
    r0 = s.arg0.fields["data"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_4 = r0 = s.idx___73609;
    r0 = (s.tmp_4 + 1);
    s.idx___73609 = (r0);
    s.tmp_5 = r0 = s.header___73602;
    r0 = s.arg0.fields["data"];
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_7, s.i___73647);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_5, s.tmp_4, s.tmp_6);
    r0 = (s.i___73647 + 1);
    s.i___73647 = (r0);
    { step = 3; continue; }
  case 4:
    r0 = s.header___73602;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDServiceInformation_getBuffer__P71801.info = {"start":10291,"length":573,"line":291,"column":8,"endLine":307,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"getBuffer","argumentNames":["this"]}

function jacdac_JDServiceInformation_getBuffer__P71801_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDServiceInformation_getBuffer__P71801, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  header___73602: undefined,
  idx___73609: undefined,
  i___73647: undefined,
  arg0: undefined,
} }





function jacdac_JDControlPacket_append__P71787(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.newBuf___73669 = undefined;
    s.idx___73678 = undefined;
    s.i___73679 = undefined;
    s.i___73698 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlPacket__C71780_VT)) failedCast(r0);
    r0 = s.arg0.fields["data"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_3 = r0;
    r0 = (s.tmp_1 + s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.newBuf___73669 = (r0);
    s.idx___73678 = (0);
    s.i___73679 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___73679;
    r0 = s.arg0.fields["data"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_4 = r0 = s.idx___73678;
    r0 = (s.tmp_4 + 1);
    s.idx___73678 = (r0);
    s.tmp_5 = r0 = s.newBuf___73669;
    r0 = s.arg0.fields["data"];
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_7, s.i___73679);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_5, s.tmp_4, s.tmp_6);
    r0 = (s.i___73679 + 1);
    s.i___73679 = (r0);
    { step = 1; continue; }
  case 2:
    s.i___73698 = (0);
  case 3:
    s.tmp_1 = r0 = s.i___73698;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_3 = r0 = s.idx___73678;
    r0 = (s.tmp_3 + 1);
    s.idx___73678 = (r0);
    s.tmp_4 = r0 = s.newBuf___73669;
    r0 = pxsim.BufferMethods.getUint8(s.arg1, s.i___73698);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_4, s.tmp_3, s.tmp_5);
    r0 = (s.i___73698 + 1);
    s.i___73698 = (r0);
    { step = 3; continue; }
  case 4:
    r0 = (s.arg0).fields["data"] = (s.newBuf___73669);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlPacket_append__P71787.info = {"start":6293,"length":412,"line":173,"column":8,"endLine":184,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"append","argumentNames":["this","buffer"]}

function jacdac_JDControlPacket_append__P71787_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlPacket_append__P71787, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  newBuf___73669: undefined,
  idx___73678: undefined,
  i___73679: undefined,
  i___73698: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDService_addAdvertisementData__P71487(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDService__C71484_VT)) failedCast(r0);
    r0 = pxsim.control.createBuffer(0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDService_addAdvertisementData__P71487.info = {"start":1249,"length":93,"line":51,"column":8,"endLine":53,"endColumn":9,"fileName":"pxt_modules/jacdac/service.ts","functionName":"addAdvertisementData","argumentNames":["this"]}

function jacdac_JDService_addAdvertisementData__P71487_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDService_addAdvertisementData__P71487, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JDServiceInformation_constructor__P71802(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.idx___73723 = undefined;
    s.i___73724 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDServiceInformation__C71800_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 5; continue; }
    s.idx___73723 = (0);
    s.i___73724 = (0);
  case 1:
    r0 = (s.i___73724 < 4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = r0 = s.idx___73723;
    r0 = (s.tmp_1 + 1);
    s.idx___73723 = (r0);
    s.tmp_2 = r0 = s.arg0;
    r0 = s.tmp_2.fields["service_class"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.arg1, s.tmp_1);
    s.tmp_6 = r0;
    r0 = (8 * s.i___73724);
    s.tmp_7 = r0;
    r0 = (s.tmp_6 << s.tmp_7);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 | s.tmp_5);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["service_class"] = (s.tmp_3);
    r0 = (s.i___73724 + 1);
    s.i___73724 = (r0);
    { step = 1; continue; }
  case 2:
    s.tmp_0 = r0 = s.idx___73723;
    r0 = (s.tmp_0 + 1);
    s.idx___73723 = (r0);
    s.tmp_1 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getUint8(s.arg1, s.tmp_0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["service_flags"] = (s.tmp_2);
    s.tmp_0 = r0 = s.idx___73723;
    r0 = (s.tmp_0 + 1);
    s.idx___73723 = (r0);
    s.tmp_1 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getUint8(s.arg1, s.tmp_0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["advertisement_size"] = (s.tmp_2);
    r0 = s.arg0.fields["advertisement_size"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_1 = r0 = s.arg0;
    r0 = s.arg0.fields["advertisement_size"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.arg1, s.idx___73723, s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["data"] = (s.tmp_2);
  case 3:
  case 4:
  case 5:
  case 6:
    r0 = s.arg0.fields["data"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_3 = r0 = s.arg0;
    r0 = pxsim.control.createBuffer(0);
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["data"] = (s.tmp_4);
  case 7:
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDServiceInformation_constructor__P71802.info = {"start":9731,"length":550,"line":275,"column":8,"endLine":289,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"inline","argumentNames":["this","buf"]}

function jacdac_JDServiceInformation_constructor__P71802_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDServiceInformation_constructor__P71802, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  idx___73723: undefined,
  i___73724: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDControlPacket_device_name__P71786(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlPacket__C71780_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_String_.length(s.arg1);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = r0 = s.arg0;
    r0 = s.tmp_2.fields["device_flags"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 | 4);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["device_flags"] = (s.tmp_3);
    r0 = (s.arg0).fields["_device_name"] = (s.arg1);
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlPacket_device_name__P71786.info = {"start":6056,"length":227,"line":166,"column":8,"endLine":171,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"device_name","argumentNames":["this","device_name"]}

function jacdac_JDControlPacket_device_name__P71786_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlPacket_device_name__P71786, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDControlPacket_device_name__P71785(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlPacket__C71780_VT)) failedCast(r0);
    r0 = s.arg0.fields["_device_name"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["_device_name"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.length(s.tmp_1);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0.fields["_device_name"];
    { step = 5; continue; }
    { step = 4; continue; }
  case 3:
    r0 = null;
    { step = 5; continue; }
  case 4:
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlPacket_device_name__P71785.info = {"start":5858,"length":188,"line":159,"column":8,"endLine":164,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"device_name","argumentNames":["this"]}

function jacdac_JDControlPacket_device_name__P71785_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlPacket_device_name__P71785, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_JDControlPacket_constructor__P71788(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.buf___73805 = undefined;
    s.idx___73813 = undefined;
    s.nameLen___73832 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlPacket__C71780_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_device_name"] = (s.tmp_1);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 5; continue; }
    s.tmp_0 = jacdac_JDPacket_data__P71773_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.buf___73805 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.slice(s.buf___73805, 0, 8);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["unique_device_identifier"] = (s.tmp_1);
    s.idx___73813 = (8);
    s.tmp_0 = r0 = s.idx___73813;
    r0 = (s.tmp_0 + 1);
    s.idx___73813 = (r0);
    s.tmp_1 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getUint8(s.buf___73805, s.tmp_0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["device_address"] = (s.tmp_2);
    s.tmp_0 = r0 = s.idx___73813;
    r0 = (s.tmp_0 + 1);
    s.idx___73813 = (r0);
    s.tmp_1 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getUint8(s.buf___73805, s.tmp_0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["device_flags"] = (s.tmp_2);
    r0 = s.arg0.fields["device_flags"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = r0 = s.idx___73813;
    r0 = (s.tmp_2 + 1);
    s.idx___73813 = (r0);
    r0 = pxsim.BufferMethods.getUint8(s.buf___73805, s.tmp_2);
    s.nameLen___73832 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.slice(s.buf___73805, s.idx___73813, s.nameLen___73832);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_device_name"] = (s.tmp_1);
    r0 = (s.idx___73813 + s.nameLen___73832);
    s.idx___73813 = (r0);
    s.tmp_1 = r0 = s.nameLen___73832;
    r0 = s.arg0.fields["_device_name"];
    s.tmp_3 = r0;
    r0 = pxsim_String_.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 != s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_4 = jacdac_options_error__P71813_mk(s);
    if ((s.nameLen___73832) && (s.nameLen___73832).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.nameLen___73832);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.nameLen___73832) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat("Control packet name length mismatch. Expected: ", s.tmp_9);
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, " got: ");
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_5 = r0;
    s.tmp_13 = jacdac_JDControlPacket_device_name__P71785_mk(s);
    s.tmp_13.arg0 = s.arg0;
    s.pc = 12; return s.tmp_13;
  case 12:
    r0 = s.retval;
    s.tmp_12 = r0;
    r0 = pxsim_String_.length(s.tmp_12);
    s.tmp_11 = r0;
    if ((s.tmp_11) && (s.tmp_11).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.tmp_11);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_11) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_10);
    s.tmp_4.arg0 = r0;
    s.pc = 8; return s.tmp_4;
  case 8:
    r0 = s.retval;
  case 1:
  case 2:
  case 3:
  case 4:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = r0 = s.buf___73805;
    s.tmp_3 = r0 = s.idx___73813;
    r0 = pxsim.BufferMethods.length(s.buf___73805);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, s.tmp_3, s.tmp_4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["data"] = (s.tmp_1);
    { step = 6; continue; }
  case 5:
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.createBuffer(0);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["data"] = (s.tmp_1);
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlPacket_constructor__P71788.info = {"start":3261,"length":1154,"line":89,"column":8,"endLine":114,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"inline","argumentNames":["this","p"]}

function jacdac_JDControlPacket_constructor__P71788_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlPacket_constructor__P71788, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  buf___73805: undefined,
  idx___73813: undefined,
  nameLen___73832: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_options_utf8Decode__P71810(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.toString(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_options_utf8Decode__P71810.info = {"start":50,"length":79,"line":3,"column":4,"endLine":5,"endColumn":5,"fileName":"pxt_modules/jacdac/makecodeoptions.ts","functionName":"utf8Decode","argumentNames":["buf"]}

function jacdac_options_utf8Decode__P71810_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_options_utf8Decode__P71810, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JDControlPacket_getBuffer__P71781(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.size___73887 = undefined;
    s.buffer___73898 = undefined;
    s.idx___73907 = undefined;
    s.encoded___73953 = undefined;
    s.i___73957 = undefined;
    s.i___73975 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlPacket__C71780_VT)) failedCast(r0);
    s.size___73887 = (0);
    r0 = s.arg0.fields["_device_name"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.length(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = r0 = s.size___73887;
    s.tmp_6 = jacdac_JDControlPacket_device_name__P71785_mk(s);
    s.tmp_6.arg0 = s.arg0;
    s.pc = 11; return s.tmp_6;
  case 11:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String_.length(s.tmp_5);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.size___73887 = (r0);
  case 1:
  case 2:
    r0 = (10 + s.size___73887);
    s.tmp_1 = r0;
    r0 = s.arg0.fields["data"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 + s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.buffer___73898 = (r0);
    s.idx___73907 = (0);
  case 3:
    s.tmp_1 = r0 = s.idx___73907;
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_4 = r0 = s.buffer___73898;
    s.tmp_5 = r0 = s.idx___73907;
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_7, s.idx___73907);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_4, s.tmp_5, s.tmp_6);
    r0 = (s.idx___73907 + 1);
    s.idx___73907 = (r0);
    { step = 3; continue; }
  case 4:
    s.tmp_0 = r0 = s.idx___73907;
    r0 = (s.tmp_0 + 1);
    s.idx___73907 = (r0);
    s.tmp_1 = r0 = s.buffer___73898;
    r0 = s.arg0.fields["device_address"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 255);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_1, s.tmp_0, s.tmp_2);
    s.tmp_0 = r0 = s.idx___73907;
    r0 = (s.tmp_0 + 1);
    s.idx___73907 = (r0);
    s.tmp_1 = r0 = s.buffer___73898;
    r0 = s.arg0.fields["device_flags"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 255);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_1, s.tmp_0, s.tmp_2);
    r0 = s.arg0.fields["device_flags"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_2 = r0 = s.idx___73907;
    r0 = (s.tmp_2 + 1);
    s.idx___73907 = (r0);
    s.tmp_3 = r0 = s.buffer___73898;
    r0 = s.arg0.fields["_device_name"];
    s.tmp_5 = r0;
    r0 = pxsim_String_.length(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_3, s.tmp_2, s.tmp_4);
    r0 = s.arg0.fields["_device_name"];
    s.tmp_0 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_0);
    s.encoded___73953 = (r0);
    s.i___73957 = (0);
  case 5:
    s.tmp_1 = r0 = s.i___73957;
    r0 = s.arg0.fields["_device_name"];
    s.tmp_3 = r0;
    r0 = pxsim_String_.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_4 = r0 = s.idx___73907;
    r0 = (s.tmp_4 + 1);
    s.idx___73907 = (r0);
    s.tmp_5 = r0 = s.buffer___73898;
    r0 = pxsim.BufferMethods.getUint8(s.encoded___73953, s.i___73957);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_5, s.tmp_4, s.tmp_6);
    r0 = (s.i___73957 + 1);
    s.i___73957 = (r0);
    { step = 5; continue; }
  case 6:
  case 7:
  case 8:
    s.i___73975 = (0);
  case 9:
    s.tmp_1 = r0 = s.i___73975;
    r0 = s.arg0.fields["data"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    s.tmp_4 = r0 = s.idx___73907;
    r0 = (s.tmp_4 + 1);
    s.idx___73907 = (r0);
    s.tmp_5 = r0 = s.buffer___73898;
    r0 = s.arg0.fields["data"];
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_7, s.i___73975);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_5, s.tmp_4, s.tmp_6);
    r0 = (s.i___73975 + 1);
    s.i___73975 = (r0);
    { step = 9; continue; }
  case 10:
    r0 = s.buffer___73898;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlPacket_getBuffer__P71781.info = {"start":4425,"length":1103,"line":116,"column":8,"endLine":145,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"getBuffer","argumentNames":["this"]}

function jacdac_JDControlPacket_getBuffer__P71781_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlPacket_getBuffer__P71781, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  size___73887: undefined,
  buffer___73898: undefined,
  idx___73907: undefined,
  encoded___73953: undefined,
  i___73957: undefined,
  i___73975: undefined,
  arg0: undefined,
} }





function jacdac_options_utf8Encode__P71811(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.createBufferFromUTF8(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_options_utf8Encode__P71811.info = {"start":135,"length":98,"line":7,"column":4,"endLine":9,"endColumn":5,"fileName":"pxt_modules/jacdac/makecodeoptions.ts","functionName":"utf8Encode","argumentNames":["str"]}

function jacdac_options_utf8Encode__P71811_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_options_utf8Encode__P71811, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JDControlService_send__P71603(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    s.tmp_1 = if_isConnected_1_mk(s);
    s.tmp_3 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = s.tmp_2.fields["_bus"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["isConnected"];
    if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["isConnected"]; }
    else { s.pc = 3; return s.tmp_1; }
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_4 = jacdac_JACDAC_write__P71741_mk(s);
    s.tmp_5 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 6; return s.tmp_5;
  case 6:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.arg1;
    s.tmp_4.arg2 = 0;
    s.tmp_4.arg3 = 0;
    s.tmp_4.arg4 = null;
    s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_send__P71603.info = {"start":768,"length":148,"line":22,"column":8,"endLine":25,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"send","argumentNames":["this","buffer"]}

function jacdac_JDControlService_send__P71603_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_send__P71603, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDControlService_deviceDisconnected__P71604(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.current___74019 = undefined;
    s.unnamed102___U1 = undefined;
    s.unnamed103___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    r0 = s.arg0.fields["nextAddress"];
    s.tmp_1 = r0;
    r0 = s.arg1.fields["device_address"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["nextAddress"] = (254);
  case 1:
  case 2:
    s.current___74019 = (undefined);
    s.tmp_0 = jacdac_JACDAC_services__P71721_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    s.unnamed102___U1 = (r0);
    s.unnamed103___U2 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed103___U2;
    r0 = pxsim_Array__length(s.unnamed102___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 11; continue; }
    r0 = pxsim_Array__getAt(s.unnamed102___U1, s.unnamed103___U2);
    s.current___74019 = (r0);
    r0 = s.current___74019.fields["device"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 4:
    r0 = s.current___74019.fields["_mode"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == 4);
  case 5:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (!r0) { step = 6; continue; }
    r0 = s.tmp_6;
    { step = 7; continue; }
  case 6:
    r0 = s.arg1.fields["device_address"];
    s.tmp_7 = r0;
    r0 = s.current___74019.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_8 = r0;
    r0 = (s.tmp_7 != s.tmp_8);
  case 7:
    // jmp value (already in r0)
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    if (!r0) { step = 8; continue; }
    { step = 10; continue; }
  case 8:
  case 9:
    r0 = (s.current___74019).fields["device"] = (undefined);
    r0 = (s.current___74019).fields["service_number"] = (65535);
    s.tmp_0 = jacdac_JDService__hostDisconnected__P71493_mk(s);
    s.tmp_0.arg0 = s.current___74019;
    s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
  case 10:
    r0 = (s.unnamed103___U2 + 1);
    s.unnamed103___U2 = (r0);
    { step = 3; continue; }
  case 11:
    s.unnamed102___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_deviceDisconnected__P71604.info = {"start":926,"length":689,"line":27,"column":8,"endLine":40,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"deviceDisconnected","argumentNames":["this","device"]}

function jacdac_JDControlService_deviceDisconnected__P71604_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_deviceDisconnected__P71604, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  current___74019: undefined,
  unnamed102___U1: undefined,
  unnamed103___U2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDService__hostDisconnected__P71493(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDService__C71484_VT)) failedCast(r0);
    s.tmp_0 = jacdac_options_log__P71814_mk(s);
    s.tmp_0.arg0 = "Host disconnected";
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["status"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & -3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["status"] = (s.tmp_1);
    r0 = s.arg0.fields["onDisconnected"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = lambda_1_mk(s);
    r0 = s.arg0.fields["onDisconnected"];
    s.tmp_1.argL = r0;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDService__hostDisconnected__P71493.info = {"start":2161,"length":232,"line":82,"column":8,"endLine":88,"endColumn":9,"fileName":"pxt_modules/jacdac/service.ts","functionName":"_hostDisconnected","argumentNames":["this"]}

function jacdac_JDService__hostDisconnected__P71493_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDService__hostDisconnected__P71493, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_JDControlService_deviceEnumerated__P71605(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.current___74060 = undefined;
    s.unnamed104___U1 = undefined;
    s.unnamed105___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    s.current___74060 = (undefined);
    s.tmp_0 = jacdac_JACDAC_services__P71721_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.unnamed104___U1 = (r0);
    s.unnamed105___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed105___U2;
    r0 = pxsim_Array__length(s.unnamed104___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 7; continue; }
    r0 = pxsim_Array__getAt(s.unnamed104___U1, s.unnamed105___U2);
    s.current___74060 = (r0);
    r0 = (s.current___74060 == s.arg0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 3; continue; }
  case 2:
    r0 = s.current___74060.fields["_mode"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 1);
  case 3:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 4; continue; }
    { step = 6; continue; }
  case 4:
  case 5:
    r0 = s.arg0.fields["device"];
    s.tmp_5 = r0;
    r0 = (s.current___74060).fields["device"] = (s.tmp_5);
    s.tmp_0 = jacdac_JDService__hostConnected__P71492_mk(s);
    s.tmp_0.arg0 = s.current___74060;
    s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 6:
    r0 = (s.unnamed105___U2 + 1);
    s.unnamed105___U2 = (r0);
    { step = 1; continue; }
  case 7:
    s.unnamed104___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_deviceEnumerated__P71605.info = {"start":1625,"length":405,"line":42,"column":8,"endLine":51,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"deviceEnumerated","argumentNames":["this"]}

function jacdac_JDControlService_deviceEnumerated__P71605_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_deviceEnumerated__P71605, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  current___74060: undefined,
  unnamed104___U1: undefined,
  unnamed105___U2: undefined,
  arg0: undefined,
} }





function jacdac_JDService__hostConnected__P71492(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDService__C71484_VT)) failedCast(r0);
    s.tmp_0 = jacdac_options_log__P71814_mk(s);
    s.tmp_0.arg0 = "Host Connected";
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["status"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["status"] = (s.tmp_1);
    r0 = s.arg0.fields["onConnected"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = lambda_1_mk(s);
    r0 = s.arg0.fields["onConnected"];
    s.tmp_1.argL = r0;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDService__hostConnected__P71492.info = {"start":1932,"length":219,"line":74,"column":8,"endLine":80,"endColumn":9,"fileName":"pxt_modules/jacdac/service.ts","functionName":"_hostConnected","argumentNames":["this"]}

function jacdac_JDService__hostConnected__P71492_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDService__hostConnected__P71492, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function setInterval__P71388(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = Math_max__P71169_mk(s);
    s.tmp_0.arg0 = 10;
    r0 = (s.arg1 | 0);
    s.tmp_0.arg1 = r0;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.arg1 = (r0);
    s.tmp_0 = control_setInterval__P71313_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 0;
    s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
setInterval__P71388.info = {"start":125,"length":178,"line":6,"column":0,"endLine":9,"endColumn":1,"fileName":"pxt_modules/base/scheduling.ts","functionName":"setInterval","argumentNames":["func","delay"]}

function setInterval__P71388_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: setInterval__P71388, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_setInterval__P71313(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.interval___74111 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg1 < 0);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = 0;
    { step = 7; continue; }
  case 3:
  case 4:
    r0 = pxsim_numops_toBoolDecr(globals._intervals___71308);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 5; continue; }
    r0 = pxsim_Array__mk();
    globals._intervals___71308 = (r0);
  case 5:
  case 6:
    r0 = pxsim_pxtcore_mkClassInstance(control_Interval__C71309_VT);
    s.tmp_0 = r0;
    s.tmp_1 = control_Interval_constructor__P71312_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.tmp_1.arg2 = s.arg1;
    s.tmp_1.arg3 = s.arg2;
    s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.interval___74111 = (s.tmp_0);
    r0 = s.interval___74111.fields["id"];
  case 7:
    return leave(s, r0)
  default: oops()
} } }
control_setInterval__P71313.info = {"start":8440,"length":266,"line":284,"column":4,"endLine":289,"endColumn":5,"fileName":"pxt_modules/base/control.ts","functionName":"setInterval","argumentNames":["func","delay","mode"]}

function control_setInterval__P71313_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_setInterval__P71313, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  interval___74111: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function control_Interval_constructor__P71312(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_Interval__C71309_VT)) failedCast(r0);
    r0 = pxsim_Array__length(globals._intervals___71308);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 1;
    { step = 2; continue; }
  case 1:
    s.tmp_3 = r0 = globals._intervals___71308;
    r0 = pxsim_Array__length(globals._intervals___71308);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 - 1);
    s.tmp_4 = r0;
    r0 = pxsim_Array__getAt(s.tmp_3, s.tmp_4);
    r0 = r0.fields["id"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
  case 2:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = (s.arg0).fields["id"] = (s.tmp_6);
    r0 = (s.arg0).fields["func"] = (s.arg1);
    r0 = (s.arg0).fields["delay"] = (s.arg2);
    r0 = (s.arg0).fields["mode"] = (s.arg3);
    r0 = pxsim_Array__push(globals._intervals___71308, s.arg0);
    r0 = pxsim_pxtcore_mkAction(1, inline__P74154);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.control.runInParallel(s.tmp_0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_Interval_constructor__P71312.info = {"start":7169,"length":367,"line":245,"column":8,"endLine":254,"endColumn":9,"fileName":"pxt_modules/base/control.ts","functionName":"inline","argumentNames":["this","func","delay","mode"]}

function control_Interval_constructor__P71312_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_Interval_constructor__P71312, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function inline__P74154(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.tmp_0 = control_Interval_work__P71310_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
inline__P74154.info = {"start":7507,"length":17,"line":253,"column":34,"endLine":253,"endColumn":51,"fileName":"pxt_modules/base/control.ts","functionName":"inline","argumentNames":[]}

function inline__P74154_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P74154, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function control_Interval_work__P71310(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_Interval__C71309_VT)) failedCast(r0);
    r0 = s.arg0.fields["mode"];
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 12; continue; }
  case 1:
  case 2:
    r0 = s.arg0.fields["delay"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    s.tmp_3 = pause__P71379_mk(s);
    r0 = s.arg0.fields["delay"];
    s.tmp_3.arg0 = r0;
    s.pc = 13; return s.tmp_3;
  case 13:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = s.arg0.fields["delay"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_2 = lambda_1_mk(s);
    r0 = s.arg0.fields["func"];
    s.tmp_2.argL = r0;
    setupLambda(s.tmp_2, s.tmp_2.argL);
    s.pc = 14; return s.tmp_2;
  case 14:
    r0 = s.retval;
  case 5:
  case 6:
    { step = 12; continue; }
  case 7:
  case 8:
    r0 = s.arg0.fields["delay"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.tmp_2 = pause__P71379_mk(s);
    r0 = s.arg0.fields["delay"];
    s.tmp_2.arg0 = r0;
    s.pc = 15; return s.tmp_2;
  case 15:
    r0 = s.retval;
    r0 = s.arg0.fields["delay"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    s.tmp_2 = lambda_1_mk(s);
    r0 = s.arg0.fields["func"];
    s.tmp_2.argL = r0;
    setupLambda(s.tmp_2, s.tmp_2.argL);
    s.pc = 16; return s.tmp_2;
  case 16:
    r0 = s.retval;
  case 9:
  case 10:
    { step = 8; continue; }
  case 11:
  case 12:
    r0 = pxsim_Array_.removeElement(globals._intervals___71308, s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_Interval_work__P71310.info = {"start":7546,"length":823,"line":256,"column":8,"endLine":277,"endColumn":9,"fileName":"pxt_modules/base/control.ts","functionName":"work","argumentNames":["this"]}

function control_Interval_work__P71310_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_Interval_work__P71310, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function pause__P71379(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    setupResume(s, 1);
    pxsim.loops.pause(s.arg0);
    checkResumeConsumed();
    return;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
pause__P71379.info = {"start":246,"length":57,"line":7,"column":0,"endLine":9,"endColumn":1,"fileName":"pxt_modules/base/pause.ts","functionName":"pause","argumentNames":["ms"]}

function pause__P71379_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pause__P71379, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JACDAC_services__P71721(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    s.tmp_0 = helpers_arraySlice__P71160_mk(s);
    r0 = s.arg0.fields["_services"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = 0;
    s.tmp_0.arg2 = undefined;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_services__P71721.info = {"start":817,"length":83,"line":36,"column":8,"endLine":38,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"services","argumentNames":["this"]}

function jacdac_JACDAC_services__P71721_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_services__P71721, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDControlService_initialise__P71608(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    r0 = s.arg0.fields["status"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 32);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_4 = r0 = s.arg0;
    r0 = s.tmp_4.fields["status"];
    s.tmp_6 = r0;
    r0 = (s.tmp_6 | 32);
    s.tmp_5 = r0;
    r0 = (s.tmp_4).fields["status"] = (s.tmp_5);
    s.tmp_0 = jacdac_JACDAC_add__P71737_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["configurationService"];
    s.tmp_0.arg1 = r0;
    s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.tmp_0 = jacdac_JACDAC_add__P71737_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["rngService"];
    s.tmp_0.arg1 = r0;
    s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDDevice__C71792_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDDevice_constructor__P71799_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = undefined;
    s.tmp_1.arg2 = undefined;
    s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    r0 = (s.arg0).fields["device"] = (s.tmp_0);
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    s.tmp_2 = jacdac_generate_eui64__P71751_mk(s);
    s.tmp_3 = jacdac_options_getSerialNumber__P71815_mk(s);
    s.pc = 11; return s.tmp_3;
  case 11:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.pc = 10; return s.tmp_2;
  case 10:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["unique_device_identifier"] = (s.tmp_1);
  case 1:
  case 2:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["device_address"] = (s.arg1);
    { step = 4; continue; }
  case 3:
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    s.tmp_2 = jacdac_random__P71750_mk(s);
    s.tmp_2.arg0 = 1;
    s.tmp_2.arg1 = 254;
    s.pc = 12; return s.tmp_2;
  case 12:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["device_address"] = (s.tmp_1);
  case 4:
    s.tmp_0 = jacdac_options_log__P71814_mk(s);
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("device address: ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = s.tmp_0.fields["device_flags"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["device_flags"] = (s.tmp_1);
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["communication_rate"] = (1);
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["rolling_counter"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_initialise__P71608.info = {"start":6162,"length":1220,"line":151,"column":8,"endLine":174,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"initialise","argumentNames":["this","device_address"]}

function jacdac_JDControlService_initialise__P71608_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_initialise__P71608, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_random__P71750(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.Math_.ceil(s.arg0);
    s.arg0 = (r0);
    r0 = pxsim.Math_.floor(s.arg1);
    s.arg1 = (r0);
    r0 = pxsim.Math_.random();
    s.tmp_2 = r0;
    r0 = (s.arg1 - s.arg0);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 * s.tmp_3);
    s.tmp_1 = r0;
    r0 = pxsim.Math_.floor(s.tmp_1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + s.arg0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_random__P71750.info = {"start":22,"length":183,"line":1,"column":4,"endLine":5,"endColumn":5,"fileName":"pxt_modules/jacdac/rand.ts","functionName":"random","argumentNames":["min","max"]}

function jacdac_random__P71750_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_random__P71750, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_options_getSerialNumber__P71815(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals.sn___71809);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.control.deviceLongSerialNumber();
    globals.sn___71809 = (r0);
  case 1:
  case 2:
    r0 = globals.sn___71809;
    return leave(s, r0)
  default: oops()
} } }
jacdac_options_getSerialNumber__P71815.info = {"start":571,"length":142,"line":23,"column":4,"endLine":28,"endColumn":5,"fileName":"pxt_modules/jacdac/makecodeoptions.ts","functionName":"getSerialNumber","argumentNames":[]}

function jacdac_options_getSerialNumber__P71815_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_options_getSerialNumber__P71815, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_generate_eui64__P71751(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getUint8(s.arg0, 6);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & -3);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_0, 6, s.tmp_1);
    r0 = s.arg0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_generate_eui64__P71751.info = {"start":211,"length":143,"line":7,"column":4,"endLine":10,"endColumn":5,"fileName":"pxt_modules/jacdac/rand.ts","functionName":"generate_eui64","argumentNames":["serial"]}

function jacdac_generate_eui64__P71751_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_generate_eui64__P71751, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_JDDevice_constructor__P71799(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDevice__C71792_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.createBuffer(16);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["broadcast_servicemap"] = (s.tmp_1);
    r0 = (s.arg0).fields["servicemap_bitmsk"] = (0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["communication_rate"] = (s.arg2);
    s.tmp_0 = jacdac_JDDevice_update__P71794_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.createBuffer(0);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["unique_device_identifier"] = (s.tmp_1);
    r0 = (s.arg0).fields["device_address"] = (0);
    r0 = (s.arg0).fields["device_flags"] = (0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_services"] = (s.tmp_1);
    r0 = (s.arg0).fields["rolling_counter"] = (0);
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDevice_constructor__P71799.info = {"start":7496,"length":619,"line":209,"column":8,"endLine":224,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"inline","argumentNames":["this","cp","communication_rate"]}

function jacdac_JDDevice_constructor__P71799_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDevice_constructor__P71799, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDDevice_update__P71794(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.idx___74358 = undefined;
    s.buf___74359 = undefined;
    s.service___74367 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDevice__C71792_VT)) failedCast(r0);
    r0 = (s.arg0).fields["rolling_counter"] = (0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_services"] = (s.tmp_1);
    r0 = s.arg1.fields["unique_device_identifier"];
    s.tmp_0 = r0;
    r0 = (s.arg0).fields["unique_device_identifier"] = (s.tmp_0);
    r0 = s.arg1.fields["device_address"];
    s.tmp_0 = r0;
    r0 = (s.arg0).fields["device_address"] = (s.tmp_0);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_JDControlPacket_device_name__P71785_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["device_name"] = (s.tmp_1);
    r0 = s.arg1.fields["device_flags"];
    s.tmp_0 = r0;
    r0 = (s.arg0).fields["device_flags"] = (s.tmp_0);
    s.idx___74358 = (0);
    r0 = s.arg1.fields["data"];
    s.buf___74359 = (r0);
  case 1:
    s.tmp_1 = r0 = s.idx___74358;
    r0 = pxsim.BufferMethods.length(s.buf___74359);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDServiceInformation__C71800_VT);
    s.tmp_3 = r0;
    s.tmp_4 = jacdac_JDServiceInformation_constructor__P71802_mk(s);
    s.tmp_4.arg0 = s.tmp_3;
    s.tmp_5 = r0 = s.buf___74359;
    s.tmp_6 = r0 = s.idx___74358;
    r0 = pxsim.BufferMethods.length(s.buf___74359);
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_5, s.tmp_6, s.tmp_7);
    s.tmp_4.arg1 = r0;
    s.pc = 4; return s.tmp_4;
  case 4:
    r0 = s.retval;
    s.service___74367 = (s.tmp_3);
    s.tmp_0 = r0 = s.idx___74358;
    r0 = s.service___74367.fields["advertisement_size"];
    s.tmp_2 = r0;
    r0 = (6 + s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.idx___74358 = (r0);
    r0 = s.arg0.fields["_services"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.service___74367);
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDevice_update__P71794.info = {"start":8251,"length":661,"line":230,"column":8,"endLine":246,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"update","argumentNames":["this","cp"]}

function jacdac_JDDevice_update__P71794_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDevice_update__P71794, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  idx___74358: undefined,
  buf___74359: undefined,
  service___74367: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDService_mode__P71486(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDService__C71484_VT)) failedCast(r0);
    r0 = s.arg0.fields["_mode"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDService_mode__P71486.info = {"start":1186,"length":53,"line":47,"column":8,"endLine":49,"endColumn":9,"fileName":"pxt_modules/jacdac/service.ts","functionName":"mode","argumentNames":["this"]}

function jacdac_JDService_mode__P71486_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDService_mode__P71486, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JDService_service_class__P71485(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDService__C71484_VT)) failedCast(r0);
    r0 = s.arg0.fields["_service_class"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDService_service_class__P71485.info = {"start":1105,"length":71,"line":43,"column":8,"endLine":45,"endColumn":9,"fileName":"pxt_modules/jacdac/service.ts","functionName":"service_class","argumentNames":["this"]}

function jacdac_JDService_service_class__P71485_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDService_service_class__P71485, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_options_log__P71814(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P71325_mk(s);
    s.tmp_0.arg0 = globals.consolePriority___71843;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(":jd> ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_options_log__P71814.info = {"start":455,"length":110,"line":19,"column":4,"endLine":21,"endColumn":5,"fileName":"pxt_modules/jacdac/makecodeoptions.ts","functionName":"log","argumentNames":["message"]}

function jacdac_options_log__P71814_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_options_log__P71814, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_start__P71829(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.DEVICE_NAME_STORAGE_KEY___74412 = undefined;
    s.deviceName___74418 = undefined;
    r0 = pxsim_numops_toBoolDecr(globals.jacdacStarted___71827);
    if (!r0) { step = 1; continue; }
    { step = 9; continue; }
  case 1:
  case 2:
    globals.jacdacStarted___71827 = (true);
    r0 = pxsim_numops_toBoolDecr(globals.bus___71828);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JACDACBus__C71817_VT);
    s.tmp_2 = r0;
    r0 = undefined;
    globals.bus___71828 = (s.tmp_2);
    s.tmp_0 = jacdac_JACDAC_bus__P71720_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = globals.bus___71828;
    s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 3:
  case 4:
    s.DEVICE_NAME_STORAGE_KEY___74412 = ("jddn");
    s.tmp_3 = jacdac_JACDAC_getDeviceName__P71732_mk(s);
    s.tmp_4 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 13; return s.tmp_4;
  case 13:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.pc = 12; return s.tmp_3;
  case 12:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_5 = configStorage_getItem__P71472_mk(s);
    s.tmp_5.arg0 = s.DEVICE_NAME_STORAGE_KEY___74412;
    s.pc = 14; return s.tmp_5;
  case 14:
    r0 = s.retval;
    s.deviceName___74418 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.deviceName___74418);
    if (!r0) { step = 5; continue; }
    s.tmp_0 = console_add__P71325_mk(s);
    s.tmp_0.arg0 = globals.consolePriority___71843;
    if ((s.deviceName___74418) && (s.deviceName___74418).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.deviceName___74418);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.deviceName___74418) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(":jd> restoring device name changed to ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    s.tmp_0 = jacdac_JACDAC_setDeviceName__P71731_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 18; return s.tmp_1;
  case 18:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.deviceName___74418;
    s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
  case 5:
  case 6:
  case 7:
  case 8:
    r0 = pxsim_pxtcore_mkAction(1, inline__P74435);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.DEVICE_NAME_STORAGE_KEY___74412);
    s.tmp_2 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 19; return s.tmp_2;
  case 19:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1).fields["onNameRemotelyChanged"] = (s.tmp_0);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 20; return s.tmp_1;
  case 20:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["onIdentificationRequest"] = (inline__P74455);
    s.tmp_0 = jacdac_JACDACBus_start__P71818_mk(s);
    s.tmp_0.arg0 = globals.bus___71828;
    s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    s.tmp_0 = jacdac_JACDAC_start__P71729_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 23; return s.tmp_1;
  case 23:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = undefined;
    s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
    s.tmp_0 = console_addListener__P71332_mk(s);
    s.tmp_0.arg0 = inline__P74464;
    s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
  case 9:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_start__P71829.info = {"start":1045,"length":1466,"line":50,"column":4,"endLine":89,"endColumn":5,"fileName":"pxt_modules/jacdac/makecodejacdac.ts","functionName":"start","argumentNames":[]}

function jacdac_start__P71829_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_start__P71829, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  DEVICE_NAME_STORAGE_KEY___74412: undefined,
  deviceName___74418: undefined,
} }





function inline__P74435(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 1);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 1:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(":jd> device name changed to ", s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim.control.dmesg(s.tmp_0);
    s.tmp_0 = console_add__P71325_mk(s);
    s.tmp_0.arg0 = globals.consolePriority___71843;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(":jd> device name changed to ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.tmp_0 = configStorage_setItem__P71471_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = s.arg0;
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
inline__P74435.info = {"start":1765,"length":254,"line":70,"column":55,"endLine":74,"endColumn":9,"fileName":"pxt_modules/jacdac/makecodejacdac.ts","functionName":"inline","argumentNames":["name"]}

function inline__P74435_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P74435, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function inline__P74455(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = pxsim.control.raiseEvent(33, 2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
inline__P74455.info = {"start":2079,"length":177,"line":76,"column":57,"endLine":80,"endColumn":9,"fileName":"pxt_modules/jacdac/makecodejacdac.ts","functionName":"inline","argumentNames":[]}

function inline__P74455_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P74455, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function inline__P74464(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_JDConsoleService_add__P71543_mk(s);
    s.tmp_1 = jacdac_JACDAC_consoleService__P71726_mk(s);
    s.tmp_2 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
inline__P74464.info = {"start":2373,"length":130,"line":86,"column":28,"endLine":88,"endColumn":9,"fileName":"pxt_modules/jacdac/makecodejacdac.ts","functionName":"inline","argumentNames":["pri","msg"]}

function inline__P74464_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P74464, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JACDAC_consoleService__P71726(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    r0 = s.arg0.fields["_consoleService"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDConsoleService__C71530_VT);
    s.tmp_3 = r0;
    s.tmp_4 = jacdac_JDConsoleService_constructor__P71544_mk(s);
    s.tmp_4.arg0 = s.tmp_3;
    s.pc = 3; return s.tmp_4;
  case 3:
    r0 = s.retval;
    r0 = (s.arg0).fields["_consoleService"] = (s.tmp_3);
    s.tmp_0 = jacdac_JACDAC_add__P71737_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = s.arg0.fields["_consoleService"];
    s.tmp_0.arg1 = r0;
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = s.arg0.fields["_consoleService"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_consoleService__P71726.info = {"start":1264,"length":239,"line":56,"column":8,"endLine":62,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"consoleService","argumentNames":["this"]}

function jacdac_JACDAC_consoleService__P71726_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_consoleService__P71726, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function jacdac_JDConsoleService_constructor__P71544(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConsoleService__C71530_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDService_constructor__P71494_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 9;
    s.tmp_0.arg2 = 3;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = (s.arg0).fields["_consoleMode"] = (0);
    s.tmp_0 = jacdac_JDConsoleService_minPriority__P71538_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 4;
    s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = (s.arg0).fields["_lastListenerTime"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConsoleService_constructor__P71544.info = {"start":1370,"length":293,"line":41,"column":8,"endLine":46,"endColumn":9,"fileName":"pxt_modules/jacdac/consoleservice.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_JDConsoleService_constructor__P71544_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConsoleService_constructor__P71544, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDConsoleService_minPriority__P71538(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConsoleService__C71530_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = (s.arg1 << 4);
    s.tmp_2 = r0;
    r0 = s.arg0.fields["status"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 15);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 | s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["status"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConsoleService_minPriority__P71538.info = {"start":4686,"length":120,"line":121,"column":8,"endLine":123,"endColumn":9,"fileName":"pxt_modules/jacdac/consoleservice.ts","functionName":"minPriority","argumentNames":["this","priority"]}

function jacdac_JDConsoleService_minPriority__P71538_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConsoleService_minPriority__P71538, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDConsoleService_minPriority__P71537(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConsoleService__C71530_VT)) failedCast(r0);
    r0 = s.arg0.fields["status"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 240);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 4);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConsoleService_minPriority__P71537.info = {"start":4580,"length":96,"line":117,"column":8,"endLine":119,"endColumn":9,"fileName":"pxt_modules/jacdac/consoleservice.ts","functionName":"minPriority","argumentNames":["this"]}

function jacdac_JDConsoleService_minPriority__P71537_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConsoleService_minPriority__P71537, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDConsoleService_add__P71543(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.cursor___74550 = undefined;
    s.txLength___74556 = undefined;
    s.pkt___74566 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConsoleService__C71530_VT)) failedCast(r0);
    r0 = s.arg0.fields["_consoleMode"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_3;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_String_.length(s.arg2);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
  case 4:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 5; continue; }
    { step = 13; continue; }
  case 5:
  case 6:
    s.tmp_10 = if_isConnected_1_mk(s);
    s.tmp_12 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 15; return s.tmp_12;
  case 15:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = s.tmp_11.fields["_bus"];
    s.tmp_10.arg0 = r0;
    s.tmp_10.fn = s.tmp_10.arg0.vtable.iface["isConnected"];
    if (s.tmp_10.fn == null) { s.retval = s.tmp_10.arg0.fields["isConnected"]; }
    else { s.pc = 14; return s.tmp_10; }
  case 14:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    s.tmp_8 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_8);
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBool(s.tmp_7);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_7;
    { step = 8; continue; }
  case 7:
    r0 = pxsim.control.millis();
    s.tmp_14 = r0;
    r0 = s.arg0.fields["_lastListenerTime"];
    s.tmp_15 = r0;
    r0 = (s.tmp_14 - s.tmp_15);
    s.tmp_13 = r0;
    r0 = (s.tmp_13 > 2000);
  case 8:
    // jmp value (already in r0)
    s.tmp_16 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_16);
    if (!r0) { step = 9; continue; }
    s.tmp_17 = jacdac_JDConsoleService_consoleMode__P71533_mk(s);
    s.tmp_17.arg0 = s.arg0;
    s.tmp_17.arg1 = 0;
    s.pc = 16; return s.tmp_17;
  case 16:
    r0 = s.retval;
    { step = 13; continue; }
  case 9:
  case 10:
    s.cursor___74550 = (0);
  case 11:
    s.tmp_1 = r0 = s.cursor___74550;
    r0 = pxsim_String_.length(s.arg2);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
    s.tmp_3 = Math_min__P71170_mk(s);
    r0 = pxsim_String_.length(s.arg2);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - s.cursor___74550);
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = 253;
    s.pc = 17; return s.tmp_3;
  case 17:
    r0 = s.retval;
    s.txLength___74556 = (r0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDConsolePacket__C71806_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDConsolePacket_constructor__P71808_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = undefined;
    s.pc = 18; return s.tmp_1;
  case 18:
    r0 = s.retval;
    s.pkt___74566 = (s.tmp_0);
    r0 = (s.pkt___74566).fields["priority"] = (s.arg1);
    r0 = (s.pkt___74566).fields["packetType"] = (1);
    s.tmp_0 = r0 = s.pkt___74566;
    r0 = pxsim_String_.substr(s.arg2, s.cursor___74550, s.txLength___74556);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["message"] = (s.tmp_1);
    s.tmp_0 = jacdac_JDService__C71484_v3_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDConsolePacket_getBuffer__P71807_mk(s);
    s.tmp_1.arg0 = s.pkt___74566;
    s.pc = 20; return s.tmp_1;
  case 20:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_JDService__C71484_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.send;
    s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    r0 = (s.cursor___74550 + s.txLength___74556);
    s.cursor___74550 = (r0);
    { step = 11; continue; }
  case 12:
  case 13:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConsoleService_add__P71543.info = {"start":5234,"length":1033,"line":138,"column":8,"endLine":163,"endColumn":9,"fileName":"pxt_modules/jacdac/consoleservice.ts","functionName":"add","argumentNames":["this","priority","message"]}

function jacdac_JDConsoleService_add__P71543_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConsoleService_add__P71543, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  cursor___74550: undefined,
  txLength___74556: undefined,
  pkt___74566: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDConsolePacket_getBuffer__P71807(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.encoded___74601 = undefined;
    s.size___74606 = undefined;
    s.header___74613 = undefined;
    s.idx___74617 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConsolePacket__C71806_VT)) failedCast(r0);
    r0 = s.arg0.fields["message"];
    s.tmp_2 = r0;
    r0 = pxsim_String_.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = jacdac_options_error__P71813_mk(s);
    s.tmp_3.arg0 = "Console message length cannot be 0";
    s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = s.arg0.fields["message"];
    s.tmp_0 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_0);
    s.encoded___74601 = (r0);
    r0 = pxsim.BufferMethods.length(s.encoded___74601);
    s.tmp_0 = r0;
    r0 = (3 + s.tmp_0);
    s.size___74606 = (r0);
    r0 = pxsim.control.createBuffer(s.size___74606);
    s.header___74613 = (r0);
    s.idx___74617 = (0);
    s.tmp_0 = r0 = s.idx___74617;
    r0 = (s.tmp_0 + 1);
    s.idx___74617 = (r0);
    s.tmp_1 = r0 = s.header___74613;
    r0 = s.arg0.fields["packetType"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 255);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_1, s.tmp_0, s.tmp_2);
    s.tmp_0 = r0 = s.idx___74617;
    r0 = (s.tmp_0 + 1);
    s.idx___74617 = (r0);
    s.tmp_1 = r0 = s.header___74613;
    r0 = s.arg0.fields["priority"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 255);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_1, s.tmp_0, s.tmp_2);
    r0 = pxsim.BufferMethods.write(s.header___74613, s.idx___74617, s.encoded___74601);
    s.tmp_0 = r0 = s.idx___74617;
    r0 = pxsim.BufferMethods.length(s.encoded___74601);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.idx___74617 = (r0);
    s.tmp_1 = r0 = s.idx___74617;
    r0 = pxsim.BufferMethods.length(s.header___74613);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_3 = r0 = s.idx___74617;
    r0 = (s.tmp_3 + 1);
    s.idx___74617 = (r0);
    r0 = pxsim.BufferMethods.setUint8(s.header___74613, s.tmp_3, 0);
  case 3:
  case 4:
    r0 = s.header___74613;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConsolePacket_getBuffer__P71807.info = {"start":13296,"length":799,"line":387,"column":8,"endLine":408,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"getBuffer","argumentNames":["this"]}

function jacdac_JDConsolePacket_getBuffer__P71807_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConsolePacket_getBuffer__P71807, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  encoded___74601: undefined,
  size___74606: undefined,
  header___74613: undefined,
  idx___74617: undefined,
  arg0: undefined,
} }





function jacdac_JDConsolePacket_constructor__P71808(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.buf___74657 = undefined;
    s.idx___74660 = undefined;
    s.end___74675 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConsolePacket__C71806_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 5; continue; }
    s.tmp_0 = jacdac_JDPacket_data__P71773_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.buf___74657 = (r0);
    s.idx___74660 = (0);
    s.tmp_0 = r0 = s.idx___74660;
    r0 = (s.tmp_0 + 1);
    s.idx___74660 = (r0);
    s.tmp_1 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getUint8(s.buf___74657, s.tmp_0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["priority"] = (s.tmp_2);
    s.tmp_0 = r0 = s.idx___74660;
    r0 = (s.tmp_0 + 1);
    s.idx___74660 = (r0);
    s.tmp_1 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getUint8(s.buf___74657, s.tmp_0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["packetType"] = (s.tmp_2);
    s.end___74675 = (s.idx___74660);
  case 1:
    s.tmp_1 = r0 = s.end___74675;
    r0 = pxsim.BufferMethods.length(s.buf___74657);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = pxsim.BufferMethods.getUint8(s.buf___74657, s.end___74675);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == 0);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 2; continue; }
    { step = 4; continue; }
  case 2:
  case 3:
    r0 = (s.end___74675 + 1);
    s.end___74675 = (r0);
    { step = 1; continue; }
  case 4:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_3 = r0 = s.buf___74657;
    s.tmp_4 = r0 = s.idx___74660;
    r0 = (s.end___74675 - s.idx___74660);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_3, s.tmp_4, s.tmp_5);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["message"] = (s.tmp_1);
    { step = 6; continue; }
  case 5:
    r0 = (s.arg0).fields["priority"] = (-1);
    r0 = (s.arg0).fields["packetType"] = (1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["message"] = (s.tmp_1);
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConsolePacket_constructor__P71808.info = {"start":12602,"length":683,"line":364,"column":8,"endLine":384,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"inline","argumentNames":["this","p"]}

function jacdac_JDConsolePacket_constructor__P71808_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConsolePacket_constructor__P71808, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  buf___74657: undefined,
  idx___74660: undefined,
  end___74675: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDConsoleService_consoleMode__P71533(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConsoleService__C71530_VT)) failedCast(r0);
    r0 = s.arg0.fields["_consoleMode"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["_consoleMode"] = (s.arg1);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConsoleService_consoleMode__P71533.info = {"start":1750,"length":170,"line":52,"column":8,"endLine":56,"endColumn":9,"fileName":"pxt_modules/jacdac/consoleservice.ts","functionName":"consoleMode","argumentNames":["this","consoleMode"]}

function jacdac_JDConsoleService_consoleMode__P71533_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConsoleService_consoleMode__P71533, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_options_getTimeMs__P71816(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    r0 = pxsim.control.millis();
    return leave(s, r0)
  default: oops()
} } }
jacdac_options_getTimeMs__P71816.info = {"start":718,"length":68,"line":29,"column":4,"endLine":31,"endColumn":5,"fileName":"pxt_modules/jacdac/makecodeoptions.ts","functionName":"getTimeMs","argumentNames":[]}

function jacdac_options_getTimeMs__P71816_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_options_getTimeMs__P71816, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_JDConsoleService_consoleMode__P71532(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConsoleService__C71530_VT)) failedCast(r0);
    r0 = s.arg0.fields["_consoleMode"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConsoleService_consoleMode__P71532.info = {"start":1673,"length":67,"line":48,"column":8,"endLine":50,"endColumn":9,"fileName":"pxt_modules/jacdac/consoleservice.ts","functionName":"consoleMode","argumentNames":["this"]}

function jacdac_JDConsoleService_consoleMode__P71532_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConsoleService_consoleMode__P71532, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function console_addListener__P71332(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_Array_.indexOf(globals.listeners___71324, s.arg0, undefined);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > -1);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    { step = 5; continue; }
  case 3:
  case 4:
    r0 = pxsim_Array__push(globals.listeners___71324, s.arg0);
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_addListener__P71332.info = {"start":3460,"length":197,"line":118,"column":4,"endLine":121,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"addListener","argumentNames":["listener"]}

function console_addListener__P71332_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_addListener__P71332, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_JACDAC_start__P71729(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    r0 = s.arg0.fields["state"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = (s.arg0).fields["state"] = (true);
    s.tmp_0 = jacdac_JDControlService_enumerate__P71609_mk(s);
    r0 = s.arg0.fields["_controlService"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_start__P71729.info = {"start":2146,"length":191,"line":84,"column":8,"endLine":90,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"start","argumentNames":["this","device_address"]}

function jacdac_JACDAC_start__P71729_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_start__P71729, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JACDACBus_start__P71818(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDACBus__C71817_VT)) failedCast(r0);
    r0 = pxsim.jacdac.__physStart();
    r0 = pxsim_pxtcore_mkAction(1, inline__P74760);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.jacdac.__physId();
    s.tmp_1 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_1, 1, s.tmp_0, 16);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDACBus_start__P71818.info = {"start":214,"length":156,"line":14,"column":8,"endLine":17,"endColumn":9,"fileName":"pxt_modules/jacdac/makecodejacdac.ts","functionName":"start","argumentNames":["this"]}

function jacdac_JACDACBus_start__P71818_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDACBus_start__P71818, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function inline__P74760(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.tmp_0 = jacdac_JACDACBus_handlePacketData__P71820_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
inline__P74760.info = {"start":329,"length":29,"line":16,"column":78,"endLine":16,"endColumn":107,"fileName":"pxt_modules/jacdac/makecodejacdac.ts","functionName":"inline","argumentNames":[]}

function inline__P74760_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P74760, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_JACDACBus_handlePacketData__P71820(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.buf___74763 = undefined;
    s.pkt___74769 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDACBus__C71817_VT)) failedCast(r0);
    s.buf___74763 = (undefined);
  case 1:
    r0 = pxsim.jacdac.__physGetPacket();
    s.tmp_0 = r0;
    s.buf___74763 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDPacket__C71762_VT);
    s.tmp_1 = r0;
    s.tmp_2 = jacdac_JDPacket_constructor__P71779_mk(s);
    s.tmp_2.arg0 = s.tmp_1;
    s.tmp_2.arg1 = s.buf___74763;
    s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.pkt___74769 = (s.tmp_1);
    s.tmp_0 = jacdac_JACDAC_routePacket__P71728_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.pkt___74769;
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDACBus_handlePacketData__P71820.info = {"start":434,"length":241,"line":23,"column":8,"endLine":29,"endColumn":9,"fileName":"pxt_modules/jacdac/makecodejacdac.ts","functionName":"handlePacketData","argumentNames":["this"]}

function jacdac_JACDACBus_handlePacketData__P71820_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDACBus_handlePacketData__P71820, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  buf___74763: undefined,
  pkt___74769: undefined,
  arg0: undefined,
} }





function jacdac_JACDAC_routePacket__P71728(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDControlService_routePacket__P71614_mk(s);
    r0 = s.arg0.fields["_controlService"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = s.arg0.fields["_bridge"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = jacdac_JDService__C71484_v2_2_mk(s);
    r0 = s.arg0.fields["_bridge"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_1.arg0, jacdac_JDService__C71484_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.handlePacket;
    s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_routePacket__P71728.info = {"start":1893,"length":243,"line":76,"column":8,"endLine":82,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"routePacket","argumentNames":["this","pkt"]}

function jacdac_JACDAC_routePacket__P71728_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_routePacket__P71728, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDService_handlePacket__P71489(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDService__C71484_VT)) failedCast(r0);
    r0 = 0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDService_handlePacket__P71489.info = {"start":1489,"length":77,"line":59,"column":8,"endLine":61,"endColumn":9,"fileName":"pxt_modules/jacdac/service.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function jacdac_JDService_handlePacket__P71489_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDService_handlePacket__P71489, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDControlService_routePacket__P71614(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.device___74799 = undefined;
    s.crc___74830 = undefined;
    s.crcCheck___74835 = undefined;
    s.host_service_number___74845 = undefined;
    s.broadcast___74865 = undefined;
    s.broadcast_class___74869 = undefined;
    s.service___74871 = undefined;
    s.unnamed112___U7 = undefined;
    s.unnamed113___U8 = undefined;
    s.service___74909 = undefined;
    s.unnamed114___U10 = undefined;
    s.unnamed115___U11 = undefined;
    s.service___74931 = undefined;
    s.unnamed116___U13 = undefined;
    s.unnamed117___U14 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 255);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 56; continue; }
  case 1:
  case 2:
    s.device___74799 = (null);
    r0 = s.arg1.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_2, 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 255);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_3 = jacdac_JDDeviceManager_getRemoteDeviceUnique__P71705_mk(s);
    r0 = s.arg0.fields["deviceManager"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = 255;
    s.tmp_4 = jacdac_JDPacket_udidh__P71767_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.pc = 58; return s.tmp_4;
  case 58:
    r0 = s.retval;
    s.tmp_3.arg2 = r0;
    s.tmp_5 = jacdac_JDPacket_udidl__P71768_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.pc = 59; return s.tmp_5;
  case 59:
    r0 = s.retval;
    s.tmp_3.arg3 = r0;
    s.pc = 57; return s.tmp_3;
  case 57:
    r0 = s.retval;
    s.device___74799 = (r0);
    { step = 8; continue; }
  case 3:
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 4:
    r0 = s.arg1.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_2, 2);
    s.tmp_1 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_3 = r0;
    r0 = (s.tmp_1 == s.tmp_3);
  case 5:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 6; continue; }
    r0 = s.arg0.fields["device"];
    s.device___74799 = (r0);
    { step = 7; continue; }
  case 6:
    s.tmp_0 = jacdac_JDControlService_getRemoteDevice__P71613_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = s.arg1.fields["_buffer"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_1, 2);
    s.tmp_0.arg1 = r0;
    s.pc = 60; return s.tmp_0;
  case 60:
    r0 = s.retval;
    s.device___74799 = (r0);
  case 7:
  case 8:
    s.tmp_0 = jacdac_jd_crc__P71632_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_0.arg1 = s.device___74799;
    s.pc = 61; return s.tmp_0;
  case 61:
    r0 = s.retval;
    s.crc___74830 = (r0);
    s.tmp_0 = r0 = s.crc___74830;
    s.tmp_2 = jacdac_JDPacket_crc__P71763_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.pc = 62; return s.tmp_2;
  case 62:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0 == s.tmp_1);
    s.crcCheck___74835 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.crcCheck___74835);
    if (!r0) { step = 54; continue; }
    r0 = pxsim_numops_toBoolDecr(s.device___74799);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    s.tmp_2 = jacdac_JDControlService__C71601_v2_2_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_JDControlService__C71601_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.handlePacket;
    s.pc = 63; return s.tmp_2;
  case 63:
    r0 = s.retval;
    { step = 53; continue; }
  case 9:
    s.host_service_number___74845 = (-1);
    r0 = s.device___74799.fields["servicemap_bitmsk"];
    s.tmp_1 = r0;
    r0 = s.arg1.fields["_buffer"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_6, 1);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 & 240);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 >> 4);
    s.tmp_3 = r0;
    r0 = (1 << s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 & s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = s.device___74799.fields["broadcast_servicemap"];
    s.tmp_7 = r0;
    r0 = s.arg1.fields["_buffer"];
    s.tmp_11 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_11, 1);
    s.tmp_10 = r0;
    r0 = (s.tmp_10 & 240);
    s.tmp_9 = r0;
    r0 = (s.tmp_9 >> 4);
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_7, s.tmp_8);
    s.host_service_number___74845 = (r0);
    r0 = s.arg0.fields["device"];
    s.device___74799 = (r0);
  case 10:
  case 11:
    r0 = (s.host_service_number___74845 >= 0);
    s.broadcast___74865 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.broadcast___74865);
    if (!r0) { step = 36; continue; }
    s.broadcast_class___74869 = (0);
    s.service___74871 = (undefined);
    s.tmp_0 = jacdac_JACDAC_services__P71721_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 65; return s.tmp_1;
  case 65:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.pc = 64; return s.tmp_0;
  case 64:
    r0 = s.retval;
    s.unnamed112___U7 = (r0);
    s.unnamed113___U8 = (0);
  case 12:
    s.tmp_0 = r0 = s.unnamed113___U8;
    r0 = pxsim_Array__length(s.unnamed112___U7);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 24; continue; }
    r0 = pxsim_Array__getAt(s.unnamed112___U7, s.unnamed113___U8);
    s.service___74871 = (r0);
    r0 = s.service___74871.fields["device"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 13; continue; }
    r0 = s.tmp_2;
    { step = 14; continue; }
  case 13:
    r0 = s.service___74871.fields["_mode"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == 1);
  case 14:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (!r0) { step = 15; continue; }
    r0 = s.tmp_6;
    { step = 16; continue; }
  case 15:
    r0 = s.service___74871.fields["_mode"];
    s.tmp_7 = r0;
    r0 = (s.tmp_7 == 4);
  case 16:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_8);
    if (!r0) { step = 17; continue; }
    { step = 23; continue; }
  case 17:
  case 18:
    r0 = s.service___74871.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_10 = r0;
    r0 = s.device___74799.fields["device_address"];
    s.tmp_11 = r0;
    r0 = (s.tmp_10 == s.tmp_11);
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBool(s.tmp_9);
    if (r0) { step = 19; continue; }
    r0 = s.tmp_9;
    { step = 20; continue; }
  case 19:
    r0 = s.service___74871.fields["service_number"];
    s.tmp_12 = r0;
    r0 = (s.tmp_12 == s.host_service_number___74845);
  case 20:
    // jmp value (already in r0)
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_13);
    if (!r0) { step = 21; continue; }
    s.tmp_14 = jacdac_options_log__P71814_mk(s);
    r0 = s.service___74871.fields["_service_class"];
    s.tmp_16 = r0;
    if ((s.tmp_16) && (s.tmp_16).vtable) {
    setupResume(s, 67);
    pxsim_String__stringConv(s.tmp_16);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_16) + ""; }
  case 67:
    r0 = s.retval;
    s.tmp_15 = r0;
    r0 = pxsim_String__concat("BROADCAST MATCH CL:", s.tmp_15);
    s.tmp_14.arg0 = r0;
    s.pc = 66; return s.tmp_14;
  case 66:
    r0 = s.retval;
    r0 = s.service___74871.fields["_service_class"];
    s.broadcast_class___74869 = (r0);
    { step = 24; continue; }
  case 21:
  case 22:
  case 23:
    r0 = (s.unnamed113___U8 + 1);
    s.unnamed113___U8 = (r0);
    { step = 12; continue; }
  case 24:
    s.unnamed112___U7 = (undefined);
    s.service___74909 = (undefined);
    s.tmp_0 = jacdac_JACDAC_services__P71721_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 69; return s.tmp_1;
  case 69:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.pc = 68; return s.tmp_0;
  case 68:
    r0 = s.retval;
    s.unnamed114___U10 = (r0);
    s.unnamed115___U11 = (0);
  case 25:
    s.tmp_0 = r0 = s.unnamed115___U11;
    r0 = pxsim_Array__length(s.unnamed114___U10);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 35; continue; }
    r0 = pxsim_Array__getAt(s.unnamed114___U10, s.unnamed115___U11);
    s.service___74909 = (r0);
    r0 = s.service___74909.fields["device"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 26; continue; }
    r0 = s.tmp_2;
    { step = 27; continue; }
  case 26:
    r0 = s.service___74909.fields["_mode"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 != 3);
  case 27:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 28; continue; }
    { step = 34; continue; }
  case 28:
  case 29:
    r0 = s.service___74909.fields["_service_class"];
    s.tmp_8 = r0;
    r0 = (s.tmp_8 == s.broadcast_class___74869);
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 32; continue; }
    s.tmp_11 = jacdac_JDService__C71484_v2_2_mk(s);
    s.tmp_11.arg0 = s.service___74909;
    s.tmp_11.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_11.arg0, jacdac_JDService__C71484_VT)) failedCast(s.tmp_11.arg0);
    s.tmp_11.fn = s.tmp_11.arg0.vtable.methods.handlePacket;
    s.pc = 70; return s.tmp_11;
  case 70:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = (s.tmp_10 == 0);
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    if (!r0) { step = 30; continue; }
    { step = 35; continue; }
  case 30:
  case 31:
  case 32:
  case 33:
  case 34:
    r0 = (s.unnamed115___U11 + 1);
    s.unnamed115___U11 = (r0);
    { step = 25; continue; }
  case 35:
    s.unnamed114___U10 = (undefined);
    { step = 52; continue; }
  case 36:
    s.service___74931 = (undefined);
    s.tmp_0 = jacdac_JACDAC_services__P71721_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 72; return s.tmp_1;
  case 72:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.pc = 71; return s.tmp_0;
  case 71:
    r0 = s.retval;
    s.unnamed116___U13 = (r0);
    s.unnamed117___U14 = (0);
  case 37:
    s.tmp_0 = r0 = s.unnamed117___U14;
    r0 = pxsim_Array__length(s.unnamed116___U13);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 51; continue; }
    r0 = pxsim_Array__getAt(s.unnamed116___U13, s.unnamed117___U14);
    s.service___74931 = (r0);
    r0 = s.service___74931.fields["device"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 38; continue; }
    r0 = s.tmp_2;
    { step = 39; continue; }
  case 38:
    r0 = s.service___74931.fields["_mode"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == 4);
  case 39:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 40; continue; }
    { step = 50; continue; }
  case 40:
  case 41:
    r0 = s.service___74931.fields["device"];
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBool(s.tmp_7);
    if (r0) { step = 42; continue; }
    r0 = s.tmp_7;
    { step = 43; continue; }
  case 42:
    r0 = s.service___74931.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_8 = r0;
    r0 = s.device___74799.fields["device_address"];
    s.tmp_9 = r0;
    r0 = (s.tmp_8 == s.tmp_9);
  case 43:
    // jmp value (already in r0)
    s.tmp_10 = r0;
    r0 = pxsim_numops_toBool(s.tmp_10);
    if (r0) { step = 44; continue; }
    r0 = s.tmp_10;
    { step = 45; continue; }
  case 44:
    r0 = s.service___74931.fields["service_number"];
    s.tmp_11 = r0;
    r0 = s.arg1.fields["_buffer"];
    s.tmp_15 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_15, 1);
    s.tmp_14 = r0;
    r0 = (s.tmp_14 & 240);
    s.tmp_13 = r0;
    r0 = (s.tmp_13 >> 4);
    s.tmp_12 = r0;
    r0 = (s.tmp_11 == s.tmp_12);
  case 45:
    // jmp value (already in r0)
    s.tmp_16 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_16);
    if (!r0) { step = 48; continue; }
    s.tmp_19 = jacdac_JDService__C71484_v2_2_mk(s);
    s.tmp_19.arg0 = s.service___74931;
    s.tmp_19.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_19.arg0, jacdac_JDService__C71484_VT)) failedCast(s.tmp_19.arg0);
    s.tmp_19.fn = s.tmp_19.arg0.vtable.methods.handlePacket;
    s.pc = 73; return s.tmp_19;
  case 73:
    r0 = s.retval;
    s.tmp_18 = r0;
    r0 = (s.tmp_18 == 0);
    s.tmp_17 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_17);
    if (!r0) { step = 46; continue; }
    { step = 51; continue; }
  case 46:
  case 47:
  case 48:
  case 49:
  case 50:
    r0 = (s.unnamed117___U14 + 1);
    s.unnamed117___U14 = (r0);
    { step = 37; continue; }
  case 51:
    s.unnamed116___U13 = (undefined);
  case 52:
  case 53:
  case 54:
  case 55:
  case 56:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_routePacket__P71614.info = {"start":9381,"length":3856,"line":240,"column":8,"endLine":320,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"routePacket","argumentNames":["this","pkt"]}

function jacdac_JDControlService_routePacket__P71614_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_routePacket__P71614, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  device___74799: undefined,
  crc___74830: undefined,
  crcCheck___74835: undefined,
  host_service_number___74845: undefined,
  broadcast___74865: undefined,
  broadcast_class___74869: undefined,
  service___74871: undefined,
  unnamed112___U7: undefined,
  unnamed113___U8: undefined,
  service___74909: undefined,
  unnamed114___U10: undefined,
  unnamed115___U11: undefined,
  service___74931: undefined,
  unnamed116___U13: undefined,
  unnamed117___U14: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDControlService_handlePacket__P71615(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.cp___74987 = undefined;
    s.rejectCP___75052 = undefined;
    s.remoteDevice___75125 = undefined;
    s.dataPointer___75142 = undefined;
    s.service_number___75145 = undefined;
    s.dataIdx___75146 = undefined;
    s.serviceInfo___75152 = undefined;
    s.current___75162 = undefined;
    s.unnamed118___U8 = undefined;
    s.unnamed119___U9 = undefined;
    s.class_check___75169 = undefined;
    s.address_check___75179 = undefined;
    s.serial_check___75191 = undefined;
    s.broadcast_override___75205 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    r0 = s.arg1.fields["_buffer"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_4, 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 240);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 >> 4);
    s.tmp_1 = r0;
    r0 = s.arg0.fields["rngService"];
    r0 = r0.fields["service_number"];
    s.tmp_5 = r0;
    r0 = (s.tmp_1 == s.tmp_5);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_6 = jacdac_JDService__C71484_v2_2_mk(s);
    r0 = s.arg0.fields["rngService"];
    s.tmp_6.arg0 = r0;
    s.tmp_6.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_6.arg0, jacdac_JDService__C71484_VT)) failedCast(s.tmp_6.arg0);
    s.tmp_6.fn = s.tmp_6.arg0.vtable.methods.handlePacket;
    s.pc = 85; return s.tmp_6;
  case 85:
    r0 = s.retval;
    r0 = 0;
    { step = 84; continue; }
  case 1:
  case 2:
    r0 = s.arg1.fields["_buffer"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_4, 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 240);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 >> 4);
    s.tmp_1 = r0;
    r0 = s.arg0.fields["configurationService"];
    r0 = r0.fields["service_number"];
    s.tmp_5 = r0;
    r0 = (s.tmp_1 == s.tmp_5);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_6 = jacdac_JDConfigurationService__C71503_v2_2_mk(s);
    r0 = s.arg0.fields["configurationService"];
    s.tmp_6.arg0 = r0;
    s.tmp_6.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_6.arg0, jacdac_JDConfigurationService__C71503_VT)) failedCast(s.tmp_6.arg0);
    s.tmp_6.fn = s.tmp_6.arg0.vtable.methods.handlePacket;
    s.pc = 86; return s.tmp_6;
  case 86:
    r0 = s.retval;
    r0 = 0;
    { step = 84; continue; }
  case 3:
  case 4:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDControlPacket__C71780_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDControlPacket_constructor__P71788_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.pc = 87; return s.tmp_1;
  case 87:
    r0 = s.retval;
    s.cp___74987 = (s.tmp_0);
    r0 = s.arg0.fields["status"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 12);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 25; continue; }
    r0 = s.cp___74987.fields["device_address"];
    s.tmp_3 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_4 = r0;
    r0 = (s.tmp_3 > s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 5; continue; }
    r0 = s.tmp_2;
    { step = 6; continue; }
  case 5:
    r0 = s.cp___74987.fields["device_address"];
    s.tmp_5 = r0;
    r0 = s.arg0.fields["nextAddress"];
    s.tmp_6 = r0;
    r0 = (s.tmp_5 < s.tmp_6);
  case 6:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 7; continue; }
    r0 = s.cp___74987.fields["device_address"];
    s.tmp_8 = r0;
    r0 = (s.arg0).fields["nextAddress"] = (s.tmp_8);
  case 7:
  case 8:
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_1 = r0;
    r0 = s.cp___74987.fields["device_address"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 23; continue; }
    r0 = s.arg0.fields["device"];
    s.tmp_5 = r0;
    r0 = s.tmp_5.fields["unique_device_identifier"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_6, 11, 0);
    s.tmp_4 = r0;
    r0 = s.cp___74987.fields["unique_device_identifier"];
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_8, 11, 0);
    s.tmp_7 = r0;
    r0 = (s.tmp_4 == s.tmp_7);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (r0) { step = 9; continue; }
    r0 = s.tmp_3;
    { step = 10; continue; }
  case 9:
    r0 = s.arg0.fields["device"];
    s.tmp_10 = r0;
    r0 = s.tmp_10.fields["unique_device_identifier"];
    s.tmp_11 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_11, 11, 4);
    s.tmp_9 = r0;
    r0 = s.cp___74987.fields["unique_device_identifier"];
    s.tmp_13 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_13, 11, 4);
    s.tmp_12 = r0;
    r0 = (s.tmp_9 == s.tmp_12);
  case 10:
    // jmp value (already in r0)
    s.tmp_14 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_14);
    s.tmp_16 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_16);
    s.tmp_15 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_15);
    if (!r0) { step = 17; continue; }
    r0 = s.cp___74987.fields["device_flags"];
    s.tmp_18 = r0;
    r0 = (s.tmp_18 & 2);
    s.tmp_17 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_17);
    if (!r0) { step = 15; continue; }
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_flags"];
    s.tmp_20 = r0;
    r0 = (s.tmp_20 & 2);
    s.tmp_19 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_19);
    if (!r0) { step = 11; continue; }
    r0 = s.arg0.fields["device"];
    s.tmp_21 = r0;
    r0 = (s.tmp_21).fields["rolling_counter"] = (0);
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    s.tmp_2 = jacdac_random__P71750_mk(s);
    s.tmp_2.arg0 = 1;
    s.tmp_2.arg1 = 254;
    s.pc = 88; return s.tmp_2;
  case 88:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["device_address"] = (s.tmp_1);
    { step = 14; continue; }
  case 11:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDControlPacket__C71780_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDControlPacket_constructor__P71788_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = undefined;
    s.pc = 89; return s.tmp_1;
  case 89:
    r0 = s.retval;
    s.rejectCP___75052 = (s.tmp_0);
    r0 = s.cp___74987.fields["device_address"];
    s.tmp_0 = r0;
    r0 = (s.rejectCP___75052).fields["device_address"] = (s.tmp_0);
    r0 = s.arg0.fields["nextAddress"];
    s.tmp_1 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 != s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
    s.tmp_3 = r0 = s.rejectCP___75052;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_5 = r0;
    s.tmp_7 = jacdac_random__P71750_mk(s);
    s.tmp_7.arg0 = 1;
    r0 = s.arg0.fields["nextAddress"];
    s.tmp_8 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_9 = r0;
    r0 = (s.tmp_8 - s.tmp_9);
    s.tmp_7.arg1 = r0;
    s.pc = 90; return s.tmp_7;
  case 90:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = (s.tmp_5 + s.tmp_6);
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["device_address"] = (s.tmp_4);
  case 12:
  case 13:
    r0 = s.cp___74987.fields["unique_device_identifier"];
    s.tmp_0 = r0;
    r0 = (s.rejectCP___75052).fields["unique_device_identifier"] = (s.tmp_0);
    s.tmp_0 = r0 = s.rejectCP___75052;
    r0 = s.cp___74987.fields["device_flags"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["device_flags"] = (s.tmp_1);
    s.tmp_0 = jacdac_JDControlService__C71601_v3_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDControlPacket_getBuffer__P71781_mk(s);
    s.tmp_1.arg0 = s.rejectCP___75052;
    s.pc = 92; return s.tmp_1;
  case 92:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_JDControlService__C71601_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.send;
    s.pc = 91; return s.tmp_0;
  case 91:
    r0 = s.retval;
    s.tmp_0 = jacdac_options_log__P71814_mk(s);
    s.tmp_0.arg0 = "ASK OTHER TO REASSIGN";
    s.pc = 93; return s.tmp_0;
  case 93:
    r0 = s.retval;
  case 14:
    r0 = 0;
    { step = 84; continue; }
  case 15:
  case 16:
    { step = 22; continue; }
  case 17:
    r0 = s.cp___74987.fields["device_flags"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 20; continue; }
    r0 = s.arg0.fields["device"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2).fields["rolling_counter"] = (0);
    r0 = s.cp___74987.fields["device_address"];
    s.tmp_1 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 != s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
    r0 = s.arg0.fields["device"];
    s.tmp_3 = r0;
    r0 = s.cp___74987.fields["device_address"];
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["device_address"] = (s.tmp_4);
    { step = 19; continue; }
  case 18:
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    s.tmp_2 = jacdac_random__P71750_mk(s);
    s.tmp_2.arg0 = 1;
    s.tmp_2.arg1 = 254;
    s.pc = 94; return s.tmp_2;
  case 94:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["device_address"] = (s.tmp_1);
  case 19:
    r0 = 0;
    { step = 84; continue; }
  case 20:
  case 21:
  case 22:
  case 23:
  case 24:
  case 25:
  case 26:
    r0 = s.cp___74987.fields["device_flags"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
    r0 = 0;
    { step = 84; continue; }
  case 27:
  case 28:
    s.tmp_2 = jacdac_JDDeviceManager_getRemoteDeviceUnique__P71705_mk(s);
    r0 = s.arg0.fields["deviceManager"];
    s.tmp_2.arg0 = r0;
    r0 = s.cp___74987.fields["device_address"];
    s.tmp_2.arg1 = r0;
    r0 = s.cp___74987.fields["unique_device_identifier"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 11, 4);
    s.tmp_2.arg2 = r0;
    r0 = s.cp___74987.fields["unique_device_identifier"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_4, 11, 0);
    s.tmp_2.arg3 = r0;
    s.pc = 95; return s.tmp_2;
  case 95:
    r0 = s.retval;
    s.remoteDevice___75125 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.remoteDevice___75125);
    if (!r0) { step = 29; continue; }
    s.tmp_0 = jacdac_JDDeviceManager_updateDevice__P71707_mk(s);
    r0 = s.arg0.fields["deviceManager"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.cp___74987;
    r0 = s.arg1.fields["_buffer"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_1, 259);
    s.tmp_0.arg2 = r0;
    s.pc = 96; return s.tmp_0;
  case 96:
    r0 = s.retval;
  case 29:
  case 30:
    r0 = s.cp___74987.fields["data"];
    s.dataPointer___75142 = (r0);
    s.service_number___75145 = (0);
    s.dataIdx___75146 = (0);
  case 31:
    s.tmp_1 = r0 = s.dataIdx___75146;
    r0 = pxsim.BufferMethods.length(s.dataPointer___75142);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 83; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDServiceInformation__C71800_VT);
    s.tmp_3 = r0;
    s.tmp_4 = jacdac_JDServiceInformation_constructor__P71802_mk(s);
    s.tmp_4.arg0 = s.tmp_3;
    s.tmp_5 = r0 = s.dataPointer___75142;
    s.tmp_6 = r0 = s.dataIdx___75146;
    r0 = pxsim.BufferMethods.length(s.dataPointer___75142);
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_5, s.tmp_6, s.tmp_7);
    s.tmp_4.arg1 = r0;
    s.pc = 97; return s.tmp_4;
  case 97:
    r0 = s.retval;
    s.serviceInfo___75152 = (s.tmp_3);
    s.current___75162 = (undefined);
    s.tmp_0 = jacdac_JACDAC_services__P71721_mk(s);
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 99; return s.tmp_1;
  case 99:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.pc = 98; return s.tmp_0;
  case 98:
    r0 = s.retval;
    s.unnamed118___U8 = (r0);
    s.unnamed119___U9 = (0);
  case 32:
    s.tmp_0 = r0 = s.unnamed119___U9;
    r0 = pxsim_Array__length(s.unnamed118___U8);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 82; continue; }
    r0 = pxsim_Array__getAt(s.unnamed118___U8, s.unnamed119___U9);
    s.current___75162 = (r0);
    r0 = s.current___75162.fields["_mode"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 4);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 33; continue; }
    { step = 81; continue; }
  case 33:
  case 34:
    r0 = s.current___75162.fields["_service_class"];
    s.tmp_4 = r0;
    r0 = s.serviceInfo___75152.fields["service_class"];
    s.tmp_5 = r0;
    r0 = (s.tmp_4 == s.tmp_5);
    s.class_check___75169 = (r0);
    r0 = s.current___75162.fields["status"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 57; continue; }
    r0 = s.current___75162.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_3 = r0;
    r0 = s.cp___74987.fields["device_address"];
    s.tmp_4 = r0;
    r0 = (s.tmp_3 == s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 35; continue; }
    r0 = s.tmp_2;
    { step = 36; continue; }
  case 35:
    r0 = s.current___75162.fields["service_number"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == s.service_number___75145);
  case 36:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    s.address_check___75179 = (s.tmp_6);
    r0 = s.cp___74987.fields["unique_device_identifier"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 11, 0);
    s.tmp_1 = r0;
    r0 = s.current___75162.fields["device"];
    s.tmp_4 = r0;
    r0 = s.tmp_4.fields["unique_device_identifier"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_5, 11, 0);
    s.tmp_3 = r0;
    r0 = (s.tmp_1 == s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 37; continue; }
    r0 = s.tmp_0;
    { step = 38; continue; }
  case 37:
    r0 = s.cp___74987.fields["unique_device_identifier"];
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_7, 11, 4);
    s.tmp_6 = r0;
    r0 = s.current___75162.fields["device"];
    s.tmp_9 = r0;
    r0 = s.tmp_9.fields["unique_device_identifier"];
    s.tmp_10 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_10, 11, 4);
    s.tmp_8 = r0;
    r0 = (s.tmp_6 == s.tmp_8);
  case 38:
    // jmp value (already in r0)
    s.tmp_11 = r0;
    s.serial_check___75191 = (s.tmp_11);
    r0 = s.current___75162.fields["_mode"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 3);
    s.broadcast_override___75205 = (r0);
    s.tmp_0 = r0 = s.address_check___75179;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 39; continue; }
    r0 = s.tmp_0;
    { step = 40; continue; }
  case 39:
    r0 = s.serial_check___75191;
  case 40:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 41; continue; }
    r0 = s.tmp_1;
    { step = 42; continue; }
  case 41:
    r0 = s.class_check___75169;
  case 42:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 43; continue; }
    r0 = s.tmp_2;
    { step = 46; continue; }
  case 43:
    s.tmp_3 = r0 = s.class_check___75169;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (r0) { step = 44; continue; }
    r0 = s.tmp_3;
    { step = 45; continue; }
  case 44:
    r0 = s.broadcast_override___75205;
  case 45:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
  case 46:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 55; continue; }
    s.tmp_6 = r0 = s.broadcast_override___75205;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (r0) { step = 47; continue; }
    r0 = s.tmp_6;
    { step = 48; continue; }
  case 47:
    r0 = s.cp___74987.fields["device_address"];
    s.tmp_7 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_8 = r0;
    r0 = (s.tmp_7 != s.tmp_8);
  case 48:
    // jmp value (already in r0)
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    if (!r0) { step = 51; continue; }
    r0 = pxsim_numops_toBoolDecr(s.remoteDevice___75125);
    s.tmp_11 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_10);
    if (!r0) { step = 49; continue; }
    s.tmp_12 = jacdac_JDDeviceManager_addDevice__P71706_mk(s);
    r0 = s.arg0.fields["deviceManager"];
    s.tmp_12.arg0 = r0;
    s.tmp_12.arg1 = s.cp___74987;
    r0 = s.arg1.fields["_buffer"];
    s.tmp_13 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_13, 259);
    s.tmp_12.arg2 = r0;
    s.pc = 100; return s.tmp_12;
  case 100:
    r0 = s.retval;
    s.remoteDevice___75125 = (r0);
  case 49:
  case 50:
    s.tmp_0 = r0 = s.remoteDevice___75125;
    r0 = s.tmp_0.fields["servicemap_bitmsk"];
    s.tmp_2 = r0;
    r0 = (1 << s.service_number___75145);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 | s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["servicemap_bitmsk"] = (s.tmp_1);
    r0 = s.remoteDevice___75125.fields["broadcast_servicemap"];
    s.tmp_0 = r0;
    r0 = s.current___75162.fields["service_number"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_0, s.service_number___75145, s.tmp_1);
  case 51:
  case 52:
    s.tmp_2 = jacdac_JDService__C71484_v1_3_mk(s);
    s.tmp_2.arg0 = s.current___75162;
    s.tmp_2.arg1 = s.remoteDevice___75125;
    s.tmp_2.arg2 = s.serviceInfo___75152;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_JDService__C71484_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.handleServiceInformation;
    s.pc = 101; return s.tmp_2;
  case 101:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 53; continue; }
    s.tmp_3 = jacdac_options_log__P71814_mk(s);
    r0 = s.current___75162.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 103);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 103:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat("uS ABSORBED ", s.tmp_8);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 104);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 104:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_6, " ");
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 105);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 105:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = s.current___75162.fields["_service_class"];
    s.tmp_11 = r0;
    if ((s.tmp_11) && (s.tmp_11).vtable) {
    setupResume(s, 106);
    pxsim_String__stringConv(s.tmp_11);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_11) + ""; }
  case 106:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_10);
    s.tmp_3.arg0 = r0;
    s.pc = 102; return s.tmp_3;
  case 102:
    r0 = s.retval;
    { step = 82; continue; }
  case 53:
  case 54:
  case 55:
  case 56:
    { step = 80; continue; }
  case 57:
    s.tmp_0 = r0 = s.class_check___75169;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 58; continue; }
    r0 = s.tmp_0;
    { step = 59; continue; }
  case 58:
    r0 = s.current___75162.fields["_mode"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 1);
  case 59:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 78; continue; }
    r0 = s.current___75162.fields["requiredDevice"];
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 72; continue; }
    r0 = s.current___75162.fields["requiredDevice"];
    r0 = r0.fields["unique_device_identifier"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 60; continue; }
    r0 = s.tmp_4;
    { step = 61; continue; }
  case 60:
    r0 = s.current___75162.fields["requiredDevice"];
    r0 = r0.fields["unique_device_identifier"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_5);
  case 61:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (r0) { step = 62; continue; }
    r0 = s.tmp_6;
    { step = 65; continue; }
  case 62:
    s.tmp_9 = jacdac_JDRequiredDevice_udidl__P71791_mk(s);
    r0 = s.current___75162.fields["requiredDevice"];
    s.tmp_9.arg0 = r0;
    s.pc = 107; return s.tmp_9;
  case 107:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = s.cp___74987.fields["unique_device_identifier"];
    s.tmp_11 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_11, 11, 0);
    s.tmp_10 = r0;
    r0 = (s.tmp_8 == s.tmp_10);
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBool(s.tmp_7);
    if (r0) { step = 63; continue; }
    r0 = s.tmp_7;
    { step = 64; continue; }
  case 63:
    s.tmp_13 = jacdac_JDRequiredDevice_udidh__P71790_mk(s);
    r0 = s.current___75162.fields["requiredDevice"];
    s.tmp_13.arg0 = r0;
    s.pc = 108; return s.tmp_13;
  case 108:
    r0 = s.retval;
    s.tmp_12 = r0;
    r0 = s.cp___74987.fields["unique_device_identifier"];
    s.tmp_15 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_15, 11, 4);
    s.tmp_14 = r0;
    r0 = (s.tmp_12 == s.tmp_14);
  case 64:
    // jmp value (already in r0)
    s.tmp_16 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_16);
    s.tmp_17 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_17);
  case 65:
    // jmp value (already in r0)
    s.tmp_18 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_18);
    if (!r0) { step = 66; continue; }
    { step = 81; continue; }
  case 66:
  case 67:
    r0 = s.current___75162.fields["requiredDevice"];
    r0 = r0.fields["device_name"];
    s.tmp_19 = r0;
    r0 = pxsim_numops_toBool(s.tmp_19);
    if (r0) { step = 68; continue; }
    r0 = s.tmp_19;
    { step = 69; continue; }
  case 68:
    r0 = s.current___75162.fields["requiredDevice"];
    r0 = r0.fields["device_name"];
    s.tmp_20 = r0;
    s.tmp_22 = jacdac_JDControlPacket_device_name__P71785_mk(s);
    s.tmp_22.arg0 = s.cp___74987;
    s.pc = 109; return s.tmp_22;
  case 109:
    r0 = s.retval;
    s.tmp_21 = r0;
    r0 = (s.tmp_20 != s.tmp_21);
  case 69:
    // jmp value (already in r0)
    s.tmp_23 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_23);
    if (!r0) { step = 70; continue; }
    { step = 81; continue; }
  case 70:
  case 71:
  case 72:
  case 73:
    s.tmp_24 = jacdac_options_log__P71814_mk(s);
    r0 = s.current___75162.fields["_service_class"];
    s.tmp_26 = r0;
    if ((s.tmp_26) && (s.tmp_26).vtable) {
    setupResume(s, 111);
    pxsim_String__stringConv(s.tmp_26);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_26) + ""; }
  case 111:
    r0 = s.retval;
    s.tmp_25 = r0;
    r0 = pxsim_String__concat("FOUND NEW", s.tmp_25);
    s.tmp_24.arg0 = r0;
    s.pc = 110; return s.tmp_24;
  case 110:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDDeviceManager_addDevice__P71706_mk(s);
    r0 = s.arg0.fields["deviceManager"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.cp___74987;
    r0 = s.arg1.fields["_buffer"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_1, 259);
    s.tmp_0.arg2 = r0;
    s.pc = 112; return s.tmp_0;
  case 112:
    r0 = s.retval;
    s.remoteDevice___75125 = (r0);
    s.tmp_2 = jacdac_JDService__C71484_v1_3_mk(s);
    s.tmp_2.arg0 = s.current___75162;
    s.tmp_2.arg1 = s.remoteDevice___75125;
    s.tmp_2.arg2 = s.serviceInfo___75152;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_JDService__C71484_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.handleServiceInformation;
    s.pc = 113; return s.tmp_2;
  case 113:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 76; continue; }
    r0 = (s.current___75162).fields["device"] = (s.remoteDevice___75125);
    r0 = (s.current___75162).fields["service_number"] = (s.service_number___75145);
    s.tmp_0 = jacdac_JDService__hostConnected__P71492_mk(s);
    s.tmp_0.arg0 = s.current___75162;
    s.pc = 114; return s.tmp_0;
  case 114:
    r0 = s.retval;
    r0 = s.arg0.fields["onChange"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 74; continue; }
    s.tmp_1 = lambda_1_mk(s);
    r0 = s.arg0.fields["onChange"];
    s.tmp_1.argL = r0;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.pc = 115; return s.tmp_1;
  case 115:
    r0 = s.retval;
  case 74:
  case 75:
    { step = 82; continue; }
  case 76:
  case 77:
  case 78:
  case 79:
  case 80:
  case 81:
    r0 = (s.unnamed119___U9 + 1);
    s.unnamed119___U9 = (r0);
    { step = 32; continue; }
  case 82:
    s.unnamed118___U8 = (undefined);
    r0 = (s.service_number___75145 + 1);
    s.service_number___75145 = (r0);
    s.tmp_0 = r0 = s.dataIdx___75146;
    r0 = s.serviceInfo___75152.fields["advertisement_size"];
    s.tmp_2 = r0;
    r0 = (6 + s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.dataIdx___75146 = (r0);
    { step = 31; continue; }
  case 83:
    r0 = 0;
  case 84:
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_handlePacket__P71615.info = {"start":13247,"length":9459,"line":322,"column":8,"endLine":482,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function jacdac_JDControlService_handlePacket__P71615_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_handlePacket__P71615, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  tmp_21: undefined,
  tmp_22: undefined,
  tmp_23: undefined,
  tmp_24: undefined,
  tmp_25: undefined,
  tmp_26: undefined,
  cp___74987: undefined,
  rejectCP___75052: undefined,
  remoteDevice___75125: undefined,
  dataPointer___75142: undefined,
  service_number___75145: undefined,
  dataIdx___75146: undefined,
  serviceInfo___75152: undefined,
  current___75162: undefined,
  unnamed118___U8: undefined,
  unnamed119___U9: undefined,
  class_check___75169: undefined,
  address_check___75179: undefined,
  serial_check___75191: undefined,
  broadcast_override___75205: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDRequiredDevice_udidh__P71790(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDRequiredDevice__C71789_VT)) failedCast(r0);
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 11, 4);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDRequiredDevice_udidh__P71790.info = {"start":6828,"length":142,"line":190,"column":8,"endLine":192,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"udidh","argumentNames":["this"]}

function jacdac_JDRequiredDevice_udidh__P71790_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDRequiredDevice_udidh__P71790, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_JDRequiredDevice_udidl__P71791(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDRequiredDevice__C71789_VT)) failedCast(r0);
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 11, 0);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDRequiredDevice_udidl__P71791.info = {"start":6979,"length":142,"line":193,"column":8,"endLine":195,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"udidl","argumentNames":["this"]}

function jacdac_JDRequiredDevice_udidl__P71791_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDRequiredDevice_udidl__P71791, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_JDService_handleServiceInformation__P71488(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDService__C71484_VT)) failedCast(r0);
    r0 = 0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDService_handleServiceInformation__P71488.info = {"start":1352,"length":127,"line":55,"column":8,"endLine":57,"endColumn":9,"fileName":"pxt_modules/jacdac/service.ts","functionName":"handleServiceInformation","argumentNames":["this","device","serviceInfo"]}

function jacdac_JDService_handleServiceInformation__P71488_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDService_handleServiceInformation__P71488, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDDeviceManager_addDevice__P71706(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.dev___75389 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDeviceManager__C71702_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDDeviceManager_getRemoteDeviceUnique__P71705_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = s.arg1.fields["device_address"];
    s.tmp_0.arg1 = r0;
    r0 = s.arg1.fields["unique_device_identifier"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 11, 4);
    s.tmp_0.arg2 = r0;
    r0 = s.arg1.fields["unique_device_identifier"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 11, 0);
    s.tmp_0.arg3 = r0;
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.dev___75389 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.dev___75389);
    if (!r0) { step = 1; continue; }
    r0 = s.dev___75389;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDDevice__C71792_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDDevice_constructor__P71799_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg2;
    s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.dev___75389 = (s.tmp_0);
    r0 = s.arg0.fields["devices"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.dev___75389);
    r0 = s.dev___75389;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDeviceManager_addDevice__P71706.info = {"start":652,"length":391,"line":20,"column":8,"endLine":31,"endColumn":9,"fileName":"pxt_modules/jacdac/devicemanager.ts","functionName":"addDevice","argumentNames":["this","controlPacket","communicationRate"]}

function jacdac_JDDeviceManager_addDevice__P71706_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDeviceManager_addDevice__P71706, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  dev___75389: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDDeviceManager_updateDevice__P71707(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.dev___75413 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDeviceManager__C71702_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDDeviceManager_getRemoteDeviceUnique__P71705_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = s.arg1.fields["device_address"];
    s.tmp_0.arg1 = r0;
    r0 = s.arg1.fields["unique_device_identifier"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 11, 4);
    s.tmp_0.arg2 = r0;
    r0 = s.arg1.fields["unique_device_identifier"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 11, 0);
    s.tmp_0.arg3 = r0;
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.dev___75413 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.dev___75413);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = jacdac_JDDevice_update__P71794_mk(s);
    s.tmp_0.arg0 = s.dev___75413;
    s.tmp_0.arg1 = s.arg1;
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDeviceManager_updateDevice__P71707.info = {"start":1053,"length":278,"line":33,"column":8,"endLine":38,"endColumn":9,"fileName":"pxt_modules/jacdac/devicemanager.ts","functionName":"updateDevice","argumentNames":["this","controlPacket","communicationRate"]}

function jacdac_JDDeviceManager_updateDevice__P71707_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDeviceManager_updateDevice__P71707, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  dev___75413: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDControlPacket_udidh__P71782(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlPacket__C71780_VT)) failedCast(r0);
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 11, 4);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlPacket_udidh__P71782.info = {"start":5538,"length":109,"line":147,"column":8,"endLine":149,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"udidh","argumentNames":["this"]}

function jacdac_JDControlPacket_udidh__P71782_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlPacket_udidh__P71782, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDControlPacket_udidl__P71783(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlPacket__C71780_VT)) failedCast(r0);
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 11, 0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlPacket_udidl__P71783.info = {"start":5657,"length":109,"line":151,"column":8,"endLine":153,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"udidl","argumentNames":["this"]}

function jacdac_JDControlPacket_udidl__P71783_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlPacket_udidl__P71783, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDConfigurationService_handlePacket__P71506(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.cfg___75440 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConfigurationService__C71503_VT)) failedCast(r0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDConfigurationPacket__C71803_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDConfigurationPacket_constructor__P71805_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    s.cfg___75440 = (s.tmp_0);
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    r0 = s.cfg___75440.fields["device_address"];
    s.tmp_2 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["device_address"];
    s.tmp_3 = r0;
    r0 = (s.tmp_2 == s.tmp_3);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 11; continue; }
    r0 = s.cfg___75440.fields["request_type"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == 1);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_4;
    { step = 2; continue; }
  case 1:
    r0 = s.cfg___75440.fields["new_name"];
    s.tmp_6 = r0;
    r0 = pxsim_String_.length(s.tmp_6);
  case 2:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 5; continue; }
    s.tmp_8 = jacdac_JACDAC_setDeviceName__P71731_mk(s);
    s.tmp_9 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 17; return s.tmp_9;
  case 17:
    r0 = s.retval;
    s.tmp_8.arg0 = r0;
    r0 = s.cfg___75440.fields["new_name"];
    s.tmp_8.arg1 = r0;
    s.pc = 16; return s.tmp_8;
  case 16:
    r0 = s.retval;
    s.tmp_1 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 18; return s.tmp_1;
  case 18:
    r0 = s.retval;
    r0 = r0.fields["onNameRemotelyChanged"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = lambda_2_mk(s);
    s.tmp_3 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 20; return s.tmp_3;
  case 20:
    r0 = s.retval;
    r0 = r0.fields["onNameRemotelyChanged"];
    s.tmp_2.argL = r0;
    r0 = s.cfg___75440.fields["new_name"];
    s.tmp_2.arg0 = r0;
    setupLambda(s.tmp_2, s.tmp_2.argL);
    s.pc = 19; return s.tmp_2;
  case 19:
    r0 = s.retval;
  case 3:
  case 4:
  case 5:
  case 6:
    r0 = s.cfg___75440.fields["request_type"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 7:
    s.tmp_2 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 21; return s.tmp_2;
  case 21:
    r0 = s.retval;
    r0 = r0.fields["onIdentificationRequest"];
  case 8:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 9; continue; }
    s.tmp_4 = lambda_1_mk(s);
    s.tmp_5 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 23; return s.tmp_5;
  case 23:
    r0 = s.retval;
    r0 = r0.fields["onIdentificationRequest"];
    s.tmp_4.argL = r0;
    setupLambda(s.tmp_4, s.tmp_4.argL);
    s.pc = 22; return s.tmp_4;
  case 22:
    r0 = s.retval;
  case 9:
  case 10:
  case 11:
  case 12:
  case 13:
  case 14:
    r0 = 0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConfigurationService_handlePacket__P71506.info = {"start":791,"length":886,"line":25,"column":8,"endLine":46,"endColumn":9,"fileName":"pxt_modules/jacdac/configurationservice.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function jacdac_JDConfigurationService_handlePacket__P71506_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConfigurationService_handlePacket__P71506, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  cfg___75440: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDConfigurationPacket_constructor__P71805(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.buf___75486 = undefined;
    s.idx___75489 = undefined;
    s.nameLen___75508 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConfigurationPacket__C71803_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 3; continue; }
    s.tmp_0 = jacdac_JDPacket_data__P71773_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.buf___75486 = (r0);
    s.idx___75489 = (0);
    s.tmp_0 = r0 = s.idx___75489;
    r0 = (s.tmp_0 + 1);
    s.idx___75489 = (r0);
    s.tmp_1 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getUint8(s.buf___75486, s.tmp_0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["device_address"] = (s.tmp_2);
    s.tmp_0 = r0 = s.idx___75489;
    r0 = (s.tmp_0 + 1);
    s.idx___75489 = (r0);
    s.tmp_1 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getUint8(s.buf___75486, s.tmp_0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["request_type"] = (s.tmp_2);
    r0 = s.arg1.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_2, 3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = r0 = s.idx___75489;
    r0 = (s.tmp_3 + 1);
    s.idx___75489 = (r0);
    r0 = pxsim.BufferMethods.getUint8(s.buf___75486, s.tmp_3);
    s.nameLen___75508 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.slice(s.buf___75486, s.idx___75489, s.nameLen___75508);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["new_name"] = (s.tmp_1);
  case 1:
  case 2:
    { step = 4; continue; }
  case 3:
    r0 = (s.arg0).fields["device_address"] = (0);
    r0 = (s.arg0).fields["request_type"] = (-1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["new_name"] = (s.tmp_1);
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConfigurationPacket_constructor__P71805.info = {"start":11036,"length":636,"line":315,"column":8,"endLine":331,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"inline","argumentNames":["this","p"]}

function jacdac_JDConfigurationPacket_constructor__P71805_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConfigurationPacket_constructor__P71805, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  buf___75486: undefined,
  idx___75489: undefined,
  nameLen___75508: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDControlService_getRemoteDevice__P71613(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDDeviceManager_getRemoteDevice__P71704_mk(s);
    r0 = s.arg0.fields["deviceManager"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_getRemoteDevice__P71613.info = {"start":9240,"length":131,"line":236,"column":8,"endLine":238,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"getRemoteDevice","argumentNames":["this","device_address"]}

function jacdac_JDControlService_getRemoteDevice__P71613_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_getRemoteDevice__P71613, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDDeviceManager_getRemoteDevice__P71704(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDeviceManager__C71702_VT)) failedCast(r0);
    r0 = pxsim_pxtcore_mkAction(1, inline__P75542);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg1);
    s.tmp_1 = helpers_arrayFind__P71157_mk(s);
    r0 = s.arg0.fields["devices"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDeviceManager_getRemoteDevice__P71704.info = {"start":249,"length":157,"line":12,"column":8,"endLine":14,"endColumn":9,"fileName":"pxt_modules/jacdac/devicemanager.ts","functionName":"getRemoteDevice","argumentNames":["this","device_address"]}

function jacdac_JDDeviceManager_getRemoteDevice__P71704_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDeviceManager_getRemoteDevice__P71704, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function inline__P75542(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["device_address"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
inline__P75542.info = {"start":338,"length":56,"line":13,"column":37,"endLine":13,"endColumn":93,"fileName":"pxt_modules/jacdac/devicemanager.ts","functionName":"inline","argumentNames":["dev"]}

function inline__P75542_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P75542, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function helpers_arrayFind__P71157(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.len___75550 = undefined;
    s.i___75553 = undefined;
    s.v___75558 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.len___75550 = (r0);
    s.i___75553 = (0);
  case 1:
    r0 = (s.i___75553 < s.len___75550);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.arg0, s.i___75553);
    s.v___75558 = (r0);
    s.tmp_1 = lambda_3_mk(s);
    s.tmp_1.argL = s.arg1;
    s.tmp_1.arg0 = s.v___75558;
    s.tmp_1.arg1 = s.i___75553;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.v___75558;
    { step = 5; continue; }
  case 2:
  case 3:
    r0 = (s.i___75553 + 1);
    s.i___75553 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayFind__P71157.info = {"start":6160,"length":292,"line":211,"column":4,"endLine":218,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayFind","argumentNames":["arr","callbackfn"]}

function helpers_arrayFind__P71157_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayFind__P71157, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  len___75550: undefined,
  i___75553: undefined,
  v___75558: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_udidl__P71768(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_2, 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 255);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_buffer"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 11, 4);
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_udidl__P71768.info = {"start":1345,"length":185,"line":33,"column":8,"endLine":35,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"udidl","argumentNames":["this"]}

function jacdac_JDPacket_udidl__P71768_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_udidl__P71768, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_udidh__P71767(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_2, 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 255);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_buffer"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 11, 8);
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_udidh__P71767.info = {"start":1147,"length":189,"line":30,"column":8,"endLine":32,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"udidh","argumentNames":["this"]}

function jacdac_JDPacket_udidh__P71767_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_udidh__P71767, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function jacdac_JDDeviceManager_getRemoteDeviceUnique__P71705(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDeviceManager__C71702_VT)) failedCast(r0);
    r0 = pxsim_pxtcore_mkAction(3, inline__P75598);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg1);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.arg2);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 2, s.arg3);
    s.tmp_1 = helpers_arrayFind__P71157_mk(s);
    r0 = s.arg0.fields["devices"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDeviceManager_getRemoteDeviceUnique__P71705.info = {"start":416,"length":226,"line":16,"column":8,"endLine":18,"endColumn":9,"fileName":"pxt_modules/jacdac/devicemanager.ts","functionName":"getRemoteDeviceUnique","argumentNames":["this","device_address","udidh","udidl"]}

function jacdac_JDDeviceManager_getRemoteDeviceUnique__P71705_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDeviceManager_getRemoteDeviceUnique__P71705, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function inline__P75598(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["device_address"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.caps[0]);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 11, 4);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == s.caps[1]);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_4;
    { step = 4; continue; }
  case 3:
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_6, 11, 0);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == s.caps[2]);
  case 4:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
    return leave(s, r0)
  default: oops()
} } }
inline__P75598.info = {"start":541,"length":89,"line":17,"column":37,"endLine":17,"endColumn":126,"fileName":"pxt_modules/jacdac/devicemanager.ts","functionName":"inline","argumentNames":["dev"]}

function inline__P75598_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: inline__P75598, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
} }





function configStorage_setItem__P71471(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.idx___75622 = undefined;
    s.buf___75623 = undefined;
    s.valBuf___75637 = undefined;
    s.i___75641 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.configStorage.removeItem(s.arg0);
    { step = 4; continue; }
  case 1:
    s.idx___75622 = (0);
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 + 1);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.buf___75623 = (r0);
    s.tmp_0 = r0 = s.idx___75622;
    r0 = (s.tmp_0 + 1);
    s.idx___75622 = (r0);
    s.tmp_1 = r0 = s.buf___75623;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, s.tmp_0, s.tmp_2);
    r0 = pxsim.control.createBufferFromUTF8(s.arg1);
    s.valBuf___75637 = (r0);
    s.i___75641 = (0);
  case 2:
    s.tmp_1 = r0 = s.i___75641;
    r0 = pxsim.BufferMethods.length(s.valBuf___75637);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_3 = r0 = s.idx___75622;
    r0 = (s.tmp_3 + 1);
    s.idx___75622 = (r0);
    s.tmp_4 = r0 = s.buf___75623;
    r0 = pxsim.BufferMethods.getByte(s.valBuf___75637, s.i___75641);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_4, s.tmp_3, s.tmp_5);
    r0 = (s.i___75641 + 1);
    s.i___75641 = (r0);
    { step = 2; continue; }
  case 3:
    r0 = pxsim.configStorage.setBuffer(s.arg0, s.buf___75623);
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
configStorage_setItem__P71471.info = {"start":211,"length":491,"line":6,"column":4,"endLine":21,"endColumn":5,"fileName":"pxt_modules/core/keyvaluestorage.ts","functionName":"setItem","argumentNames":["key","value"]}

function configStorage_setItem__P71471_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: configStorage_setItem__P71471, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  idx___75622: undefined,
  buf___75623: undefined,
  valBuf___75637: undefined,
  i___75641: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JACDAC_setDeviceName__P71731(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDControlService_setDeviceName__P71616_mk(s);
    r0 = s.arg0.fields["_controlService"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_setDeviceName__P71731.info = {"start":2514,"length":99,"line":100,"column":8,"endLine":102,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"setDeviceName","argumentNames":["this","name"]}

function jacdac_JACDAC_setDeviceName__P71731_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_setDeviceName__P71731, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDControlService_setDeviceName__P71616(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDControlService__C71601_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg1;
    r0 = (s.arg0).fields["name"] = (s.tmp_0);
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDControlService_setDeviceName__P71616.info = {"start":22716,"length":83,"line":484,"column":8,"endLine":487,"endColumn":9,"fileName":"pxt_modules/jacdac/control.ts","functionName":"setDeviceName","argumentNames":["this","name"]}

function jacdac_JDControlService_setDeviceName__P71616_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDControlService_setDeviceName__P71616, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function configStorage_getItem__P71472(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.buf___75672 = undefined;
    s.idx___75679 = undefined;
    s.count___75680 = undefined;
    s.retBuf___75685 = undefined;
    s.i___75689 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.configStorage.getBuffer(s.arg0);
    s.buf___75672 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.buf___75672);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = undefined;
    { step = 5; continue; }
  case 1:
  case 2:
    s.idx___75679 = (0);
    s.tmp_0 = r0 = s.idx___75679;
    r0 = (s.tmp_0 + 1);
    s.idx___75679 = (r0);
    r0 = pxsim.BufferMethods.getByte(s.buf___75672, s.tmp_0);
    s.count___75680 = (r0);
    r0 = pxsim.control.createBuffer(s.count___75680);
    s.retBuf___75685 = (r0);
    s.i___75689 = (0);
  case 3:
    r0 = (s.i___75689 < s.count___75680);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_1 = r0 = s.idx___75679;
    r0 = (s.tmp_1 + 1);
    s.idx___75679 = (r0);
    s.tmp_2 = r0 = s.retBuf___75685;
    s.tmp_3 = r0 = s.i___75689;
    r0 = pxsim.BufferMethods.getByte(s.buf___75672, s.tmp_1);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_2, s.tmp_3, s.tmp_4);
    r0 = (s.i___75689 + 1);
    s.i___75689 = (r0);
    { step = 3; continue; }
  case 4:
    r0 = pxsim.BufferMethods.toString(s.retBuf___75685);
  case 5:
    return leave(s, r0)
  default: oops()
} } }
configStorage_getItem__P71472.info = {"start":825,"length":369,"line":27,"column":4,"endLine":41,"endColumn":5,"fileName":"pxt_modules/core/keyvaluestorage.ts","functionName":"getItem","argumentNames":["key"]}

function configStorage_getItem__P71472_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: configStorage_getItem__P71472, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  buf___75672: undefined,
  idx___75679: undefined,
  count___75680: undefined,
  retBuf___75685: undefined,
  i___75689: undefined,
  arg0: undefined,
} }





function jacdac_JACDAC_bus__P71720(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    r0 = (s.arg0).fields["_bus"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_bus__P71720.info = {"start":737,"length":70,"line":32,"column":8,"endLine":34,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"bus","argumentNames":["this","bus"]}

function jacdac_JACDAC_bus__P71720_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_bus__P71720, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JACDACBus_constructor__P71825(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDACBus__C71817_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDACBus_constructor__P71825.info = {"start":179,"length":25,"line":11,"column":8,"endLine":12,"endColumn":9,"fileName":"pxt_modules/jacdac/makecodejacdac.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_JACDACBus_constructor__P71825_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDACBus_constructor__P71825, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_RotaryEncoderClient_constructor__P72202(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_RotaryEncoderClient__C72198_VT)) failedCast(r0);
    s.tmp_0 = jacdac_SensorClient_constructor__P72035_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 2026;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_RotaryEncoderClient_constructor__P72202.info = {"start":110,"length":98,"line":3,"column":8,"endLine":5,"endColumn":9,"fileName":"rotaryencoderclient.ts","functionName":"inline","argumentNames":["this","name"]}

function jacdac_RotaryEncoderClient_constructor__P72202_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_RotaryEncoderClient_constructor__P72202, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_SensorClient_constructor__P72035(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorClient__C72023_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Client_constructor__P71939_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg2;
    s.tmp_0.arg3 = undefined;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.createBuffer(0);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_lastState"] = (s.tmp_1);
    r0 = (s.arg0).fields["_sensorState"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorClient_constructor__P72035.info = {"start":314,"length":201,"line":11,"column":8,"endLine":15,"endColumn":9,"fileName":"sensorclient.ts","functionName":"inline","argumentNames":["this","name","deviceClass"]}

function jacdac_SensorClient_constructor__P72035_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorClient_constructor__P72035, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Client_constructor__P71939(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C71932_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Service_constructor__P71925_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 1;
    s.tmp_0.arg3 = s.arg2;
    s.tmp_0.arg4 = s.arg3;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_constructor__P71939.info = {"start":3121,"length":174,"line":104,"column":8,"endLine":106,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"inline","argumentNames":["this","name","serviceClass","controlDataLength"]}

function jacdac_Client_constructor__P71939_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_constructor__P71939, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function Fx8__P71186(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 * 256);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 | 0);
    return leave(s, r0)
  default: oops()
} } }
Fx8__P71186.info = {"start":42,"length":68,"line":4,"column":0,"endLine":6,"endColumn":1,"fileName":"pxt_modules/base/fixed.ts","functionName":"Fx8","argumentNames":["v"]}

function Fx8__P71186_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Fx8__P71186, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDConsoleService_handlePacket__P71536(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.cpacket___75754 = undefined;
    s.device___75767 = undefined;
    s.deviceName___75773 = undefined;
    s.msg___75786 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConsoleService__C71530_VT)) failedCast(r0);
    r0 = s.arg0.fields["_consoleMode"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 0;
    { step = 19; continue; }
  case 1:
  case 2:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDConsolePacket__C71806_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac_JDConsolePacket_constructor__P71808_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    s.tmp_3.arg1 = s.arg1;
    s.pc = 20; return s.tmp_3;
  case 20:
    r0 = s.retval;
    s.cpacket___75754 = (s.tmp_2);
    r0 = s.cpacket___75754.fields["packetType"];
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 3:
    r0 = s.cpacket___75754.fields["priority"];
    s.tmp_2 = r0;
    r0 = s.arg0.fields["status"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 & 240);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 >> 4);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 < s.tmp_3);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = 0;
    { step = 19; continue; }
  case 4:
  case 5:
    s.tmp_6 = jacdac_JACDAC_getRemoteDevice__P71735_mk(s);
    s.tmp_7 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 22; return s.tmp_7;
  case 22:
    r0 = s.retval;
    s.tmp_6.arg0 = r0;
    r0 = s.arg1.fields["_buffer"];
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_8, 2);
    s.tmp_6.arg1 = r0;
    s.pc = 21; return s.tmp_6;
  case 21:
    r0 = s.retval;
    s.device___75767 = (r0);
    s.tmp_0 = r0 = s.device___75767;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_0;
    { step = 7; continue; }
  case 6:
    r0 = s.device___75767.fields["device_name"];
  case 7:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = s.device___75767.fields["device_name"];
    { step = 9; continue; }
  case 8:
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2 = r0;
    r0 = s.arg1.fields["_buffer"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_5, 2);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
  case 9:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    s.deviceName___75773 = (s.tmp_6);
    if ((s.deviceName___75773) && (s.deviceName___75773).vtable) {
    setupResume(s, 24);
    pxsim_String__stringConv(s.deviceName___75773);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.deviceName___75773) + ""; }
  case 24:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(":", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "> ");
    s.tmp_0 = r0;
    r0 = s.cpacket___75754.fields["message"];
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 25);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 25:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_3);
    s.msg___75786 = (r0);
    r0 = s.cpacket___75754.fields["priority"];
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 11; continue; }
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = s.tmp_0;
    { step = 14; continue; }
  case 10:
    s.tmp_1 = console_debug__P71326_mk(s);
    s.tmp_1.arg0 = s.msg___75786;
    s.pc = 26; return s.tmp_1;
  case 26:
    r0 = s.retval;
    { step = 14; continue; }
  case 11:
    s.tmp_0 = console_log__P71329_mk(s);
    s.tmp_0.arg0 = s.msg___75786;
    s.pc = 27; return s.tmp_0;
  case 27:
    r0 = s.retval;
    { step = 14; continue; }
  case 12:
    s.tmp_0 = console_warn__P71327_mk(s);
    s.tmp_0.arg0 = s.msg___75786;
    s.pc = 28; return s.tmp_0;
  case 28:
    r0 = s.retval;
    { step = 14; continue; }
  case 13:
    s.tmp_0 = console_error__P71328_mk(s);
    s.tmp_0.arg0 = s.msg___75786;
    s.pc = 29; return s.tmp_0;
  case 29:
    r0 = s.retval;
  case 14:
    r0 = s.arg0.fields["onMessageReceived"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
    s.tmp_1 = lambda_5_mk(s);
    r0 = s.arg0.fields["onMessageReceived"];
    s.tmp_1.argL = r0;
    r0 = s.cpacket___75754.fields["priority"];
    s.tmp_1.arg0 = r0;
    r0 = s.arg1.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getUint8(s.tmp_2, 2);
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = s.deviceName___75773;
    r0 = s.cpacket___75754.fields["message"];
    s.tmp_1.arg3 = r0;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.pc = 30; return s.tmp_1;
  case 30:
    r0 = s.retval;
  case 15:
  case 16:
    { step = 18; continue; }
  case 17:
  case 18:
    r0 = 0;
  case 19:
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConsoleService_handlePacket__P71536.info = {"start":3017,"length":1553,"line":85,"column":8,"endLine":115,"endColumn":9,"fileName":"pxt_modules/jacdac/consoleservice.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac_JDConsoleService_handlePacket__P71536_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConsoleService_handlePacket__P71536, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  cpacket___75754: undefined,
  device___75767: undefined,
  deviceName___75773: undefined,
  msg___75786: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function console_error__P71328(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P71325_mk(s);
    s.tmp_0.arg0 = 3;
    s.tmp_0.arg1 = s.arg0;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_error__P71328.info = {"start":1101,"length":85,"line":45,"column":4,"endLine":47,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"error","argumentNames":["text"]}

function console_error__P71328_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_error__P71328, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function console_warn__P71327(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P71325_mk(s);
    s.tmp_0.arg0 = 2;
    s.tmp_0.arg1 = s.arg0;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_warn__P71327.info = {"start":1009,"length":86,"line":41,"column":4,"endLine":43,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"warn","argumentNames":["text"]}

function console_warn__P71327_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_warn__P71327, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function console_debug__P71326(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P71325_mk(s);
    s.tmp_0.arg0 = 0;
    s.tmp_0.arg1 = s.arg0;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_debug__P71326.info = {"start":918,"length":85,"line":37,"column":4,"endLine":39,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"debug","argumentNames":["text"]}

function console_debug__P71326_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_debug__P71326, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JACDAC_getRemoteDevice__P71735(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDAC__C71718_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDControlService_getRemoteDevice__P71613_mk(s);
    r0 = s.arg0.fields["_controlService"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDAC_getRemoteDevice__P71735.info = {"start":3085,"length":134,"line":116,"column":8,"endLine":118,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"getRemoteDevice","argumentNames":["this","device_address"]}

function jacdac_JACDAC_getRemoteDevice__P71735_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDAC_getRemoteDevice__P71735, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDConsoleService_handleServiceInformation__P71535(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.data___75848 = undefined;
    s.consoleMode___75856 = undefined;
    s.priority___75861 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConsoleService__C71530_VT)) failedCast(r0);
    r0 = s.arg2.fields["data"];
    s.data___75848 = (r0);
    r0 = pxsim.BufferMethods.length(s.data___75848);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = -1;
    { step = 9; continue; }
  case 1:
  case 2:
    r0 = pxsim.BufferMethods.getUint8(s.data___75848, 0);
    s.consoleMode___75856 = (r0);
    r0 = pxsim.BufferMethods.getUint8(s.data___75848, 1);
    s.priority___75861 = (r0);
    r0 = (s.consoleMode___75856 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = s.arg0.fields["_consoleMode"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 != 1);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    s.tmp_3 = jacdac_JDConsoleService_consoleMode__P71533_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = 2;
    s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
  case 3:
  case 4:
    s.tmp_1 = r0 = s.priority___75861;
    r0 = s.arg0.fields["status"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 240);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 >> 4);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_5 = jacdac_JDConsoleService_minPriority__P71538_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.tmp_5.arg1 = s.priority___75861;
    s.pc = 11; return s.tmp_5;
  case 11:
    r0 = s.retval;
  case 5:
  case 6:
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_lastListenerTime"] = (s.tmp_1);
  case 7:
  case 8:
    r0 = 0;
  case 9:
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConsoleService_handleServiceInformation__P71535.info = {"start":2155,"length":852,"line":66,"column":8,"endLine":83,"endColumn":9,"fileName":"pxt_modules/jacdac/consoleservice.ts","functionName":"handleServiceInformation","argumentNames":["this","device","serviceInfo"]}

function jacdac_JDConsoleService_handleServiceInformation__P71535_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConsoleService_handleServiceInformation__P71535, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  data___75848: undefined,
  consoleMode___75856: undefined,
  priority___75861: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDConsoleService_addAdvertisementData__P71534(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.buf___75886 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConsoleService__C71530_VT)) failedCast(r0);
    r0 = pxsim.control.createBuffer(2);
    s.buf___75886 = (r0);
    s.tmp_0 = r0 = s.buf___75886;
    r0 = s.arg0.fields["_consoleMode"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_0, 0, s.tmp_1);
    s.tmp_0 = r0 = s.buf___75886;
    r0 = s.arg0.fields["status"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 240);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 >> 4);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setUint8(s.tmp_0, 1, s.tmp_1);
    r0 = s.buf___75886;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConsoleService_addAdvertisementData__P71534.info = {"start":1930,"length":215,"line":58,"column":8,"endLine":64,"endColumn":9,"fileName":"pxt_modules/jacdac/consoleservice.ts","functionName":"addAdvertisementData","argumentNames":["this"]}

function jacdac_JDConsoleService_addAdvertisementData__P71534_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConsoleService_addAdvertisementData__P71534, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  buf___75886: undefined,
  arg0: undefined,
} }





function jacdac_JACDACBus_isConnected__P71822(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDACBus__C71817_VT)) failedCast(r0);
    r0 = pxsim.jacdac.__physIsConnected();
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDACBus_isConnected__P71822.info = {"start":762,"length":64,"line":35,"column":8,"endLine":37,"endColumn":9,"fileName":"pxt_modules/jacdac/makecodejacdac.ts","functionName":"isConnected","argumentNames":["this"]}

function jacdac_JACDACBus_isConnected__P71822_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDACBus_isConnected__P71822, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JACDACBus_writeBuffer__P71821(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JACDACBus__C71817_VT)) failedCast(r0);
    r0 = pxsim.jacdac.__physSendPacket(s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JACDACBus_writeBuffer__P71821.info = {"start":685,"length":67,"line":31,"column":8,"endLine":33,"endColumn":9,"fileName":"pxt_modules/jacdac/makecodejacdac.ts","functionName":"writeBuffer","argumentNames":["this","b"]}

function jacdac_JACDACBus_writeBuffer__P71821_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JACDACBus_writeBuffer__P71821, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDConfigurationService_send__P71505(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDConfigurationService__C71503_VT)) failedCast(r0);
    s.tmp_1 = if_isConnected_1_mk(s);
    s.tmp_3 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = s.tmp_2.fields["_bus"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["isConnected"];
    if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["isConnected"]; }
    else { s.pc = 3; return s.tmp_1; }
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_4 = jacdac_JACDAC_write__P71741_mk(s);
    s.tmp_5 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 6; return s.tmp_5;
  case 6:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.arg1;
    r0 = s.arg0.fields["service_number"];
    s.tmp_4.arg2 = r0;
    s.tmp_4.arg3 = 0;
    s.tmp_4.arg4 = null;
    s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDConfigurationService_send__P71505.info = {"start":413,"length":166,"line":15,"column":8,"endLine":18,"endColumn":9,"fileName":"pxt_modules/jacdac/configurationservice.ts","functionName":"send","argumentNames":["this","buffer"]}

function jacdac_JDConfigurationService_send__P71505_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDConfigurationService_send__P71505, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDRNGService_send__P71760(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDRNGService__C71758_VT)) failedCast(r0);
    s.tmp_1 = if_isConnected_1_mk(s);
    s.tmp_3 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = s.tmp_2.fields["_bus"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["isConnected"];
    if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["isConnected"]; }
    else { s.pc = 3; return s.tmp_1; }
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_4 = jacdac_JACDAC_write__P71741_mk(s);
    s.tmp_5 = jacdac_JACDAC_instance__P71740_mk(s);
    s.pc = 6; return s.tmp_5;
  case 6:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.arg1;
    r0 = s.arg0.fields["service_number"];
    s.tmp_4.arg2 = r0;
    s.tmp_4.arg3 = 0;
    s.tmp_4.arg4 = null;
    s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDRNGService_send__P71760.info = {"start":235,"length":166,"line":9,"column":8,"endLine":12,"endColumn":9,"fileName":"pxt_modules/jacdac/rngservice.ts","functionName":"send","argumentNames":["this","buffer"]}

function jacdac_JDRNGService_send__P71760_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDRNGService_send__P71760, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDDummyBus_isConnected__P71717(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDummyBus__C71715_VT)) failedCast(r0);
    r0 = true;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDummyBus_isConnected__P71717.info = {"start":158,"length":50,"line":7,"column":8,"endLine":9,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"isConnected","argumentNames":["this"]}

function jacdac_JDDummyBus_isConnected__P71717_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDummyBus_isConnected__P71717, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JDDummyBus_writeBuffer__P71716(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDummyBus__C71715_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDummyBus_writeBuffer__P71716.info = {"start":112,"length":36,"line":4,"column":8,"endLine":5,"endColumn":9,"fileName":"pxt_modules/jacdac/jacdac.ts","functionName":"writeBuffer","argumentNames":["this","buf"]}

function jacdac_JDDummyBus_writeBuffer__P71716_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDummyBus_writeBuffer__P71716, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDDevice_toString__P71798(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.service_numbers___75933 = undefined;
    s.s___75935 = undefined;
    s.unnamed122___U2 = undefined;
    s.unnamed123___U3 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDevice__C71792_VT)) failedCast(r0);
    r0 = pxsim_String_.mkEmpty();
    s.service_numbers___75933 = (r0);
    s.s___75935 = (undefined);
    s.tmp_0 = jacdac_JDDevice_services__P71793_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.unnamed122___U2 = (r0);
    s.unnamed123___U3 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed123___U3;
    r0 = pxsim_Array__length(s.unnamed122___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed122___U2, s.unnamed123___U3);
    s.s___75935 = (r0);
    if ((s.service_numbers___75933) && (s.service_numbers___75933).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.service_numbers___75933);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.service_numbers___75933) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = s.s___75935.fields["service_class"];
    s.tmp_7 = r0;
    r0 = pxsim_numops.toString(s.tmp_7);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, " ");
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
    s.service_numbers___75933 = (r0);
    r0 = (s.unnamed123___U3 + 1);
    s.unnamed123___U3 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed122___U2 = (undefined);
    r0 = s.arg0.fields["device_name"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = s.arg0.fields["unique_device_identifier"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_1);
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_7 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_8);
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_6, " [");
    s.tmp_5 = r0;
    r0 = s.arg0.fields["device_address"];
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_9);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "]: ");
    s.tmp_3 = r0;
    if ((s.service_numbers___75933) && (s.service_numbers___75933).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.service_numbers___75933);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.service_numbers___75933) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_11);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDevice_toString__P71798.info = {"start":9242,"length":286,"line":260,"column":8,"endLine":266,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"toString","argumentNames":["this"]}

function jacdac_JDDevice_toString__P71798_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDevice_toString__P71798, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  service_numbers___75933: undefined,
  s___75935: undefined,
  unnamed122___U2: undefined,
  unnamed123___U3: undefined,
  arg0: undefined,
} }





function jacdac_JDDevice_services__P71793(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDDevice__C71792_VT)) failedCast(r0);
    r0 = s.arg0.fields["_services"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = helpers_arraySlice__P71160_mk(s);
    r0 = s.arg0.fields["_services"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    s.tmp_1.arg2 = undefined;
    s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_Array__mk();
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDDevice_services__P71793.info = {"start":8125,"length":116,"line":226,"column":8,"endLine":228,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"services","argumentNames":["this"]}

function jacdac_JDDevice_services__P71793_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDDevice_services__P71793, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_toString__P71778(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C71762_VT)) failedCast(r0);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_toString__P71778.info = {"start":2956,"length":71,"line":77,"column":8,"endLine":79,"endColumn":9,"fileName":"pxt_modules/jacdac/structs.ts","functionName":"toString","argumentNames":["this"]}

function jacdac_JDPacket_toString__P71778_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_toString__P71778, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_MessageBusService_handlePacket__P71972(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.data___75986 = undefined;
    s.id___75989 = undefined;
    s.value___75994 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_MessageBusService__C71968_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDPacket_data__P71773_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.data___75986 = (r0);
    r0 = pxsim.BufferMethods.getNumber(s.data___75986, 4, 0);
    s.id___75989 = (r0);
    r0 = pxsim.BufferMethods.getNumber(s.data___75986, 4, 2);
    s.value___75994 = (r0);
    r0 = (s.arg0).fields["suppressForwarding"] = (true);
    r0 = pxsim.control.raiseEvent(s.id___75989, s.value___75994);
    r0 = (s.arg0).fields["suppressForwarding"] = (false);
    r0 = 0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_MessageBusService_handlePacket__P71972.info = {"start":1030,"length":390,"line":31,"column":8,"endLine":39,"endColumn":9,"fileName":"pxt_modules/jacdac/messagebus.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac_MessageBusService_handlePacket__P71972_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_MessageBusService_handlePacket__P71972, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  data___75986: undefined,
  id___75989: undefined,
  value___75994: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_EventContext_constructor__P71371(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_EventContext__C71358_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["handlers"] = (s.tmp_1);
    r0 = (s.arg0).fields["framesInSample"] = (0);
    r0 = (s.arg0).fields["timeInSample"] = (0);
    r0 = (s.arg0).fields["deltaTimeMillis"] = (0);
    r0 = (s.arg0).fields["frameWorker"] = (0);
    r0 = (s.arg0).fields["idleCallbacks"] = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventContext_constructor__P71371.info = {"start":1733,"length":245,"line":58,"column":8,"endLine":65,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"inline","argumentNames":["this"]}

function control_EventContext_constructor__P71371_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventContext_constructor__P71371, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_SensorClient_handlePacket__P72031(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.data___76030 = undefined;
    s.command___76033 = undefined;
    s.state___76049 = undefined;
    s.changed___76055 = undefined;
    s.r___76062 = undefined;
    s.value___76082 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorClient__C72023_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDPacket_data__P71773_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.data___76030 = (r0);
    r0 = pxsim.BufferMethods.getNumber(s.data___76030, 2, 0);
    s.command___76033 = (r0);
    s.tmp_0 = jacdac_Service_log__P71921_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if ((s.command___76033) && (s.command___76033).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.command___76033);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.command___76033) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("vpkt ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    s.tmp_0 = r0 = s.command___76033;
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_0;
    { step = 7; continue; }
  case 1:
    r0 = pxsim.BufferMethods.slice(s.data___76030, 1, -1);
    s.state___76049 = (r0);
    s.tmp_2 = jacdac_bufferEqual__P71940_mk(s);
    r0 = s.arg0.fields["_lastState"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.state___76049;
    s.pc = 12; return s.tmp_2;
  case 12:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    s.changed___76055 = (r0);
    r0 = 0;
    s.r___76062 = (r0);
    r0 = (s.arg0).fields["_lastState"] = (s.state___76049);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_localTime"] = (s.tmp_1);
    s.tmp_0 = r0 = s.changed___76055;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = s.arg0.fields["_stateChangedHandler"];
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
    s.tmp_2 = lambda_1_mk(s);
    r0 = s.arg0.fields["_stateChangedHandler"];
    s.tmp_2.argL = r0;
    setupLambda(s.tmp_2, s.tmp_2.argL);
    s.pc = 13; return s.tmp_2;
  case 13:
    r0 = s.retval;
  case 4:
  case 5:
    r0 = s.r___76062;
    { step = 8; continue; }
  case 6:
    r0 = pxsim.BufferMethods.getNumber(s.data___76030, 4, 1);
    s.value___76082 = (r0);
    r0 = s.arg0.fields["_eventId"];
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, s.value___76082);
    r0 = 0;
    { step = 8; continue; }
  case 7:
    r0 = 0;
    { step = 8; continue; }
    r0 = undefined;
  case 8:
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorClient_handlePacket__P72031.info = {"start":2406,"length":1081,"line":70,"column":8,"endLine":93,"endColumn":9,"fileName":"sensorclient.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac_SensorClient_handlePacket__P72031_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorClient_handlePacket__P72031, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  data___76030: undefined,
  command___76033: undefined,
  state___76049: undefined,
  changed___76055: undefined,
  r___76062: undefined,
  value___76082: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_SensorClient_handleCustomCommand__P72032(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorClient__C72023_VT)) failedCast(r0);
    r0 = 0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorClient_handleCustomCommand__P72032.info = {"start":3497,"length":118,"line":95,"column":8,"endLine":97,"endColumn":9,"fileName":"sensorclient.ts","functionName":"handleCustomCommand","argumentNames":["this","command","pkt"]}

function jacdac_SensorClient_handleCustomCommand__P72032_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorClient_handleCustomCommand__P72032, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Service_eventId__P71914(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Service__C71912_VT)) failedCast(r0);
    r0 = s.arg0.fields["_eventId"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_Service_eventId__P71914.info = {"start":607,"length":59,"line":17,"column":8,"endLine":19,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"eventId","argumentNames":["this"]}

function jacdac_Service_eventId__P71914_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Service_eventId__P71914, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_SensorClient_handleVirtualState__P72033(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorClient__C72023_VT)) failedCast(r0);
    r0 = 0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorClient_handleVirtualState__P72033.info = {"start":3625,"length":100,"line":99,"column":8,"endLine":101,"endColumn":9,"fileName":"sensorclient.ts","functionName":"handleVirtualState","argumentNames":["this","state"]}

function jacdac_SensorClient_handleVirtualState__P72033_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorClient_handleVirtualState__P72033, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_bufferEqual__P71940(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.i___76124 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_7 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_11 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_10);
    s.tmp_9 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_9);
    s.tmp_8 = r0;
    r0 = (s.tmp_4 == s.tmp_8);
    { step = 11; continue; }
  case 3:
  case 4:
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_13 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_14 = r0;
    r0 = (s.tmp_13 != s.tmp_14);
    s.tmp_12 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_12);
    if (!r0) { step = 5; continue; }
    r0 = false;
    { step = 11; continue; }
  case 5:
  case 6:
    s.i___76124 = (0);
  case 7:
    s.tmp_1 = r0 = s.i___76124;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = pxsim.BufferMethods.getNumber(s.arg0, 2, s.i___76124);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.arg1, 2, s.i___76124);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 != s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 8; continue; }
    r0 = false;
    { step = 11; continue; }
  case 8:
  case 9:
    r0 = (s.i___76124 + 1);
    s.i___76124 = (r0);
    { step = 7; continue; }
  case 10:
    r0 = true;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
jacdac_bufferEqual__P71940.info = {"start":326,"length":355,"line":18,"column":4,"endLine":26,"endColumn":5,"fileName":"pxt_modules/jacdac/sensordriver.ts","functionName":"bufferEqual","argumentNames":["l","r"]}

function jacdac_bufferEqual__P71940_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_bufferEqual__P71940, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  i___76124: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_SensorClient_handleServiceInformation__P72030(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.data___76152 = undefined;
    s.state___76155 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorClient__C72023_VT)) failedCast(r0);
    r0 = s.arg0.fields["_sensorState"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 0;
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = s.arg2.fields["data"];
    s.data___76152 = (r0);
    r0 = pxsim.BufferMethods.getNumber(s.data___76152, 2, 1);
    s.state___76155 = (r0);
    r0 = s.arg0.fields["_sensorState"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 4);
    s.tmp_1 = r0;
    r0 = (s.state___76155 & 4);
    s.tmp_3 = r0;
    r0 = (s.tmp_1 != s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_4 = jacdac_SensorClient_sync__P72028_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = 0;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorClient_handleServiceInformation__P72030.info = {"start":1940,"length":456,"line":61,"column":8,"endLine":68,"endColumn":9,"fileName":"sensorclient.ts","functionName":"handleServiceInformation","argumentNames":["this","device","serviceInfo"]}

function jacdac_SensorClient_handleServiceInformation__P72030_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorClient_handleServiceInformation__P72030, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  data___76152: undefined,
  state___76155: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_SensorClient_sync__P72028(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    s.buf___76177 = undefined;
    s.cmd___76181 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorClient__C72023_VT)) failedCast(r0);
    r0 = s.arg0.fields["_sensorState"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = pxsim.control.createBuffer(2);
    s.buf___76177 = (r0);
    r0 = s.arg0.fields["_sensorState"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = 2;
    { step = 4; continue; }
  case 3:
    r0 = 3;
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.cmd___76181 = (s.tmp_2);
    r0 = pxsim.BufferMethods.setNumber(s.buf___76177, 2, 0, s.cmd___76181);
    s.tmp_0 = jacdac_Service_sendPacket__P71922_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.buf___76177;
    s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorClient_sync__P72028.info = {"start":1421,"length":370,"line":46,"column":8,"endLine":54,"endColumn":9,"fileName":"sensorclient.ts","functionName":"sync","argumentNames":["this"]}

function jacdac_SensorClient_sync__P72028_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorClient_sync__P72028, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  buf___76177: undefined,
  cmd___76181: undefined,
  arg0: undefined,
} }





function jacdac_Service_addAdvertisementData__P71920(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Service__C71912_VT)) failedCast(r0);
    r0 = s.arg0.fields["_controlData"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_Service_addAdvertisementData__P71920.info = {"start":1238,"length":80,"line":44,"column":8,"endLine":46,"endColumn":9,"fileName":"pxt_modules/jacdac/driver.ts","functionName":"addAdvertisementData","argumentNames":["this"]}

function jacdac_Service_addAdvertisementData__P71920_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Service_addAdvertisementData__P71920, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JDService_isConnected__P71490(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDService__C71484_VT)) failedCast(r0);
    r0 = s.arg0.fields["status"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = true;
    { step = 2; continue; }
  case 1:
    r0 = false;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDService_isConnected__P71490.info = {"start":1577,"length":121,"line":64,"column":8,"endLine":66,"endColumn":9,"fileName":"pxt_modules/jacdac/service.ts","functionName":"isConnected","argumentNames":["this"]}

function jacdac_JDService_isConnected__P71490_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDService_isConnected__P71490, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }




function lambda_4_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }


function lambda_3_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }


function lambda_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_Service__C71912_v4_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_JDService__C71484_v3_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_isConnected_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_writeBuffer_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function jacdac_JDControlService__C71601_v3_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function jacdac_JDService__C71484_v0_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_JDService__C71484_v2_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function jacdac_JDControlService__C71601_v2_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function jacdac_JDConfigurationService__C71503_v2_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function jacdac_JDService__C71484_v1_3_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }


function lambda_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function lambda_5_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }

const jacdac_JDService__C71484_VT = mkVTable({
  name: "JDService",
  numFields: 9,
  classNo: 16,
  lastSubtypeNo: 26,
  maxBgInstances: null,
  methods: {
    "addAdvertisementData": jacdac_JDService_addAdvertisementData__P71487,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_JDService_handlePacket__P71489,
    "send": jacdac_JDService_send__P71491,
  },
  iface: {
    "device": null,
    "set/device": null,
    "_service_class": null,
    "set/_service_class": null,
    "service_number": null,
    "set/service_number": null,
    "_mode": null,
    "set/_mode": null,
    "status": null,
    "set/status": null,
    "service_flags": null,
    "set/service_flags": null,
    "requiredDevice": null,
    "set/requiredDevice": null,
    "onConnected": null,
    "set/onConnected": null,
    "onDisconnected": null,
    "set/onDisconnected": null,
    "service_class": jacdac_JDService_service_class__P71485,
    "mode": jacdac_JDService_mode__P71486,
    "addAdvertisementData": jacdac_JDService_addAdvertisementData__P71487,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_JDService_handlePacket__P71489,
    "isConnected": jacdac_JDService_isConnected__P71490,
    "send": jacdac_JDService_send__P71491,
    "_hostConnected": jacdac_JDService__hostConnected__P71492,
    "_hostDisconnected": jacdac_JDService__hostDisconnected__P71493,
  },
});
const jacdac_Service__C71912_VT = mkVTable({
  name: "Service",
  numFields: 13,
  classNo: 17,
  lastSubtypeNo: 22,
  maxBgInstances: null,
  methods: {
    "addAdvertisementData": jacdac_Service_addAdvertisementData__P71920,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_JDService_handlePacket__P71489,
    "send": jacdac_JDService_send__P71491,
    "start": jacdac_Service_start__P71923,
  },
  iface: {
    "device": null,
    "set/device": null,
    "_service_class": null,
    "set/_service_class": null,
    "service_number": null,
    "set/service_number": null,
    "_mode": null,
    "set/_mode": null,
    "status": null,
    "set/status": null,
    "service_flags": null,
    "set/service_flags": null,
    "requiredDevice": null,
    "set/requiredDevice": null,
    "onConnected": null,
    "set/onConnected": null,
    "onDisconnected": null,
    "set/onDisconnected": null,
    "name": null,
    "set/name": null,
    "supressLog": null,
    "set/supressLog": null,
    "_controlData": null,
    "set/_controlData": null,
    "_eventId": null,
    "set/_eventId": null,
    "eventId": jacdac_Service_eventId__P71914,
    "serviceNumber": jacdac_Service_serviceNumber__P71915,
    "addAdvertisementData": jacdac_Service_addAdvertisementData__P71920,
    "log": jacdac_Service_log__P71921,
    "sendPacket": jacdac_Service_sendPacket__P71922,
    "start": jacdac_Service_start__P71923,
    "service_class": jacdac_JDService_service_class__P71485,
    "mode": jacdac_JDService_mode__P71486,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_JDService_handlePacket__P71489,
    "isConnected": jacdac_JDService_isConnected__P71490,
    "send": jacdac_JDService_send__P71491,
    "_hostConnected": jacdac_JDService__hostConnected__P71492,
    "_hostDisconnected": jacdac_JDService__hostDisconnected__P71493,
  },
});
const jacdac_Client__C71932_VT = mkVTable({
  name: "Client",
  numFields: 13,
  classNo: 18,
  lastSubtypeNo: 20,
  maxBgInstances: null,
  methods: {
    "addAdvertisementData": jacdac_Service_addAdvertisementData__P71920,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_JDService_handlePacket__P71489,
    "send": jacdac_JDService_send__P71491,
    "start": jacdac_Service_start__P71923,
  },
  iface: {
    "device": null,
    "set/device": null,
    "_service_class": null,
    "set/_service_class": null,
    "service_number": null,
    "set/service_number": null,
    "_mode": null,
    "set/_mode": null,
    "status": null,
    "set/status": null,
    "service_flags": null,
    "set/service_flags": null,
    "requiredDevice": null,
    "set/requiredDevice": null,
    "onConnected": null,
    "set/onConnected": null,
    "onDisconnected": null,
    "set/onDisconnected": null,
    "name": null,
    "set/name": null,
    "supressLog": null,
    "set/supressLog": null,
    "_controlData": null,
    "set/_controlData": null,
    "_eventId": null,
    "set/_eventId": null,
    "eventId": jacdac_Service_eventId__P71914,
    "serviceNumber": jacdac_Service_serviceNumber__P71915,
    "addAdvertisementData": jacdac_Service_addAdvertisementData__P71920,
    "log": jacdac_Service_log__P71921,
    "sendPacket": jacdac_Service_sendPacket__P71922,
    "start": jacdac_Service_start__P71923,
    "service_class": jacdac_JDService_service_class__P71485,
    "mode": jacdac_JDService_mode__P71486,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_JDService_handlePacket__P71489,
    "isConnected": jacdac_JDService_isConnected__P71490,
    "send": jacdac_JDService_send__P71491,
    "_hostConnected": jacdac_JDService__hostConnected__P71492,
    "_hostDisconnected": jacdac_JDService__hostDisconnected__P71493,
  },
});
const jacdac_SensorClient__C72023_VT = mkVTable({
  name: "SensorClient",
  numFields: 17,
  classNo: 19,
  lastSubtypeNo: 20,
  maxBgInstances: null,
  methods: {
    "addAdvertisementData": jacdac_Service_addAdvertisementData__P71920,
    "handleServiceInformation": jacdac_SensorClient_handleServiceInformation__P72030,
    "handlePacket": jacdac_SensorClient_handlePacket__P72031,
    "send": jacdac_JDService_send__P71491,
    "start": jacdac_Service_start__P71923,
  },
  iface: {
    "device": null,
    "set/device": null,
    "_service_class": null,
    "set/_service_class": null,
    "service_number": null,
    "set/service_number": null,
    "_mode": null,
    "set/_mode": null,
    "status": null,
    "set/status": null,
    "service_flags": null,
    "set/service_flags": null,
    "requiredDevice": null,
    "set/requiredDevice": null,
    "onConnected": null,
    "set/onConnected": null,
    "onDisconnected": null,
    "set/onDisconnected": null,
    "name": null,
    "set/name": null,
    "supressLog": null,
    "set/supressLog": null,
    "_controlData": null,
    "set/_controlData": null,
    "_eventId": null,
    "set/_eventId": null,
    "_localTime": null,
    "set/_localTime": null,
    "_lastState": null,
    "set/_lastState": null,
    "_stateChangedHandler": null,
    "set/_stateChangedHandler": null,
    "_sensorState": null,
    "set/_sensorState": null,
    "sync": jacdac_SensorClient_sync__P72028,
    "handleServiceInformation": jacdac_SensorClient_handleServiceInformation__P72030,
    "handlePacket": jacdac_SensorClient_handlePacket__P72031,
    "handleCustomCommand": jacdac_SensorClient_handleCustomCommand__P72032,
    "handleVirtualState": jacdac_SensorClient_handleVirtualState__P72033,
    "eventId": jacdac_Service_eventId__P71914,
    "serviceNumber": jacdac_Service_serviceNumber__P71915,
    "addAdvertisementData": jacdac_Service_addAdvertisementData__P71920,
    "log": jacdac_Service_log__P71921,
    "sendPacket": jacdac_Service_sendPacket__P71922,
    "start": jacdac_Service_start__P71923,
    "service_class": jacdac_JDService_service_class__P71485,
    "mode": jacdac_JDService_mode__P71486,
    "isConnected": jacdac_JDService_isConnected__P71490,
    "send": jacdac_JDService_send__P71491,
    "_hostConnected": jacdac_JDService__hostConnected__P71492,
    "_hostDisconnected": jacdac_JDService__hostDisconnected__P71493,
  },
});
const jacdac_RotaryEncoderClient__C72198_VT = mkVTable({
  name: "RotaryEncoderClient",
  numFields: 17,
  classNo: 20,
  lastSubtypeNo: 20,
  maxBgInstances: null,
  methods: {
    "addAdvertisementData": jacdac_Service_addAdvertisementData__P71920,
    "handleServiceInformation": jacdac_SensorClient_handleServiceInformation__P72030,
    "handlePacket": jacdac_SensorClient_handlePacket__P72031,
    "send": jacdac_JDService_send__P71491,
    "start": jacdac_Service_start__P71923,
  },
  iface: {
    "device": null,
    "set/device": null,
    "_service_class": null,
    "set/_service_class": null,
    "service_number": null,
    "set/service_number": null,
    "_mode": null,
    "set/_mode": null,
    "status": null,
    "set/status": null,
    "service_flags": null,
    "set/service_flags": null,
    "requiredDevice": null,
    "set/requiredDevice": null,
    "onConnected": null,
    "set/onConnected": null,
    "onDisconnected": null,
    "set/onDisconnected": null,
    "name": null,
    "set/name": null,
    "supressLog": null,
    "set/supressLog": null,
    "_controlData": null,
    "set/_controlData": null,
    "_eventId": null,
    "set/_eventId": null,
    "_localTime": null,
    "set/_localTime": null,
    "_lastState": null,
    "set/_lastState": null,
    "_stateChangedHandler": null,
    "set/_stateChangedHandler": null,
    "_sensorState": null,
    "set/_sensorState": null,
    "sync": jacdac_SensorClient_sync__P72028,
    "handleServiceInformation": jacdac_SensorClient_handleServiceInformation__P72030,
    "handlePacket": jacdac_SensorClient_handlePacket__P72031,
    "handleCustomCommand": jacdac_SensorClient_handleCustomCommand__P72032,
    "handleVirtualState": jacdac_SensorClient_handleVirtualState__P72033,
    "eventId": jacdac_Service_eventId__P71914,
    "serviceNumber": jacdac_Service_serviceNumber__P71915,
    "addAdvertisementData": jacdac_Service_addAdvertisementData__P71920,
    "log": jacdac_Service_log__P71921,
    "sendPacket": jacdac_Service_sendPacket__P71922,
    "start": jacdac_Service_start__P71923,
    "service_class": jacdac_JDService_service_class__P71485,
    "mode": jacdac_JDService_mode__P71486,
    "isConnected": jacdac_JDService_isConnected__P71490,
    "send": jacdac_JDService_send__P71491,
    "_hostConnected": jacdac_JDService__hostConnected__P71492,
    "_hostDisconnected": jacdac_JDService__hostDisconnected__P71493,
  },
});
const control_EventContext__C71358_VT = mkVTable({
  name: "EventContext",
  numFields: 9,
  classNo: 27,
  lastSubtypeNo: 27,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "handlers": null,
    "set/handlers": null,
    "frameCallbacks": null,
    "set/frameCallbacks": null,
    "frameWorker": null,
    "set/frameWorker": null,
    "framesInSample": null,
    "set/framesInSample": null,
    "timeInSample": null,
    "set/timeInSample": null,
    "deltaTimeMillis": null,
    "set/deltaTimeMillis": null,
    "prevTimeMillis": null,
    "set/prevTimeMillis": null,
    "idleCallbacks": null,
    "set/idleCallbacks": null,
    "runningCallbacks": null,
    "set/runningCallbacks": null,
    "registerHandler": control_EventContext_registerHandler__P71365,
  },
});
const control_EventHandler__C71353_VT = mkVTable({
  name: "EventHandler",
  numFields: 4,
  classNo: 28,
  lastSubtypeNo: 28,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "src": null,
    "set/src": null,
    "value": null,
    "set/value": null,
    "handler": null,
    "set/handler": null,
    "flags": null,
    "set/flags": null,
    "register": control_EventHandler_register__P71354,
  },
});
const jacdac_Broadcast__C71926_VT = mkVTable({
  name: "Broadcast",
  numFields: 13,
  classNo: 21,
  lastSubtypeNo: 22,
  maxBgInstances: null,
  methods: {
    "addAdvertisementData": jacdac_Service_addAdvertisementData__P71920,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_JDService_handlePacket__P71489,
    "send": jacdac_JDService_send__P71491,
    "start": jacdac_Service_start__P71923,
  },
  iface: {
    "device": null,
    "set/device": null,
    "_service_class": null,
    "set/_service_class": null,
    "service_number": null,
    "set/service_number": null,
    "_mode": null,
    "set/_mode": null,
    "status": null,
    "set/status": null,
    "service_flags": null,
    "set/service_flags": null,
    "requiredDevice": null,
    "set/requiredDevice": null,
    "onConnected": null,
    "set/onConnected": null,
    "onDisconnected": null,
    "set/onDisconnected": null,
    "name": null,
    "set/name": null,
    "supressLog": null,
    "set/supressLog": null,
    "_controlData": null,
    "set/_controlData": null,
    "_eventId": null,
    "set/_eventId": null,
    "eventId": jacdac_Service_eventId__P71914,
    "serviceNumber": jacdac_Service_serviceNumber__P71915,
    "addAdvertisementData": jacdac_Service_addAdvertisementData__P71920,
    "log": jacdac_Service_log__P71921,
    "sendPacket": jacdac_Service_sendPacket__P71922,
    "start": jacdac_Service_start__P71923,
    "service_class": jacdac_JDService_service_class__P71485,
    "mode": jacdac_JDService_mode__P71486,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_JDService_handlePacket__P71489,
    "isConnected": jacdac_JDService_isConnected__P71490,
    "send": jacdac_JDService_send__P71491,
    "_hostConnected": jacdac_JDService__hostConnected__P71492,
    "_hostDisconnected": jacdac_JDService__hostDisconnected__P71493,
  },
});
const jacdac_MessageBusService__C71968_VT = mkVTable({
  name: "MessageBusService",
  numFields: 14,
  classNo: 22,
  lastSubtypeNo: 22,
  maxBgInstances: null,
  methods: {
    "addAdvertisementData": jacdac_Service_addAdvertisementData__P71920,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_MessageBusService_handlePacket__P71972,
    "send": jacdac_JDService_send__P71491,
    "start": jacdac_Service_start__P71923,
  },
  iface: {
    "device": null,
    "set/device": null,
    "_service_class": null,
    "set/_service_class": null,
    "service_number": null,
    "set/service_number": null,
    "_mode": null,
    "set/_mode": null,
    "status": null,
    "set/status": null,
    "service_flags": null,
    "set/service_flags": null,
    "requiredDevice": null,
    "set/requiredDevice": null,
    "onConnected": null,
    "set/onConnected": null,
    "onDisconnected": null,
    "set/onDisconnected": null,
    "name": null,
    "set/name": null,
    "supressLog": null,
    "set/supressLog": null,
    "_controlData": null,
    "set/_controlData": null,
    "_eventId": null,
    "set/_eventId": null,
    "suppressForwarding": null,
    "set/suppressForwarding": null,
    "raiseEvent": jacdac_MessageBusService_raiseEvent__P71970,
    "broadcastEvent": jacdac_MessageBusService_broadcastEvent__P71971,
    "handlePacket": jacdac_MessageBusService_handlePacket__P71972,
    "eventId": jacdac_Service_eventId__P71914,
    "serviceNumber": jacdac_Service_serviceNumber__P71915,
    "addAdvertisementData": jacdac_Service_addAdvertisementData__P71920,
    "log": jacdac_Service_log__P71921,
    "sendPacket": jacdac_Service_sendPacket__P71922,
    "start": jacdac_Service_start__P71923,
    "service_class": jacdac_JDService_service_class__P71485,
    "mode": jacdac_JDService_mode__P71486,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "isConnected": jacdac_JDService_isConnected__P71490,
    "send": jacdac_JDService_send__P71491,
    "_hostConnected": jacdac_JDService__hostConnected__P71492,
    "_hostDisconnected": jacdac_JDService__hostDisconnected__P71493,
  },
});
const jacdac_JACDAC__C71718_VT = mkVTable({
  name: "JACDAC",
  numFields: 8,
  classNo: 29,
  lastSubtypeNo: 29,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "_controlService": null,
    "set/_controlService": null,
    "_consoleService": null,
    "set/_consoleService": null,
    "_bridge": null,
    "set/_bridge": null,
    "_services": null,
    "set/_services": null,
    "_bus": null,
    "set/_bus": null,
    "state": null,
    "set/state": null,
    "onIdentificationRequest": null,
    "set/onIdentificationRequest": null,
    "onNameRemotelyChanged": null,
    "set/onNameRemotelyChanged": null,
    "bus": jacdac_JACDAC_bus__P71719,
    "set/bus": jacdac_JACDAC_bus__P71720,
    "services": jacdac_JACDAC_services__P71721,
    "consoleService": jacdac_JACDAC_consoleService__P71726,
    "routePacket": jacdac_JACDAC_routePacket__P71728,
    "start": jacdac_JACDAC_start__P71729,
    "setDeviceName": jacdac_JACDAC_setDeviceName__P71731,
    "getDeviceName": jacdac_JACDAC_getDeviceName__P71732,
    "getRemoteDevice": jacdac_JACDAC_getRemoteDevice__P71735,
    "add": jacdac_JACDAC_add__P71737,
    "instance": jacdac_JACDAC_instance__P71740,
    "write": jacdac_JACDAC_write__P71741,
    "writePacket": jacdac_JACDAC_writePacket__P71742,
  },
});
const jacdac_JDPacket__C71762_VT = mkVTable({
  name: "JDPacket",
  numFields: 1,
  classNo: 30,
  lastSubtypeNo: 30,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "_buffer": null,
    "set/_buffer": null,
    "crc": jacdac_JDPacket_crc__P71763,
    "set/crc": jacdac_JDPacket_crc__P71764,
    "device_address": jacdac_JDPacket_device_address__P71765,
    "set/device_address": jacdac_JDPacket_device_address__P71766,
    "udidh": jacdac_JDPacket_udidh__P71767,
    "udidl": jacdac_JDPacket_udidl__P71768,
    "size": jacdac_JDPacket_size__P71769,
    "set/size": jacdac_JDPacket_size__P71770,
    "service_number": jacdac_JDPacket_service_number__P71771,
    "set/service_number": jacdac_JDPacket_service_number__P71772,
    "data": jacdac_JDPacket_data__P71773,
    "set/data": jacdac_JDPacket_data__P71774,
    "communication_rate": jacdac_JDPacket_communication_rate__P71775,
    "set/communication_rate": jacdac_JDPacket_communication_rate__P71776,
    "getBuffer": jacdac_JDPacket_getBuffer__P71777,
    "toString": jacdac_JDPacket_toString__P71778,
  },
  toStringMethod: jacdac_JDPacket_toString__P71778,
});
const jacdac_JDDevice__C71792_VT = mkVTable({
  name: "JDDevice",
  numFields: 9,
  classNo: 31,
  lastSubtypeNo: 31,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "unique_device_identifier": null,
    "set/unique_device_identifier": null,
    "device_address": null,
    "set/device_address": null,
    "device_flags": null,
    "set/device_flags": null,
    "device_name": null,
    "set/device_name": null,
    "_services": null,
    "set/_services": null,
    "rolling_counter": null,
    "set/rolling_counter": null,
    "broadcast_servicemap": null,
    "set/broadcast_servicemap": null,
    "servicemap_bitmsk": null,
    "set/servicemap_bitmsk": null,
    "communication_rate": null,
    "set/communication_rate": null,
    "services": jacdac_JDDevice_services__P71793,
    "update": jacdac_JDDevice_update__P71794,
    "udidh": jacdac_JDDevice_udidh__P71795,
    "udidl": jacdac_JDDevice_udidl__P71796,
    "udid": jacdac_JDDevice_udid__P71797,
    "toString": jacdac_JDDevice_toString__P71798,
  },
  toStringMethod: jacdac_JDDevice_toString__P71798,
});
const jacdac_JDDummyBus__C71715_VT = mkVTable({
  name: "JDDummyBus",
  numFields: 0,
  classNo: 32,
  lastSubtypeNo: 32,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "writeBuffer": jacdac_JDDummyBus_writeBuffer__P71716,
    "isConnected": jacdac_JDDummyBus_isConnected__P71717,
  },
});
const jacdac_JDControlService__C71601_VT = mkVTable({
  name: "JDControlService",
  numFields: 16,
  classNo: 23,
  lastSubtypeNo: 23,
  maxBgInstances: null,
  methods: {
    "addAdvertisementData": jacdac_JDService_addAdvertisementData__P71487,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_JDControlService_handlePacket__P71615,
    "send": jacdac_JDControlService_send__P71603,
  },
  iface: {
    "device": null,
    "set/device": null,
    "_service_class": null,
    "set/_service_class": null,
    "service_number": null,
    "set/service_number": null,
    "_mode": null,
    "set/_mode": null,
    "status": null,
    "set/status": null,
    "service_flags": null,
    "set/service_flags": null,
    "requiredDevice": null,
    "set/requiredDevice": null,
    "onConnected": null,
    "set/onConnected": null,
    "onDisconnected": null,
    "set/onDisconnected": null,
    "name": null,
    "set/name": null,
    "deviceManager": null,
    "set/deviceManager": null,
    "rngService": null,
    "set/rngService": null,
    "configurationService": null,
    "set/configurationService": null,
    "_intervalId": null,
    "set/_intervalId": null,
    "nextAddress": null,
    "set/nextAddress": null,
    "onChange": null,
    "set/onChange": null,
    "send": jacdac_JDControlService_send__P71603,
    "deviceDisconnected": jacdac_JDControlService_deviceDisconnected__P71604,
    "deviceEnumerated": jacdac_JDControlService_deviceEnumerated__P71605,
    "formControlPacket": jacdac_JDControlService_formControlPacket__P71606,
    "startDeviceTimer": jacdac_JDControlService_startDeviceTimer__P71607,
    "initialise": jacdac_JDControlService_initialise__P71608,
    "enumerate": jacdac_JDControlService_enumerate__P71609,
    "getRemoteDevice": jacdac_JDControlService_getRemoteDevice__P71613,
    "routePacket": jacdac_JDControlService_routePacket__P71614,
    "handlePacket": jacdac_JDControlService_handlePacket__P71615,
    "setDeviceName": jacdac_JDControlService_setDeviceName__P71616,
    "getDeviceName": jacdac_JDControlService_getDeviceName__P71617,
    "service_class": jacdac_JDService_service_class__P71485,
    "mode": jacdac_JDService_mode__P71486,
    "addAdvertisementData": jacdac_JDService_addAdvertisementData__P71487,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "isConnected": jacdac_JDService_isConnected__P71490,
    "_hostConnected": jacdac_JDService__hostConnected__P71492,
    "_hostDisconnected": jacdac_JDService__hostDisconnected__P71493,
  },
});
const jacdac_JDDeviceManager__C71702_VT = mkVTable({
  name: "JDDeviceManager",
  numFields: 1,
  classNo: 33,
  lastSubtypeNo: 33,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "devices": null,
    "set/devices": null,
    "getDeviceList": jacdac_JDDeviceManager_getDeviceList__P71703,
    "getRemoteDevice": jacdac_JDDeviceManager_getRemoteDevice__P71704,
    "getRemoteDeviceUnique": jacdac_JDDeviceManager_getRemoteDeviceUnique__P71705,
    "addDevice": jacdac_JDDeviceManager_addDevice__P71706,
    "updateDevice": jacdac_JDDeviceManager_updateDevice__P71707,
    "removeDevice": jacdac_JDDeviceManager_removeDevice__P71708,
  },
});
const jacdac_JDRNGService__C71758_VT = mkVTable({
  name: "JDRNGService",
  numFields: 9,
  classNo: 24,
  lastSubtypeNo: 24,
  maxBgInstances: null,
  methods: {
    "addAdvertisementData": jacdac_JDService_addAdvertisementData__P71487,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_JDService_handlePacket__P71489,
    "send": jacdac_JDRNGService_send__P71760,
  },
  iface: {
    "device": null,
    "set/device": null,
    "_service_class": null,
    "set/_service_class": null,
    "service_number": null,
    "set/service_number": null,
    "_mode": null,
    "set/_mode": null,
    "status": null,
    "set/status": null,
    "service_flags": null,
    "set/service_flags": null,
    "requiredDevice": null,
    "set/requiredDevice": null,
    "onConnected": null,
    "set/onConnected": null,
    "onDisconnected": null,
    "set/onDisconnected": null,
    "send": jacdac_JDRNGService_send__P71760,
    "service_class": jacdac_JDService_service_class__P71485,
    "mode": jacdac_JDService_mode__P71486,
    "addAdvertisementData": jacdac_JDService_addAdvertisementData__P71487,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_JDService_handlePacket__P71489,
    "isConnected": jacdac_JDService_isConnected__P71490,
    "_hostConnected": jacdac_JDService__hostConnected__P71492,
    "_hostDisconnected": jacdac_JDService__hostDisconnected__P71493,
  },
});
const jacdac_JDConfigurationService__C71503_VT = mkVTable({
  name: "JDConfigurationService",
  numFields: 10,
  classNo: 25,
  lastSubtypeNo: 25,
  maxBgInstances: null,
  methods: {
    "addAdvertisementData": jacdac_JDService_addAdvertisementData__P71487,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "handlePacket": jacdac_JDConfigurationService_handlePacket__P71506,
    "send": jacdac_JDConfigurationService_send__P71505,
  },
  iface: {
    "device": null,
    "set/device": null,
    "_service_class": null,
    "set/_service_class": null,
    "service_number": null,
    "set/service_number": null,
    "_mode": null,
    "set/_mode": null,
    "status": null,
    "set/status": null,
    "service_flags": null,
    "set/service_flags": null,
    "requiredDevice": null,
    "set/requiredDevice": null,
    "onConnected": null,
    "set/onConnected": null,
    "onDisconnected": null,
    "set/onDisconnected": null,
    "name": null,
    "set/name": null,
    "send": jacdac_JDConfigurationService_send__P71505,
    "handlePacket": jacdac_JDConfigurationService_handlePacket__P71506,
    "service_class": jacdac_JDService_service_class__P71485,
    "mode": jacdac_JDService_mode__P71486,
    "addAdvertisementData": jacdac_JDService_addAdvertisementData__P71487,
    "handleServiceInformation": jacdac_JDService_handleServiceInformation__P71488,
    "isConnected": jacdac_JDService_isConnected__P71490,
    "_hostConnected": jacdac_JDService__hostConnected__P71492,
    "_hostDisconnected": jacdac_JDService__hostDisconnected__P71493,
  },
});
const jacdac_JDControlPacket__C71780_VT = mkVTable({
  name: "JDControlPacket",
  numFields: 5,
  classNo: 34,
  lastSubtypeNo: 34,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "unique_device_identifier": null,
    "set/unique_device_identifier": null,
    "device_address": null,
    "set/device_address": null,
    "device_flags": null,
    "set/device_flags": null,
    "_device_name": null,
    "set/_device_name": null,
    "data": null,
    "set/data": null,
    "getBuffer": jacdac_JDControlPacket_getBuffer__P71781,
    "udidh": jacdac_JDControlPacket_udidh__P71782,
    "udidl": jacdac_JDControlPacket_udidl__P71783,
    "device_name": jacdac_JDControlPacket_device_name__P71785,
    "set/device_name": jacdac_JDControlPacket_device_name__P71786,
    "append": jacdac_JDControlPacket_append__P71787,
  },
});
const jacdac_JDServiceInformation__C71800_VT = mkVTable({
  name: "JDServiceInformation",
  numFields: 4,
  classNo: 35,
  lastSubtypeNo: 35,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "service_class": null,
    "set/service_class": null,
    "service_flags": null,
    "set/service_flags": null,
    "advertisement_size": null,
    "set/advertisement_size": null,
    "data": null,
    "set/data": null,
    "getBuffer": jacdac_JDServiceInformation_getBuffer__P71801,
  },
});
const control_Interval__C71309_VT = mkVTable({
  name: "Interval",
  numFields: 4,
  classNo: 36,
  lastSubtypeNo: 36,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "id": null,
    "set/id": null,
    "func": null,
    "set/func": null,
    "delay": null,
    "set/delay": null,
    "mode": null,
    "set/mode": null,
    "work": control_Interval_work__P71310,
  },
});
const jacdac_JACDACBus__C71817_VT = mkVTable({
  name: "JACDACBus",
  numFields: 0,
  classNo: 37,
  lastSubtypeNo: 37,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "start": jacdac_JACDACBus_start__P71818,
    "handlePacketData": jacdac_JACDACBus_handlePacketData__P71820,
    "writeBuffer": jacdac_JACDACBus_writeBuffer__P71821,
    "isConnected": jacdac_JACDACBus_isConnected__P71822,
  },
});
const jacdac_JDConsoleService__C71530_VT = mkVTable({
  name: "JDConsoleService",
  numFields: 12,
  classNo: 26,
  lastSubtypeNo: 26,
  maxBgInstances: null,
  methods: {
    "addAdvertisementData": jacdac_JDConsoleService_addAdvertisementData__P71534,
    "handleServiceInformation": jacdac_JDConsoleService_handleServiceInformation__P71535,
    "handlePacket": jacdac_JDConsoleService_handlePacket__P71536,
    "send": jacdac_JDService_send__P71491,
  },
  iface: {
    "device": null,
    "set/device": null,
    "_service_class": null,
    "set/_service_class": null,
    "service_number": null,
    "set/service_number": null,
    "_mode": null,
    "set/_mode": null,
    "status": null,
    "set/status": null,
    "service_flags": null,
    "set/service_flags": null,
    "requiredDevice": null,
    "set/requiredDevice": null,
    "onConnected": null,
    "set/onConnected": null,
    "onDisconnected": null,
    "set/onDisconnected": null,
    "_consoleMode": null,
    "set/_consoleMode": null,
    "_lastListenerTime": null,
    "set/_lastListenerTime": null,
    "onMessageReceived": null,
    "set/onMessageReceived": null,
    "consoleMode": jacdac_JDConsoleService_consoleMode__P71532,
    "set/consoleMode": jacdac_JDConsoleService_consoleMode__P71533,
    "addAdvertisementData": jacdac_JDConsoleService_addAdvertisementData__P71534,
    "handleServiceInformation": jacdac_JDConsoleService_handleServiceInformation__P71535,
    "handlePacket": jacdac_JDConsoleService_handlePacket__P71536,
    "minPriority": jacdac_JDConsoleService_minPriority__P71537,
    "set/minPriority": jacdac_JDConsoleService_minPriority__P71538,
    "add": jacdac_JDConsoleService_add__P71543,
    "service_class": jacdac_JDService_service_class__P71485,
    "mode": jacdac_JDService_mode__P71486,
    "isConnected": jacdac_JDService_isConnected__P71490,
    "send": jacdac_JDService_send__P71491,
    "_hostConnected": jacdac_JDService__hostConnected__P71492,
    "_hostDisconnected": jacdac_JDService__hostDisconnected__P71493,
  },
});
const jacdac_JDConsolePacket__C71806_VT = mkVTable({
  name: "JDConsolePacket",
  numFields: 3,
  classNo: 38,
  lastSubtypeNo: 38,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "priority": null,
    "set/priority": null,
    "packetType": null,
    "set/packetType": null,
    "message": null,
    "set/message": null,
    "getBuffer": jacdac_JDConsolePacket_getBuffer__P71807,
  },
});
const jacdac_JDRequiredDevice__C71789_VT = mkVTable({
  name: "JDRequiredDevice",
  numFields: 2,
  classNo: 39,
  lastSubtypeNo: 39,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "unique_device_identifier": null,
    "set/unique_device_identifier": null,
    "device_name": null,
    "set/device_name": null,
    "udidh": jacdac_JDRequiredDevice_udidh__P71790,
    "udidl": jacdac_JDRequiredDevice_udidl__P71791,
  },
});
const jacdac_JDConfigurationPacket__C71803_VT = mkVTable({
  name: "JDConfigurationPacket",
  numFields: 3,
  classNo: 40,
  lastSubtypeNo: 40,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "device_address": null,
    "set/device_address": null,
    "request_type": null,
    "set/request_type": null,
    "new_name": null,
    "set/new_name": null,
  },
});

const breakpoints = setupDebugger(1, ["rotaryEncoderClient___72204"])

return _main___P71097
})
